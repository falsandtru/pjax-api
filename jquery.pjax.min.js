/*
 * 
 * pjax
 * 
 * ---
 * @Copyright(c) 2012, falsandtru
 * @license MIT http://opensource.org/licenses/mit-license.php
 * @version 1.33.0
 * @updated 2014/06/01
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(l,n,D,z){function F(b,f,h,m,d,a){var g=this;switch(!0){case "object"===typeof a:g=g instanceof b?g:b(h);g=d.setProperties.call(g,a.ns||"",null);if(!a.area&&!a.scope)return g;break;default:return g=g instanceof b?g:b[d.name],d.setProperties.call(g,null,null)}var c;c=b.extend(!0,{id:0,gns:d.name,ns:null,area:null,link:"a:not([target])",filter:function(){return/(\/[^.]*|\.html?|\.php)([#?].*)?$/.test(this.href)},form:null,scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{dataType:"text"},
contentType:"text/html",cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,mix:!1,page:100,size:1048576,expires:{max:null,min:3E5}},callback:function(){},callbacks:{ajax:{},update:{url:{},title:{},content:{},scroll:{},css:{},script:{},cache:{load:{},save:{}},rendering:{},verify:{}},async:!1},parameter:null,load:{css:!1,script:!1,execute:!0,reload:"",reject:"",sync:!0,ajax:{dataType:"script"},rewrite:null},interval:300,wait:0,scroll:{delay:300},fix:{location:!0,history:!0,scroll:!0,reset:!1},hashquery:!1,
fallback:!0,database:!0,server:{query:"pjax=1"}},a);c.location=b("<a/>",{href:d.canonicalizeURL(f.location.href)})[0];c.destination=b("<a/>",{href:d.canonicalizeURL(f.location.href)})[0];c.nss={array:[d.name].concat(c.ns&&String(c.ns).split(".")||[])};b.extend(!0,c=c.scope&&d.scope(c)||c,{nss:{name:c.ns||"",event:c.nss.array.join("."),alias:d.alias?[d.alias].concat(c.nss.array.slice(1)).join("."):!1,click:["click"].concat(c.nss.array.join(":")).join("."),submit:["submit"].concat(c.nss.array.join(":")).join("."),
popstate:["popstate"].concat(c.nss.array.join(":")).join("."),scroll:["scroll"].concat(c.nss.array.join(":")).join("."),data:c.nss.array.join("-"),class4html:c.nss.array.join("-"),requestHeader:["X",c.nss.array[0].replace(/^\w/,function(a){return a.toUpperCase()})].join("-")},areaback:c.area,fix:/Mobile(\/\w+)? Safari/i.test(f.navigator.userAgent)?{}:{location:!1,reset:!1},contentType:c.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),scroll:{record:!0,queue:[]},log:{script:{},speed:{}},history:{order:[],
data:{},size:0},timeStamp:(new Date).getTime(),disable:!1,landing:d.canonicalizeURL(f.location.href),retry:!0,xhr:null,speed:{now:function(){return(new Date).getTime()}},option:a});d.supportPushState()&&d.registrate.call(g,b,f,h,m,d,c);return g}var k;k={name:"pjax",alias:"",ids:[],settings:[0],count:0,setAlias:function(b){k.alias="string"===typeof b?b:k.alias;k.name===k.alias||l[k.alias]||(l[k.name][k.alias]=l.fn[k.name],l.fn[k.alias]=l[k.alias]=l.fn[k.name])},IDBFactory:n.indexedDB||n.webkitIndexedDB||
n.mozIndexedDB||n.msIndexedDB,IDBDatabase:null,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange||n.mozIDBKeyRange||n.msIDBKeyRange,createHTMLDocument:null,setProperties:function(b,f){var h=this;if(h instanceof l||h===l[k.name])h=h instanceof l&&f!==z?h.add(f):h,h[k.name]=l[k.name],h.on=function(){k.settings[1].disable=!1},h.off=function(){k.settings[1].disable=!0},h.click=function(b,d){var a;switch(!0){case "object"===typeof b:a=l(b);break;case !!b:d=d||{};d.href=b;a=l("<a/>",d);break;default:return this}return a.first().one("click",
1,k.click).click()},h.submit=function(b,d,a){var g=D.createDocumentFragment(),c;switch(!0){case "object"===typeof b:d=l(b);break;case !!a:d=d||{};d.action=b;b=a instanceof Array&&Array||a instanceof Object&&Object||z;for(var f in a){c=a[f];switch(b){case Object:c=l("<textarea/>",{name:f}).val(c);break;case Array:c.attr=c.attr||{};c.attr.name=c.name;c=l(c.tag.indexOf("<")?"<"+c.tag+"/>":c.tag,c.attr||{}).val(c.value);break;default:continue}g.appendChild(c[0])}d=l("<form/>",d).append(g);break;default:return this}return d.first().one("submit",
1,k.submit).submit()},h.setCache=function(b,d,a,g){var c=k.settings[1];if(!c||!c.history)return this;var f,h,w,t;f=c.history;b=k.canonicalizeURL(b||n.location.href);b=c.hashquery?b:b.replace(/#.*/,"");switch(arguments.length){case 0:case 1:return arguments.callee.call(this,b,k.trim(D.documentElement.outerHTML));default:f.order.unshift(b);for(h=1;w=f.order[h];h++)b===w&&f.order.splice(h,1);f.size>c.cache.size&&l[k.name].cleanCache();l[k.name].getCache(b);h=l("<span/>").html(k.find((d||"")+((g||{}).responseText||
"")+"<title></title>",/<title[^>]*?>([^<]*?)<\/title>/i).shift()).text();w=parseInt(1.8*((d||"").length+((g||{}).responseText||"").length)||1048576,10);t=(new Date).getTime();var B;if(B=c.cache.expires){var s;/no-store|no-cache/.test(g.getResponseHeader("Cache-Control"))||(s=~String(s=g.getResponseHeader("Cache-Control")).indexOf("max-age=")?1E3*s.match(/max-age=(\d+)/)[1]:(s=g.getResponseHeader("Expires"))?(new Date(s)).getTime()-(new Date).getTime():c.cache.expires);s=Math.max(s,0)||0;s="object"===
typeof c.cache.expires&&"number"===typeof c.cache.expires.min?Math.max(c.cache.expires.min,s):s;s="object"===typeof c.cache.expires&&"number"===typeof c.cache.expires.max?Math.min(c.cache.expires.max,s):s;B=t+s}f.size=f.size||0;f.size+=f.data[b]?0:w;f.data[b]=l.extend(!0,f.data[b]||{},{XMLHttpRequest:g,textStatus:a,data:d,size:w,expires:B||0,timeStamp:t});c.database&&c.fix.history&&k.dbTitle(b,h)}return this},h.getCache=function(b){var d=k.settings[1];if(!d||!d.history)return!1;var a;a=d.history;
b=k.canonicalizeURL(b||n.location.href);b=d.hashquery?b:b.replace(/#.*/,"");a.data[b]&&(new Date).getTime()>a.data[b].expires&&l[k.name].removeCache(b);return a.data[b]},h.removeCache=function(b){var d=k.settings[1];if(!d||!d.history)return this;var a;a=d.history;b=k.canonicalizeURL(b||n.location.href);b=d.hashquery?b:b.replace(/#.*/,"");for(var d=0,g;g=a.order[d];d++)b===g&&(a.order.splice(d,1),a.size-=a.data[g].size,a.data[g]=null,delete a.data[g]);return this},h.clearCache=function(){var b=k.settings[1];
if(!b||!b.history)return this;for(var b=b.history,d=b.order.length,a;a=b.order[--d];)b.order.splice(d,1),b.size-=b.data[a].size,delete b.data[a];return this},h.cleanCache=function(){var b=k.settings[1];if(!b||!b.history)return this;for(var d=b.history,a=d.order.length,g;g=d.order[--a];)if(a>=b.cache.page||g in d.data&&(new Date).getTime()>d.data[g].expires)d.order.splice(a,1),d.size-=d.data[g].size,delete d.data[g];return this},h.follow=function(b,d,a){var g=k.settings[1];if(!g||!l.when||!k.check(b,
g))return!1;isFinite(b.timeStamp)&&(d.timeStamp=a||b.timeStamp);g.xhr=d;l.when(d).done(function(){g.xhr&&4>g.xhr.readyState&&g.xhr.abort();l[k.name].setCache(b.currentTarget.href,z,z,d)}).fail(function(){k.fallback(b)});l[k.name].click(b.currentTarget.href);return!0};return h},check:function(b,f){var h,m;h=l("<a/>",{href:k.canonicalizeURL(n.location.href)})[0];m=l("<a/>",{href:k.canonicalizeURL(b.currentTarget.href)})[0];if(l(b.currentTarget).filter(f.filter).length&&!(f.disable||h.protocol!==m.protocol||
h.host!==m.host||1<b.which||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey)&&(f.area=k.fire(f.areaback,null,[b,f.parameter,m.href,h.href]),l(f.area).length&&(!f.scope||k.scope(f,h.href,m.href))))return!0},supportPushState:function(){return"pushState"in n.history&&n.history.pushState},registrate:function(b,f,h,k,d,a){a.id=1;d.ids.push(a.id);d.settings[a.id]=a;a.load.script&&b("script").each(function(){var g=this,c,g="function"===typeof a.load.rewrite?d.fire(a.load.rewrite,null,[g.cloneNode()])||g:g;c=
g.src;c in a.log.script||!c||a.load.reload&&b(g).is(a.load.reload)||(a.log.script[c]=!0)});a.database&&(d.database(),a.fix.scroll&&b(f).unbind(a.nss.scroll).bind(a.nss.scroll,a.id,function(a,c){var h=d.settings[1],k;if(h.scroll.delay){for(;k=h.scroll.queue.shift();)clearTimeout(k);k=setTimeout(function(){for(;k=h.scroll.queue.shift();)clearTimeout(k);d.dbScroll(b(f).scrollLeft(),b(f).scrollTop())},h.scroll.delay);h.scroll.queue.push(k)}else d.dbScroll(b(f).scrollLeft(),b(f).scrollTop())}));a.link&&
b(this).undelegate(a.link,a.nss.click).delegate(a.link,a.nss.click,a.id,d.click=function(a){a.timeStamp=(new Date).getTime();var c=d.settings[1];if(!(!b(this).filter(c.filter).length||c.disable||a.isDefaultPrevented()||(c.location.href=d.canonicalizeURL(f.location.href),c.destination.href=d.canonicalizeURL(this.href),c.location.protocol!==c.destination.protocol||c.location.host!==c.destination.host||1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||!c.hashquery&&c.destination.hash&&c.location.href.replace(/#.*/,
"")===c.destination.href.replace(/#.*/,"")))){var l,p;l=c.destination.href;c.area=d.fire(c.areaback,null,[a,c.parameter,c.destination.href,c.location.href]);c.timeStamp=a.timeStamp;c.landing&&(c.landing=!1);if(!(c.cache.mix&&b[d.name].getCache(l)||!b(c.area).length||c.scope&&!d.scope(c)))return c.database&&d.dbScroll(b(f).scrollLeft(),b(f).scrollTop()),c.cache[a.type.toLowerCase()]&&(p=b[d.name].getCache(l)),d.drive(b,f,h,k,d,c,a,l,!0,p),a.preventDefault()}});a.form&&b(this).undelegate(a.form,a.nss.submit).delegate(a.form,
a.nss.submit,a.id,d.submit=function(a){a.timeStamp=(new Date).getTime();var c=d.settings[1];if(!(c.disable||a.isDefaultPrevented()||(c.location.href=d.canonicalizeURL(f.location.href),c.destination.href=d.canonicalizeURL(this.action),c.location.protocol!==c.destination.protocol||c.location.host!==c.destination.host||1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey))){var l,p;l=c.destination.href=d.canonicalizeURL(c.destination.href.replace(/[?#].*/,"")+("GET"===a.target.method.toUpperCase()?
"?"+b(a.target).serialize():""));c.area=d.fire(c.areaback,null,[a,c.parameter,c.destination.href,c.location.href]);c.timeStamp=a.timeStamp;c.landing&&(c.landing=!1);if(!(c.cache.mix&&b[d.name].getCache(l)||!b(c.area).length||c.scope&&!d.scope(c)))return c.database&&d.dbScroll(b(f).scrollLeft(),b(f).scrollTop()),c.cache[a.type.toLowerCase()]&&c.cache[a.target.method.toLowerCase()]&&(p=b[d.name].getCache(l)),d.drive(b,f,h,k,d,c,a,l,!0,p),a.preventDefault()}});b(f).unbind(a.nss.popstate).bind(a.nss.popstate,
a.id,d.popstate=function(a){a.timeStamp=(new Date).getTime();var c=d.settings[1];if(!c.disable&&!a.isDefaultPrevented()){c.destination.href=d.canonicalizeURL(f.location.href);if(c.location.href===c.destination.href)return a.preventDefault();var l,p;if(c.location.hash!==c.destination.hash&&c.location.pathname+c.location.search===c.destination.pathname+c.destination.search&&!c.hashquery)return a.preventDefault();l=c.destination.href;c.area=d.fire(c.areaback,null,[a,c.parameter,c.destination.href,c.location.href]);
c.timeStamp=a.timeStamp;if(c.landing){if(c.landing.href===l){c.landing=!1;return}c.landing=!1}if(b(c.area).length)return c.database&&c.fix.history&&d.dbTitle(l),c.cache[a.type.toLowerCase()]&&(p=b[d.name].getCache(l)),d.drive(b,f,h,k,d,c,a,l,!1,p),a.preventDefault()}});setTimeout(function(){function a(c){try{var d=c&&c('<html lang="en" class="html a b"><noscript><style></style></noscript><body><noscript>noscript</noscript></body></html>');return d&&b("html",d).is(".html[lang=en]")&&b("head>noscript",
d).html()&&"noscript"===b("body>noscript",d).text()}catch(f){}}d.createHTMLDocument=function(a){return f.DOMParser&&f.DOMParser.prototype&&(new f.DOMParser).parseFromString(a,"text/html")};a(d.createHTMLDocument)||(d.createHTMLDocument=function(a){if(h.implementation&&h.implementation.createHTMLDocument){for(var b=h.implementation.createHTMLDocument(""),d=(a.slice(0,1024).match(/.*<html ([^>]+)>/im)||[0,""])[1].match(/\w+\="[^"]*.|\w+\='[^']*.|\w+/gm)||[],f=-1,g;g=d[++f];)g=g.split("=",2),b.documentElement.setAttribute(g[0],
g[1].replace(/^["']|["']$/g,""));b.documentElement.innerHTML=a}return b},a(d.createHTMLDocument)||(d.createHTMLDocument=!1))},50)},drive:function(b,f,h,k,d,a,g,c,l,p){function w(a,b,d,f,g,e,h,k){a:{var p=e.speedcheck;p&&e.log.speed.time.push(e.speed.now()-e.log.speed.fire);p&&e.log.speed.name.push("loaded("+e.log.speed.time[e.log.speed.time.length-1]+")");var m=e.callbacks.update;if(!1!==g.fire(m.before,null,[h,e.parameter,u,v,q,k],e.callbacks.async)){if(e.cache.mix&&"popstate"!==h.type.toLowerCase()&&
(new Date).getTime()-h.timeStamp<=e.cache.mix)return"function"===typeof e.fallback?g.fire(e.fallback,null,[h,e.parameter,e.destination.href,e.location.href]):g.fallback(h);var n,w,t;try{e.xhr&&4>e.xhr.readyState&&e.xhr.abort();e.xhr=null;if(!k&&!~(q.getResponseHeader("Content-Type")||"").toLowerCase().search(e.contentType))throw Error("throw: content-type mismatch");k&&!1!==g.fire(m.cache.load.before,null,[h,e.parameter,k],e.callbacks.async)&&(q=k.XMLHttpRequest||q,u=q.responseText,v=k.textStatus||
v,w=k.css,t=k.script,g.fire(m.cache.load.after,null,[h,e.parameter,k],e.callbacks.async));var s,A,y,x,C,B,G;B=e.area.match(/[^,\(\[]+(?:(?:\(.*?\)|\[.*?\])[^,\(\[]*)*/g);A=(q.responseText||"").replace(/<noscript[^>]*>(?:.|[\n\r])*?<\/noscript>/gim,function(a){return a.replace(/<script(?:.|[\n\r])*?<\/script>/gim,"")});if(k&&k.data){x=k.data;y=a(g.createHTMLDocument&&x&&g.createHTMLDocument(x)||x);A=A.replace(/<title[^>]*?>([^<]*?)<\/title>/i,function(a){return g.find(x,/(<title[^>]*?>[^<]*?<\/title>)/i).shift()||
a});s=a(g.createHTMLDocument&&A&&g.createHTMLDocument(A)||A);for(var z=0,E,D,J;E=B[z++];){D=s.find(E).add(s.filter(E)).empty()[0];J=y.find(E).add(y.filter(E)).contents();for(var F=0;H=J[F++];)D.appendChild(H)}}else s=a(g.createHTMLDocument&&A&&g.createHTMLDocument(A)||A);switch(!0){case !!s.find("html")[0]:C=1;s.find("noscript").each(function(){this.children.length&&a(this).text(this.innerHTML)});break;case !!s.filter("title")[0]:C=0;break;default:C=!1}switch(C){case 1:n=s.find("title").text();break;
case 0:n=s.filter("title").text();break;case !1:n=a("<span/>").html(g.find(A,/<title[^>]*?>([^<]*?)<\/title>/i).shift()).text()}if(!a(e.area).length||!s.find(e.area).add(C?"":s.filter(e.area)).length)throw Error("throw: area length mismatch");a(b).trigger(e.gns+".unload");!1!==g.fire(m.url.before,null,[h,e.parameter,u,v,q],e.callbacks.async)&&(l&&c!==e.location.href&&b.history.pushState(g.fire(e.state,null,[h,e.parameter,e.destination.href,e.location.href]),b.opera||~b.navigator.userAgent.toLowerCase().indexOf("opera")?
n:d.title,c),e.location.href=c,l&&e.fix.location&&(a[g.name].off(),b.history.back(),b.history.forward(),a[g.name].on()),g.fire(m.url.after,null,[h,e.parameter,u,v,q],e.callbacks.async));!1!==g.fire(m.title.before,null,[h,e.parameter,u,v,q],e.callbacks.async)&&(d.title=n,e.database&&e.fix.history&&g.dbTitle(c,n),g.fire(m.title.after,null,[h,e.parameter,u,v,q],e.callbacks.async));e.database&&g.dbCurrent();if(!1!==g.fire(m.content.before,null,[h,e.parameter,u,v,q],e.callbacks.async)){a(e.area).children("."+
e.nss.class4html+"-check").remove();G=a("<div/>",{"class":e.nss.class4html+"-check",style:"background: none !important; display: block !important; visibility: hidden !important; position: absolute !important; top: 0 !important; left: 0 !important; z-index: -9999 !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; font-size: 12px !important; text-indent: 0 !important;"}).text(e.gns);for(var z=0,H;E=B[z++];)H=s.find(E).add(C?
"":s.filter(E)).clone().find("script").remove().end().contents(),a(E).html(H).append(G.clone());G=a(e.area).children("."+e.nss.class4html+"-check");a(d).trigger(e.gns+".DOMContentLoaded");g.fire(m.content.after,null,[h,e.parameter,u,v,q],e.callbacks.async)}p&&e.log.speed.time.push(e.speed.now()-e.log.speed.fire);p&&e.log.speed.name.push("content("+e.log.speed.time[e.log.speed.time.length-1]+")");var K=function(d){if(!1!==g.fire(m.scroll.before,null,[h,e.parameter],e.callbacks.async)){var c,f;switch(h.type.toLowerCase()){case "click":case "submit":c=
d&&"function"===typeof e.scrollLeft?g.fire(e.scrollLeft,null,[h,e.parameter,e.destination.href,e.location.href]):e.scrollLeft;c=0<=c?c:0;c=!1===c||null===c?a(b).scrollLeft():parseInt(Number(c),10);f=d&&"function"===typeof e.scrollTop?g.fire(e.scrollTop,null,[h,e.parameter,e.destination.href,e.location.href]):e.scrollTop;f=0<=f?f:0;f=!1===f||null===f?a(b).scrollTop():parseInt(Number(f),10);a(b).scrollTop()===f&&a(b).scrollLeft()===c||b.scrollTo(c,f);d&&e.database&&e.fix.scroll&&g.dbScroll(c,f);break;
case "popstate":d&&e.database&&e.fix.scroll&&g.dbScroll()}g.fire(m.scroll.after,null,[h,e.parameter],e.callbacks.async)}};k&&k.XMLHttpRequest||!e.cache.click&&!e.cache.submit&&!e.cache.popstate||"submit"===h.type.toLowerCase()&&!e.cache[h.target.method.toLowerCase()]||!1===g.fire(m.cache.save.before,null,[h,e.parameter,k],e.callbacks.async)||(a[g.name].setCache(c,x||null,v,q),k=a[g.name].getCache(c),g.fire(m.cache.save.after,null,[h,e.parameter,k],e.callbacks.async));var L=function(b){if(!1!==g.fire(m.rendering.before,
null,[h,e.parameter],e.callbacks.async)){var c=0;(function(){G.filter(function(){return this.clientWidth||this.clientHeight||a(this).is(":hidden")}).length===G.length||100<=c?M(b):G.length&&(c++,setTimeout(arguments.callee,e.interval))})()}},M=function(c){p&&e.log.speed.time.push(e.speed.now()-e.log.speed.fire);p&&e.log.speed.name.push("renderd("+e.log.speed.time[e.log.speed.time.length-1]+")");G.remove();e.scroll.record=!0;g.hashscroll("popstate"===h.type.toLowerCase())||K(!0);a(b).trigger(e.gns+
".load");g.fire(c);p&&console.log(e.log.speed.time);p&&console.log(e.log.speed.name);g.fire(m.rendering.after,null,[h,e.parameter],e.callbacks.async)};switch(C){case 1:case 0:s.find("noscript").remove();break;case !1:A=A.replace(/^(?:.|[\n\r])*<body[^>]*>.*[\n\r]*.*[\n\r]*/im,function(a){return a.replace(/\x3c!--\[(?:.|[\n\r])*?<!\[endif\]--\x3e/gim,"")}),A=A.replace(/<noscript(?:.|[\n\r])*?<\/noscript>/gim,"")}var I=function(d){if(e.load.script&&!1!==g.fire(m.script.before,null,[h,e.parameter,u,
v,q],e.callbacks.async)){var f,l=[];f=(k=a[g.name].getCache(c))&&!k.script;switch(t||C){case 1:case 0:t=s.find("script").add(C?"":s.filter("script")).clone().get();break;case !1:t=g.find(A,/(?:[^\'\"]|^\s*?)(<script[^>]*?>(?:.|[\n\r])*?<\/script>)(?:[^\'\"]|\s*?$)/gim)}t=a(t).not(e.load.reject);k&&k.script&&t&&t.length!==k.script.length&&(f=!0);f&&(k.script=[]);for(var n=0,r;r=t[n];n++)r="object"===typeof r?f?a(r.outerHTML)[0]:r:a(r)[0],r="function"===typeof e.load.rewrite?g.fire(e.load.rewrite,null,
[r.cloneNode()])||r:r,f&&(k.script[n]=r),!a(r).is(d)||!r.src&&!g.trim(r.innerHTML)||r.src in e.log.script||e.load.reject&&a(r).is(e.load.reject)||(e.load.reload&&a(r).is(e.load.reload)||(e.log.script[r.src]=!0),r&&l.push(r));for(n=0;r=l[n];n++)try{r.src?a.ajax(a.extend(!0,{},e.ajax,e.load.ajax,{url:r.src,async:!!r.async,global:!1})):"object"!==typeof r||r.type&&!~r.type.toLowerCase().indexOf("text/javascript")||b.eval.call(b,(r.text||r.textContent||r.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,
"/*$0*/"))}catch(w){break}!1!==g.fire(m.script.after,null,[h,e.parameter,u,v,q],e.callbacks.async)&&(p&&e.log.speed.time.push(e.speed.now()-e.log.speed.fire),p&&e.log.speed.name.push(("[src][defer]"===d?"defer":"script")+"("+e.log.speed.time[e.log.speed.time.length-1]+")"))}};if(!1!==g.fire(m.verify.before,null,[h,e.parameter],e.callbacks.async)){if(c===g.canonicalizeURL(b.location.href))e.retry=!0;else if(e.retry)e.retry=!1,g.drive(a,b,d,f,g,e,h,b.location.href,!1,e.cache[h.type.toLowerCase()]&&
a[g.name].getCache(g.canonicalizeURL(b.location.href)));else throw Error("throw: location mismatch");g.fire(m.verify.after,null,[h,e.parameter],e.callbacks.async)}(function(){if(e.load.css&&!1!==g.fire(m.css.before,null,[h,e.parameter,u,v,q],e.callbacks.async)){var b,d=[],f=a('link[rel~="stylesheet"], style');b=(k=a[g.name].getCache(c))&&!k.css;switch(w||C){case 1:case 0:w=s.find('link[rel~="stylesheet"], style').add(C?"":s.filter('link[rel~="stylesheet"], style')).clone().get();break;case !1:w=g.find(A,
/(<link[^>]*?rel=.[^"\']*?stylesheet[^>]*?>|<style[^>]*?>(?:.|[\n\r])*?<\/style>)/gim)}w=a(w).not(e.load.reject);k&&k.css&&w&&w.length!==k.css.length&&(b=!0);b&&(k.css=[]);for(var l=0,r;r=w[l];l++){r="object"===typeof r?b?a(r.outerHTML)[0]:r:a(r)[0];r="function"===typeof e.load.rewrite?g.fire(e.load.rewrite,null,[r.cloneNode()])||r:r;b&&(k.css[l]=r);for(var n=0,t;t=f[n];n++)if(!d.length&&g.trim(t.href||t.innerHTML||"")===g.trim(r.href||r.innerHTML||"")){f=f.not(t);r=null;break}else if(!n&&d.length)break;
r&&d.push(r)}f.not(e.load.reload).remove();a("head").append(d);!1!==g.fire(m.css.after,null,[h,e.parameter,u,v,q],e.callbacks.async)&&(p&&e.log.speed.time.push(e.speed.now()-e.log.speed.fire),p&&e.log.speed.name.push("css("+e.log.speed.time[e.log.speed.time.length-1]+")"))}})();a(b).one(e.gns+".rendering",function(b){b.preventDefault();b.stopImmediatePropagation();K(!1);a(d).trigger(e.gns+".ready");I(":not([defer]), :not([src])");e.load.sync?L(function(){I("[src][defer]")}):(L(),I("[src][defer]"))}).trigger(e.gns+
".rendering");if(!1===g.fire(m.success,null,[h,e.parameter,u,v,q],e.callbacks.async))break a;if(!1===g.fire(m.complete,null,[h,e.parameter,u,v,q],e.callbacks.async))break a;if(!1===g.fire(e.callback,null,[h,e.parameter,u,v,q],e.callbacks.async))break a}catch(N){k&&a[g.name].removeCache(c);if(!1===g.fire(m.error,null,[h,e.parameter,u,v,q],e.callbacks.async))break a;if(!1===g.fire(m.complete,null,[h,e.parameter,u,v,q],e.callbacks.async))break a;if(e.fallback)return"function"===typeof e.fallback?g.fire(e.fallback,
null,[h,e.parameter,e.destination.href,e.location.href]):g.fallback(h)}g.fire(m.after,null,[h,e.parameter,u,v,q],e.callbacks.async)}}}var t=a.speedcheck;t&&(a.log.speed.fire=a.timeStamp);t&&(a.log.speed.time=[]);t&&(a.log.speed.name=[]);t&&a.log.speed.time.push(0);t&&a.log.speed.name.push("pjax("+a.log.speed.time[a.log.speed.time.length-1]+")");a.scroll.record=!1;a.fix.reset&&/click|submit/.test(g.type.toLowerCase())&&f.scrollTo(b(f).scrollLeft(),0);if(!1!==d.fire(a.callbacks.before,null,[g,a.parameter],
a.callbacks.async)){b[d.name].off();if(p&&p.XMLHttpRequest)t&&a.log.speed.name.splice(0,1,"cache("+a.log.speed.time[a.log.speed.time.length-1]+")"),b.when?b.when(d.wait(d.fire(a.wait,null,[g,a.parameter,a.destination.href,a.location.href]))).done(function(){w(b,f,h,k,d,a,g,p)}):w(b,f,h,k,d,a,g,p);else if(a.xhr&&a.xhr.promise)t&&a.log.speed.time.splice(0,1,a.xhr.timeStamp-a.log.speed.fire),t&&a.log.speed.name.splice(0,1,"preload("+a.log.speed.time[a.log.speed.time.length-1]+")"),t&&a.log.speed.time.push(a.speed.now()-
a.log.speed.fire),t&&a.log.speed.name.push("continue("+a.log.speed.time[a.log.speed.time.length-1]+")"),t=a.wait&&isFinite(a.xhr.timeStamp)?Math.max(a.wait-(new Date).getTime()+a.xhr.timeStamp,0):0,b.when(a.xhr,d.wait(t)).done(function(){w(b,f,h,k,d,a,g,b[d.name].getCache(c))});else{var n,s,u,q,v,x;n={};switch(g.type.toLowerCase()){case "click":n.type="GET";break;case "submit":n.type=g.target.method.toUpperCase();"POST"===n.type&&(n.data=b(g.target).serializeArray());break;case "popstate":n.type=
"GET"}s=b.when?b.Deferred():null;b.extend(!0,n,a.ajax,{xhr:a.callbacks.ajax.xhr?function(){q=d.fire(a.callbacks.ajax.xhr,this,[g,a.parameter],a.callbacks.async);return q="object"===typeof q&&q||b.ajaxSettings.xhr()}:k,beforeSend:function(b,c){q=b;a.xhr&&4>a.xhr.readyState&&a.xhr.abort();a.xhr=q;q.setRequestHeader(a.nss.requestHeader,"true");q.setRequestHeader(a.nss.requestHeader+"-Area",a.area);q.setRequestHeader(a.nss.requestHeader+"-CSS",a.load.css);q.setRequestHeader(a.nss.requestHeader+"-Script",
a.load.script);d.fire(a.callbacks.ajax.beforeSend,this,[g,a.parameter,q,c],a.callbacks.async)},dataFilter:a.callbacks.ajax.dataFilter?function(b,c){u=b;return d.fire(a.callbacks.ajax.dataFilter,this,[g,a.parameter,u,c],a.callbacks.async)||u}:k,success:function(b,c,f){u=b;v=c;q=f;d.fire(a.callbacks.ajax.success,this,[g,a.parameter,u,v,q],a.callbacks.async)},error:function(b,c,f){q=b;v=c;x=f;d.fire(a.callbacks.ajax.error,this,[g,a.parameter,q,v,x],a.callbacks.async)},complete:function(c,l){q=c;v=l;
d.fire(a.callbacks.ajax.complete,this,[g,a.parameter,q,v],a.callbacks.async);if(x){if(s&&s.reject(),a.fallback&&"abort"!==v)return"function"===typeof a.fallback?d.fire(a.fallback,null,[g,a.parameter,a.destination.href,a.location.href]):d.fallback(g)}else s&&s.resolve()||w(b,f,h,k,d,a,g,p)}});var y=a.server.query;y&&(y=y.split("="),y=encodeURIComponent(y[0])+(0<y.length?"="+encodeURIComponent(y[1]):""));n.url=c.replace(/([^#]+)(#[^\s]*)?$/,"$1"+(y?(c.match(/\?/)?"&":"?")+y:"")+"$2");t&&a.log.speed.time.push(a.speed.now()-
a.log.speed.fire);t&&a.log.speed.name.push("request("+a.log.speed.time[a.log.speed.time.length-1]+")");b.when&&b.when(s.promise(),d.wait(d.fire(a.wait,null,[g,a.parameter,a.destination.href,a.location.href]))).done(function(){w(b,f,h,k,d,a,g,p)});b.ajax(n)}b[d.name].on();d.fire(a.callbacks.after,null,[g,a.parameter],a.callbacks.async)}},canonicalizeURL:function(b){var f;f=k.trim(b);f=f.replace(/[<>"{}|\\^\[\]`\s].*/,"");f=/^https?:/i.test(f)?f:l("<a/>",{href:f})[0].href;f=encodeURI(decodeURI(f));
return f=f.replace(/(?:%\w{2})+/g,function(f){return b.match(f.toLowerCase())||f})},trim:function(b){if(String.prototype.trim)b=String(b).trim();else if(b=String(b).replace(/^\s+/,""))for(var f=b.length;--f;)if(/\S/.test(b.charAt(f))){b=b.substring(0,f+1);break}return b},fire:function(b,f,h,k){return"function"===typeof b?k?setTimeout(function(){b.apply(f,h)},0):b.apply(f,h):b},hashscroll:function(b){var f=k.settings[1].destination.hash.slice(1);return!(b||!f)&&l("#"+(f?f:", [name~="+f+"]")).first().each(function(){isFinite(l(this).offset().top)&&
n.scrollTo(l(n).scrollLeft(),parseInt(Number(l(this).offset().top),10))}).length},wait:function(b){var f=l.Deferred();if(!b)return f.resolve();setTimeout(function(){f.resolve()},b);return f.promise()},fallback:function(b){switch(b.type.toLowerCase()){case "click":n.location.href=b.currentTarget.href;break;case "submit":b.target.submit();break;case "popstate":n.location.reload()}},find:function(b,f){var h=[];b.replace(f,function(b,d){h.push(d)});return h},scope:function(b,f,h,m){var d,a,g,c,n,p,w,
t,B,s,u,q,v;d=[].slice.call(arguments);d.splice(1,1,f||b.location.href);d.splice(2,1,h||b.destination.href);a=b.scope;f=(f||b.location.href).replace(/.+?\w(\/[^#?]*).*/,"$1");h=(h||b.destination.href).replace(/.+?\w(\/[^#?]*).*/,"$1");g=f.replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");n=(m||f).replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");if(m){if(!~m.indexOf("*"))return z;c=[];for(var x=0,y=n.length;x<y;x++)"*"===n[x]&&c.push(g[x])}for(x=n.length+1;x--;)if(B=s=u=q=z,g=n.slice(0,x).join("/").replace(/\/([?#])/g,
"$1"),(g="/"+g+("/"===(m||f).charAt(g.length+1)?"/":""))&&g in a){if(!a[g]||!a[g].length)return!1;for(var D=0;(p=a[g][D])&&!1!==u&&!1!==q;D++)if("rewrite"!==p||"function"!==typeof a.rewrite||m)if("inherit"===p)s=!0;else if("string"===typeof p){p=(w="^"===p.charAt(0))?p.slice(1):p;p=(t="*"===p.charAt(0))?p.slice(1):p;if(m&&~p.indexOf("/*/"))for(var F=0,y=c.length;F<y;F++)p=p.replace("/*/","/"+c[F]+"/");if(!(!w&&u||(t?f.search(p):f.indexOf(p)))){if(w)return!1;u=!0}if(!(!w&&q||(t?h.search(p):h.indexOf(p)))){if(w)return!1;
q=!0}}else"object"===typeof p&&(v=p);else if(d.push(k.fire(a.rewrite,null,[h])),B=arguments.callee.apply(this,d)){u=q=!0;break}else if(!1===B)return!1;if(u&&q)return l.extend(!0,{},b,("object"===typeof B?B:v)||{});if(!s)break}},database:function(b){var f=k.settings[1],h,m,d,a,g,c;h=f.gns;m=1;d=Math.floor((new Date).getTime()/864E5);a=k.IDBFactory;g=k.IDBDatabase;b=b||0;f.database=!1;if(!a||!h||5<b)return!1;try{var z=function(c){k.IDBDatabase=null;g&&g.close&&g.close();a.deleteDatabase(h);c?setTimeout(function(){k.database(++b)},
c):k.database(++b)};m=parseInt(d-d%7+m,10);g=a.open(h);g.onblocked=function(){};g.onupgradeneeded=function(){var a=this.result;try{for(var b=a.objectStoreNames?a.objectStoreNames.length:0;b--;)a.deleteObjectStore(a.objectStoreNames[b]);a.createObjectStore(f.gns,{keyPath:"id",autoIncrement:!1}).createIndex("date","date",{unique:!1})}catch(c){}};g.onsuccess=function(){try{g=this.result,k.IDBDatabase=g,(c=k.dbStore())?c.get("_version").onsuccess=function(){this.result&&m!==this.result.title?z():(k.dbVersion(m),
k.dbCurrent(),k.dbTitle(f.location.href,D.title),k.dbScroll(l(n).scrollLeft(),l(n).scrollTop()),f.database=!0)}:z()}catch(a){z(1E3)}};g.onerror=function(a){z(1E3)}}catch(p){z(1E3)}},dbStore:function(){for(var b=k.settings[1],f=k.IDBDatabase,h=f&&f.objectStoreNames?f.objectStoreNames.length:0;h--;)if(b.gns===f.objectStoreNames[h])return f&&f.transaction&&f.transaction(b.gns,"readwrite").objectStore(b.gns);return!1},dbCurrent:function(){var b=k.settings[1],f=k.dbStore();if(f){var h;h=k.canonicalizeURL(n.location.href);
h=b.hashquery?h:h.replace(/#.*/,"");f.put({id:"_current",title:h})}},dbVersion:function(b){var f=k.dbStore();f&&f.put({id:"_version",title:b})},dbTitle:function(b,f){var h=k.settings[1],m=k.dbStore();m&&(b=h.hashquery?b:b.replace(/#.*/,""),f?m.get(b).onsuccess=function(){m.put(l.extend(!0,{},this.result||{},{id:b,title:f,date:(new Date).getTime()}));k.dbClean()}:m.get(b).onsuccess=function(){this.result&&this.result.title&&(D.title=this.result.title)})},dbScroll:function(b,f){var h=k.settings[1],
m=k.dbStore(),d=h.location.href,a=arguments.length;h.scroll.record&&m&&(d=h.hashquery?d:d.replace(/#.*/,""),m.get("_current").onsuccess=function(){this.result&&this.result.title&&d===this.result.title&&(a?m.get(d).onsuccess=function(){m.put(l.extend(!0,{},this.result||{},{scrollX:parseInt(Number(b),10),scrollY:parseInt(Number(f),10)}))}:m.get(d).onsuccess=function(){this.result&&isFinite(this.result.scrollX)&&isFinite(this.result.scrollY)&&n.scrollTo(parseInt(Number(this.result.scrollX),10),parseInt(Number(this.result.scrollY),
10))})})},dbClean:function(){var b=k.dbStore();b.count().onsuccess=function(){1E3<this.result&&(b.index("date").openCursor(k.IDBKeyRange.upperBound((new Date).getTime()-2592E5)).onsuccess=function(){var f=this.result;f?(f["delete"](f.value.id),f["continue"]()):b.count().onsuccess=function(){1E3<this.result&&b.clear()}})}}};(function(b,f,h,k,d){b.fn[d.name]=b[d.name]=function(){return F.apply(this,[b,f,h,k,d].concat([].slice.call(arguments)))};d.setProperties.call(b[d.name])}).apply(this,[].slice.call(arguments).concat([k]))})(jQuery,
window,document,void 0);
