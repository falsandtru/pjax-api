/*! Function Manager v0.5.0 | (c) 2014, falsandtru | MIT Licence */
(function(h,d,t){function k(a){a=a.toString();a=a.match(/^function[^(]*\([^)]*\)[^{]*|{(?:.|[\n\r])*}$/gm);a[0]=a[0].replace(/^function[^(]*\(|\).*$/gm,"");a[1]=a[1].replace(/^{|}$/g,"");a.splice.apply({},[0,1].concat(a[0]&&a[0].match(/\w+/g)));return a}function r(){try{var a={};Object.defineProperty(a,"test",{get:Function(),set:Function()});this.type="ecma";return}catch(h){}try{a={};a.__defineGetter__("test",Function());a.__defineSetter__("test",Function());this.type="old";return}catch(k){}try{a=
d.createElement("FM_ACCESSOR");Object.defineProperty(a,"test",Function());Object.defineProperty(a,"test",Function());this.accessor=d.createElement("FM_ACCESSOR");this.type="element";return}catch(e){}this.holder=d.createElement("FM_HOLDER");this.accessor=d.createElement("FM_ACCESSOR");d.getElementsByTagName("head")[0].appendChild(this.holder);this.type="dom"}h.FuncManager=function(a,d){function s(a,b,d){return eval(a).call(this)}function e(a,d){a=a||"";d=d||{};var h=this;m[a]&&g.accessor&&b.detachEvent("onpropertychange",
m[a]);var c=new function(){function a(){var b,n,p;b=[].slice.call(arguments);p=d;c.each.call(this,function(a,c){n=c.apply(this,b.concat(a?p.chain?[n]:[]:p.params))});return n}var c=this,f=[],a=d.ctor?s.call(h,"(1&&function(){"+k(d.ctor).pop()+";\n"+k(function(){return a}).pop().replace("exec",(new Function(k(a).pop())).toString().replace("anonymous","")).replace(/([\w\[\]]+)\.apply/,'eval("(1&&"+$1.toString()+")").apply')+";\n})",d,c):a;this.get=function(){return a};this.set=function(){return c.push.apply(c,
[].slice.call(arguments))};this.acc=b;this.exec=function(){return c.get().apply(this,[].slice.call(arguments))};this.each=function(a){for(var c,b=0;c=f[b];b++)switch(c=a.call(this,b,c),typeof c){case "function":f[b]=c;break;default:switch(c){case !1:return}}};this.replace=function(a,c){for(var b,d=0;b=f[d];d++)if(a===b||a.toString()===b.toString())"function"===typeof c?f.splice(d,1,c):f.splice(d,1)};this.clear=function(){f=[]};this.release=function(){g.holder&&g.holder.removeChild(b)};this.push=function(){var a;
a=[].slice.call(arguments);for(var b=0,e;e=a[b];b++)"function"!==typeof e&&a.splice(b--,1);d.unique&&c.each(function(b,d){for(var e=0,f;f=a[e];e++)d!==f&&(d=d.toString())!==f.toString()||d===c.get().toString()||d===c.exec.toString()||a.splice(e--,1)});return[].push.apply(f,a)};this.pop=function(){return f.pop()};this.unshift=function(a){return[].unshift.apply(f,[].slice.call(arguments))};this.shift=function(){return f.shift()}};b[a]=null;switch(g.type){case "ecma":Object.defineProperty(b,a,{get:c.get,
set:c.set});break;case "old":b.__defineGetter__(a,c.get);b.__defineSetter__(a,c.set);break;case "element":Object.defineProperty(b,a,{get:c.get,set:c.set});break;default:g.holder.appendChild(b);var q=function(d){d.propertyName===a&&(c.acc.detachEvent("onpropertychange",arguments.callee),c.set(b[a]),c.acc[a]=c.exec,c.acc.attachEvent("onpropertychange",arguments.callee))};m[a]=q;b[a]=c.exec;b.attachEvent("onpropertychange",q)}e[a]={};for(var l in c)b[a][l]=c[l],e[a][l]=c[l];return b}switch(this){case h:case h:return FuncManager.call({},
a,d)}switch(typeof a){case "string":a=a.split(/[\s,]{1,}/)}var g=new r,b=g.accessor?g.accessor.cloneNode():{},m={};a instanceof Array&&function(){for(var b=0,g=a.length;b<g;b++)e.call(this,a[b],d)}();return{accessor:b,manager:e,context:this,arguments:[b,e],contextArguments:[this,[b,e]]}}})(window,window.document,void 0);

/*! jquery-preload v0.8.1 | (c) 2014, falsandtru | MIT Licence */
!new function(window,document,undefined,$){"use strict";var MODULE;!function(a){a.NAME="preload",a.NAMESPACE=jQuery,function(a){a[a.wait=-1]="wait",a[a.ready=0]="ready",a[a.lock=1]="lock",a[a.seal=2]="seal"}(a.State||(a.State={}));a.State;a.GEN_UUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16).toUpperCase()})}}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b,c,d=function(){function a(a,d){b=d,c=a}return a.prototype.enable=function(){return b.state_=0,this},a.prototype.disable=function(){return b.state_=1,this},a}();a.ControllerFunction=d}(b=a.CONTROLLER||(a.CONTROLLER={}))}(MODULE||(MODULE={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},MODULE;!function(a){var b;!function(a){var b=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.ControllerFunction);a.ControllerMethod=b}(b=a.CONTROLLER||(a.CONTROLLER={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c,d,e=function(){function e(e){this.state_=-1,this.HANDLERS={},c=e,d=this,this.UUID=a.GEN_UUID(),a.NAMESPACE[a.NAME]=a.NAMESPACE&&a.NAMESPACE==a.NAMESPACE.window?this.EXEC:a.NAMESPACE.prototype[a.NAME]=this.EXEC;var f=new b.ControllerFunction(d,c);this.REGISTER_FUNCTIONS(a.NAMESPACE[a.NAME],f),this.UPDATE_PROPERTIES(a.NAMESPACE[a.NAME],f),this.OBSERVE(),this.state_=0}return e.prototype.EXTEND=function(e){if(e===a.NAMESPACE||a.NAMESPACE&&a.NAMESPACE==a.NAMESPACE.window){var f=new b.ControllerFunction(d,c);e=a.NAMESPACE[a.NAME]}else var f=new b.ControllerMethod(d,c);return e instanceof a.NAMESPACE&&(e instanceof jQuery&&(e=e.add()),this.REGISTER_FUNCTIONS(e,f)),this.UPDATE_PROPERTIES(e,f),e},e.prototype.EXEC=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var e=d.EXTEND(this);return a=[e].concat(a),a=d.exec_.apply(d,a),a=a instanceof Array?a:[a],c.MAIN.apply(c,a)},e.prototype.exec_=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return[a].concat(b)},e.prototype.REGISTER_FUNCTIONS=function(a,c){{var d;b.Template.PROPERTIES}for(d in c)a[d]=c[d];return a},e.prototype.UPDATE_PROPERTIES=function(a,c){var d,e,f,g=b.Template.PROPERTIES;for(d=0,e=g.length;e>d;d++)f=g[d],c[f]&&(a[f]=c[f].call(a));return a},e.prototype.OBSERVE=function(){},e.prototype.RELEASE=function(){},e.EVENTS={},e.FUNCTIONS={},e.METHODS={},e.PROPERTIES=[],e.TRIGGERS={},e}();b.Template=e}(b=a.CONTROLLER||(a.CONTROLLER={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b=function(a){function b(b){a.call(this,b),this.model_=b,this.HANDLERS={}}return __extends(b,a),b.prototype.PRELOAD=function(a){this.model_.PRELOAD(a)},b.prototype.CLICK=function(a){this.model_.CLICK(a)},b.prototype.MOUSEMOVE=function(a){this.model_.MOUSEMOVE(a)},b.prototype.MOUSEOVER=function(a){this.model_.MOUSEOVER(a)},b.prototype.MOUSEOUT=function(a){this.model_.MOUSEOUT(a)},b.prototype.OBSERVE=function(){},b.EVENTS={},b.PROPERTIES=[],b.TRIGGERS={},b}(a.Template);a.Main=b}(b=a.CONTROLLER||(a.CONTROLLER={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c=function(){function b(){this.NAME=a.NAME,this.NAMESPACE=a.NAMESPACE,this.state_=-1,this.stock=function c(d,e,f){if(this instanceof c||this.constructor.toString()===c.toString())switch(typeof d){case"object":case"function":return this.uuid=a.GEN_UUID(),c[this.uuid]=this,jQuery.extend.apply(jQuery,[!0,this].concat([].slice.call(arguments)).concat({uuid:this.uuid}));case"string":return delete c[d]}else if("object"==typeof d){var g,h=d;for(g in h)b.store(g,h[g])}else switch(arguments.length){case 0:return new this.stock;case 1:return c[d]||b.store(d);case 2:return b.store(d,e);case 3:return b.store(d,e,f)}},this.UUID=a.GEN_UUID()}return b.prototype.MAIN=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return this.main_.apply(this,[a].concat(b))},b.prototype.main_=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return this.state_=0,a},b.store=function(a,c){switch(arguments.length){case 0:break;case 1:return b.store[a];case 2:return b.store[a]=c;case 3:return b.store[a]=jQuery.extend(!0,b.store[a],c)}},b}();b.Template=c}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b=function(){function a(){}return a.trim=function(a){if(a="string"==typeof a?a:String(0===a&&a.toString()||""),a.trim)a=a.trim();else if(a=a.replace(/^[\s\uFEFF\xA0]+/,"")){var b=/[\s\uFEFF\xA0]/,c=a.length,d=c%8;a:{for(;d--;)if(!b.test(a.charAt(--c)))break a;for(;c;){if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a}}a=a.substring(0,c+1)}return a},a.repeat=function(a,b){switch(a instanceof Array&&"array"||typeof a){case"string":var c=a;return Array(b+1).join(c);case"array":var d=a.length;if(300>b){var e=Array(b);this.duff(-b,function(b){return e[b]=a[b%d]})}else{for(var e=a.slice();2*e.length<=b;)e=e.concat(e);e=e.concat(e.slice(0,b-e.length))}return e}},a.fire=function(a,b,c,d){return void 0===b&&(b=window),void 0===c&&(c=[]),"function"==typeof a?d?setTimeout(function(){a.apply(b||window,c)},0):a.apply(b||window,c):a},a.duff=function(a,b){if(0>a){for(var c=-a,d=c%8;d--;)b(--c);for(;c;)b(--c),b(--c),b(--c),b(--c),b(--c),b(--c),b(--c),b(--c)}else{for(var e=a,c=0,d=e%8,f=e/8^0;d--;)b(c++);for(;f--;)b(c++),b(c++),b(c++),b(c++),b(c++),b(c++),b(c++),b(c++)}},a.duffEx=function(a,b){if(0>a){var c=-a,d=c%8;a:{for(;d--;)if(!1===b(--c))break a;for(;c;){if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a}}}else{var e=a,c=0,d=e%8,f=e/8^0;a:{for(;d--;)if(!1===b(c++))break a;for(;f--;){if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a}}}},a.normalizeUrl=function(a,b){void 0===b&&(b=!0);var c;return c=this.trim(a),c=/^([^:/?#]+):\/\/[^/?#.]+\.[^/?#]+/i.test(c)?c:function(a,b){return b.href=a,b.href}(c,document.createElement("a")),c=encodeURI(decodeURI(c)),c=c.replace(/["`^|\\<>{}\[\]\s].*/,""),c=b?this.justifyPercentEncodingUrlCase_(a,c):c},a.canonicalizeUrl=function(a){function b(a){return a.toUpperCase()}var c=this.normalizeUrl(a,!1);return c=c.replace(/(?:%\w{2})+/g,b)},a.compareUrl=function(a,b,c){return c&&(a=this.canonicalizeUrl(a),b=this.canonicalizeUrl(b)),a===this.justifyPercentEncodingUrlCase_(a,b)},a.justifyPercentEncodingUrlCase_=function(a,b){function c(b){var c=~a.indexOf(b.toUpperCase())||~a.indexOf(b.toLowerCase());return c?a.substr(~c,b.length):b}return a===b?b:b.replace(/(?:%\w{2})+/g,c)},a}();a.Utility=b}(b=a.LIBRARY||(a.LIBRARY={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c,d=function(){function b(b,d,e){for(var f=[],g=3;g<arguments.length;g++)f[g-3]=arguments[g];this.model_=b,this.controller_=d,this.state_=-1,this.queue_=[],this.HANDLERS={},c=d,this.UUID=a.GEN_UUID(),this.CONTEXT=e,this.OBSERVE.apply(this,f||[]),this.state_=0}return b.prototype.OBSERVE=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b]},b.prototype.RELEASE=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b]},b.prototype.BIND=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return this.UNBIND(),this},b.prototype.UNBIND=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return this},b.EVENTS={},b.TRIGGERS={},b}();b.Template=d}(b=a.VIEW||(a.VIEW={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c,d=function(b){function d(a,d,e,f){b.call(this,a,d,e,f),this.model_=a,this.controller_=d,c=d}return __extends(d,b),d.prototype.OBSERVE=function(a){var b=this.model_.stock(a);return this.CONTEXT.bind(b.nss.event,a,this.PRELOAD),this},d.prototype.RELEASE=function(a){var b=this.model_.stock(a);return this.CONTEXT.unbind(b.nss.event),this},d.prototype.BIND=function(a,b){var c=this.model_.stock(a);return this.UNBIND(a,b),b&&this.CONTEXT.find(b.currentTarget).add(this.CONTEXT.filter(b.currentTarget)).find(c.link).filter(c.filter).bind(c.nss.click,a,this.CLICK).bind(c.nss.mouseover,a,this.MOUSEOVER).bind(c.nss.mousemove,a,this.MOUSEMOVE).bind(c.nss.mouseout,a,this.MOUSEOUT),this},d.prototype.UNBIND=function(a,b){var c=this.model_.stock(a);return b&&this.CONTEXT.find(b.currentTarget).add(this.CONTEXT.filter(b.currentTarget)).find(c.link).filter(c.filter).unbind(c.nss.click).unbind(c.nss.mouseover).unbind(c.nss.mousemove).unbind(c.nss.mouseout),this},d.prototype.RESET=function(a){return this.CONTEXT.trigger(a.nss.event),this},d.prototype.PRELOAD=function(a){c.PRELOAD(a)},d.prototype.CLICK=function(a){c.CLICK(a)},d.prototype.MOUSEMOVE=function(a){c.MOUSEMOVE(a)},d.prototype.MOUSEOVER=function(a){c.MOUSEOVER(a)},d.prototype.MOUSEOUT=function(a){c.MOUSEOUT(a)},d.EVENTS={BIND:a.NAME},d.TRIGGERS={},d}(b.Template);b.Main=d}(b=a.VIEW||(a.VIEW={}))}(MODULE||(MODULE={}));var MODULE;!function(MODULE){var MODEL;!function(MODEL){var Util=MODULE.LIBRARY.Utility,Main=function(_super){function Main(){_super.apply(this,arguments),this.controller_=new MODULE.CONTROLLER.Main(this),this.loaded_={}}return __extends(Main,_super),Main.prototype.main_=function(a,b){var c,d=this;switch(c=a instanceof MODULE.NAMESPACE?"m:":"f:",c+=b?{}.toString.call(b).split(" ").pop().slice(0,-1).toLowerCase():b,c.toLowerCase()){case"f:number":case"f:0":case"f:string":b={link:b};case"f:":case"m:object":case"m:null":case"m:function":case"m:undefined":}a=a instanceof jQuery?a:jQuery(document);var e=new this.stock(this.configure(b));this.stock({setting:e,queue:[]});var f=e.encode?Util.normalizeUrl(window.location.href):window.location.href;return f=f.replace(/#.*/,""),this.loaded_[f]=!0,a.uuid=e.uuid,jQuery(function(){e.view.push(new MODULE.VIEW.Main(d,d.controller_,a,e.uuid)),e.view[0].CONTEXT.trigger(e.nss.event),d.state_=~d.state_?d.state_:0}),this.cooldown(e),a},Main.prototype.configure=function(a){var b=jQuery.extend(!0,{},a),c={gns:MODULE.NAME,ns:null,link:"a:not([target])",filter:function(){return/^https?:/.test(this.href)&&/(\/[^.]*|\.html?|\.php)$/.test("/"+this.pathname)},lock:1e3,forward:null,check:null,balance:{host:null,ajax:{crossDomain:!0,beforeSend:null}},interval:1e3,limit:2,cooldown:1e4,skip:50,query:"",encode:!1,ajax:{dataType:"text",async:!0,timeout:1500}},d={view:[],target:null,volume:0,points:[],touch:!1,xhr:null,timeStamp:0,option:a},e=function(){var a=[b.gns||MODULE.NAME].concat(b.ns&&String(b.ns).split(".")||[]);return{nss:{name:b.ns||"",array:a,event:a.join("."),data:a.join("-"),class4html:a.join("-"),click:["click"].concat(a.join(":")).join("."),mousemove:["mousemove"].concat(a.join(":")).join("."),mouseover:["mouseover"].concat(a.join(":")).join("."),mouseout:["mouseout"].concat(a.join(":")).join("."),touchstart:["touchstart"].concat(a.join(":")).join("."),touchmove:["touchmove"].concat(a.join(":")).join("."),touchend:["touchend"].concat(a.join(":")).join(".")},ajax:jQuery.extend(!0,{},jQuery.ajaxSettings,b.ajax)}};return b=jQuery.extend(!0,{},c,b,d),b=jQuery.extend(!0,{},b,e())},Main.prototype.cooldown=function(a){!function(a,b){setTimeout(function c(){b.volume-=Number(!!b.volume),setTimeout(c,a)},a,b)}(a.cooldown,a)},Main.prototype.PRELOAD=function(a){var b=this.stock(a.data);b.volume=0,b.timeStamp=0,b.view[0].BIND(a.data,a)},Main.prototype.CLICK=function(a){var b=this.stock(a.data),c=a.currentTarget;if(0===this.state_)switch(a.timeStamp=(new Date).getTime(),b.encode&&("href"in c?c.href=this.getURL_(b,c):c.src=this.getURL_(b,c)),!a.isDefaultPrevented()&&jQuery.data(a.currentTarget,b.nss.data)){case"preload":case"lock":if(b.forward){var d=(this.getURL_(b,a.currentTarget),b.xhr.host);delete b.xhr.host,!1===Util.fire(b.forward,null,[a,b.xhr,d,b.timeStamp])?"lock"===jQuery.data(a.currentTarget,b.nss.data)?a.preventDefault():(this.click_(b,a),jQuery.removeData(a.currentTarget,b.nss.data)):(b.xhr=null,a.preventDefault(),jQuery.removeData(a.currentTarget,b.nss.data))}else"lock"===jQuery.data(a.currentTarget,b.nss.data)?a.preventDefault():(this.click_(b,a),jQuery.removeData(a.currentTarget,b.nss.data));break;default:b.xhr&&b.xhr.readyState<4&&b.xhr.abort()}},Main.prototype.MOUSEMOVE=function(a){var b=this.stock(a.data);0===this.state_&&(a.timeStamp=(new Date).getTime(),(!b.points.length||30<a.timeStamp-b.points[0].timeStamp)&&(b.points.unshift(a),b.points=b.points.slice(0,3),b.points.length>=3&&this.check_(a,b)))},Main.prototype.MOUSEOVER=function(a){var b=this.stock(a.data);b.target=a.currentTarget},Main.prototype.MOUSEOUT=function(a){var b=this.stock(a.data);b.target=null},Main.prototype.speed=function(a){if(a.length<3)return!1;var b,c,d,e;c=a[0].timeStamp-a[1].timeStamp,b=parseInt(String(Math.pow(a[0].pageX-a[1].pageX,2)+Math.pow(a[0].pageY-a[1].pageY,2)/(c||1)),10),e=a[1].timeStamp-a[2].timeStamp,d=parseInt(String(Math.pow(a[1].pageX-a[2].pageX,2)+Math.pow(a[1].pageY-a[2].pageY,2)/(e||1)),10);var f=1e3>c&&1e3>e?[b-d,b]:[];switch(!0){case!f.length:break;case-50>f[0]&&200>f[1]:case-50<f[0]&&50>f[0]&&-50<f[1]&&50>f[1]:return!0}return!1},Main.prototype.check_=function(a,b){var c=this;switch(!0){case b.volume>=b.limit:case b.points.length<3:case b.points[2].pageX===a.pageX:case b.interval?(new Date).getTime()-b.timeStamp<b.interval:!1:return;default:var d=function(){var d=c.getURL_(b,a.currentTarget);switch(d=d.replace(/#.*/,""),!0){case b.target!==a.currentTarget:case b.check?!!Util.fire(b.check,a.currentTarget,[d]):c.loaded_[d]:case!b.ajax.crossDomain&&(b.target.protocol!==window.location.protocol||b.target.host!==window.location.host):return}c.drive_(a,b)};this.speed(b.points)&&d()}},Main.prototype.drive_=function(a,b){var c=this;b.xhr&&b.xhr.readyState<4&&b.xhr.abort(),this.loaded_[this.getURL_(b,a.currentTarget).replace(/#.*/,"")]=!0,++b.volume,b.timeStamp=a.timeStamp,jQuery.data(a.currentTarget,b.nss.data,"preload"),b.lock&&(jQuery.data(a.currentTarget,b.nss.data,"lock"),jQuery(a.currentTarget).one(b.nss.click,function(a){if(jQuery.data(a.currentTarget,b.nss.data)){var d=Math.max(b.lock-(new Date).getTime()+a.data,0);jQuery.data(a.currentTarget,b.nss.data,"click"),d&&(setTimeout(function(){"click"===jQuery.data(a.currentTarget,b.nss.data)&&c.click_(b,a),jQuery.removeData(a.currentTarget,b.nss.data)},d),a.preventDefault())}})),this.preload_(a)},Main.prototype.preload_=function(event){var setting=this.stock(event.data),host=setting.balance.host&&setting.balance.host(),that=this,ajax=jQuery.extend(!0,{},setting.ajax,{beforeSend:function(a,b){a.setRequestHeader("X-Preload","true"),Util.fire(setting.ajax.beforeSend,this,[a,b])},success:function(){time=(new Date).getTime()-time,Util.fire(setting.ajax.success,this,arguments),that.loaded_[url]=!0,(304===arguments[2].status||time<=setting.skip)&&(setting.volume-=Number(!!setting.volume),setting.timeStamp=0),"click"===jQuery.data(event.currentTarget,setting.nss.data)&&that.click_(setting,event),jQuery.removeData(event.currentTarget,setting.nss.data)},error:function(){Util.fire(setting.ajax.error,this,arguments),setting.volume-=Number(!!setting.volume),setting.timeStamp=0,jQuery.removeData(event.currentTarget,setting.nss.data)},complete:function(){Util.fire(setting.ajax.complete,this,arguments)}},host&&setting.balance.ajax),query=setting.query;switch(query&&typeof query){case"string":query=eval("({"+query.match(/[^?=&]+=[^&]*/g).join("&").replace(/"/g,'\\"').replace(/([^?=&]+)=([^&]*)/g,'"$1": "$2"').replace(/&/g,",")+"})");case"object":query=jQuery.param(query);break;default:query=""}var url=this.getURL_(setting,event.currentTarget);url=host?url.replace("//[^/]+","//"+host):url,url=query?url.replace(/([^\?#]+)\??([^#]*)?(#.+)?/,"$1$2&"+query+"$3").replace(/\?&/,"?"):url,ajax.url=url;var time=(new Date).getTime();setting.xhr=jQuery.ajax(ajax),setting.xhr.host=host},Main.prototype.click_=function(a,b){var c=this,d=b.currentTarget;a.xhr&&a.xhr.readyState<4&&a.xhr.abort(),jQuery(b.currentTarget).removeData(a.nss.data),jQuery(document).find(b.currentTarget).length&&(jQuery(document).unbind(a.nss.click).one(a.nss.click,function(b){b.isDefaultPrevented()||(window.location.href=a.encode?Util.normalizeUrl(d.href):d.href,a.encode&&(window.location.href=c.getURL_(a,b.currentTarget)))}),jQuery(b.currentTarget).click()),b.preventDefault()},Main.prototype.getURL_=function(a,b){var c;switch(b.tagName.toLowerCase()){case"a":case"link":c=b.href;break;case"script":case"img":case"iframe":c=b.src}return a.encode?Util.normalizeUrl(c):c},Main}(MODEL.Template);MODEL.Main=Main}(MODEL=MODULE.MODEL||(MODULE.MODEL={}))}(MODULE||(MODULE={})),new MODULE.MODEL.Main}(window,window.document,void 0,jQuery);

/*! jquery-pjax v2.42.0 | (c) 2012, falsandtru | MIT Licence */
!new function(window,document,undefined,$){"use strict";var MODULE;!function(a){var b;!function(a){a.NAME="pjax",a.NAMESPACE=jQuery}(b=a.DEF||(a.DEF={}))}(MODULE||(MODULE={}));var MODULE;!function(a){!function(a){a[a.blank=0]="blank",a[a.initiate=1]="initiate",a[a.open=2]="open",a[a.pause=3]="pause",a[a.lock=4]="lock",a[a.seal=5]="seal",a[a.error=6]="error",a[a.crash=7]="crash",a[a.terminate=8]="terminate",a[a.close=9]="close"}(a.State||(a.State={}));a.State;a.EVENT={PJAX:a.DEF.NAME.toLowerCase(),CLICK:"click",SUBMIT:"submit",POPSTATE:"popstate",SCROLL:"scroll"}}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){}(b=a.DATA||(a.DATA={}))}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){function b(a,b){var c=a.prototype;b=b.reverse();for(var d=b.length;d--;){var e=b[d].prototype;for(var f in e)"constructor"!==f&&c[f]&&e.hasOwnProperty(f)&&(c[f]=e[f])}}function c(){function a(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16).toUpperCase()}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a)}function d(a,b){if(!Object.freeze||a===a.window||"ownerDocument"in a)return a;if(!Object.isFrozen(a)&&Object.freeze(a),!b)return a;for(var c in a){var e=a[c];~"object,function".indexOf(typeof e)&&e&&d(e,b)}return a}function e(a,b){if(!Object.seal||a===a.window||"ownerDocument"in a)return a;if(!Object.isSealed(a)&&Object.seal(a),!b)return a;for(var c in a){var d=a[c];~"object,function".indexOf(typeof d)&&d&&e(d,b)}return a}a.MIXIN=b,a.UUID=c,a.FREEZE=d,a.SEAL=e}(MODULE||(MODULE={}));var MODULE;!function(a){}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c=function(){function b(b){this.NAME=a.DEF.NAME,this.NAMESPACE=a.DEF.NAMESPACE,this.UUID=a.UUID(),this.state_=a.State.blank,this.state_=b}return b.prototype.MAIN=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return this.main_.apply(this,[a].concat(b))},b.prototype.main_=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return a},b}();b.Template=c}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c=function(){function b(b){this.UUID=a.UUID(),this.state_=a.State.blank,this.state_=b}return b}();b.Template=c}(b=a.VIEW||(a.VIEW={}))}(MODULE||(MODULE={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},MODULE;!function(a){var b;!function(b){var c=function(b){function c(c,d,e,f){var g=this;b.call(this,a.State.initiate),this.model_=c,this.controller_=d,this.context_=e,this.handlers={click:function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];g.controller_.click(a)},submit:function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];g.controller_.submit(a)},popstate:function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];g.controller_.popstate(a)},scroll:function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];g.controller_.scroll(a)}},a.FREEZE(this),this.observe_(f)}return __extends(c,b),c.prototype.observe_=function(a){return this.release_(a),a.link&&this.context_.delegate(a.link,a.nss.event.click,this.handlers.click),a.form&&this.context_.delegate(a.form,a.nss.event.submit,this.handlers.submit),jQuery(window).bind(a.nss.event.popstate,this.handlers.popstate),a.database.active&&a.fix.scroll&&jQuery(window).bind(a.nss.event.scroll,this.handlers.scroll),this},c.prototype.release_=function(a){return a.link&&this.context_.undelegate(a.link,a.nss.event.click),a.form&&this.context_.undelegate(a.form,a.nss.event.submit),jQuery(window).unbind(a.nss.event.popstate),a.database.active&&a.fix.scroll&&jQuery(window).unbind(a.nss.event.scroll),this},c}(b.Template);b.Main=c}(b=a.VIEW||(a.VIEW={}))}(MODULE||(MODULE={}));var MODULE;!function(a){a.View=a.VIEW.Main}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c=function(){function b(){a.FREEZE(this)}return b.prototype.enable=function(){return a.Model.singleton().enable(),this},b.prototype.disable=function(){return a.Model.singleton().disable(),this},b.prototype.click=function(b,c){var d;switch(typeof b){case"undefined":d=jQuery(this).filter("a").first().clone();break;case"object":d=jQuery(b).clone();break;case"string":c=jQuery.extend(!0,{},c,{href:b}),d=jQuery("<a/>",c);break;default:return this}var e=a.Model.singleton().configure(d[0]);return e&&d.first().one(e.nss.event.click,function(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a.Controller.singleton().click(b)}).click(),this},b.prototype.submit=function(b,c,d){var e,f,g,h=document.createDocumentFragment();switch(typeof b){case"undefined":e=jQuery(this).filter("form").first().clone();break;case"object":e=jQuery(b).clone();break;case"string":c=jQuery.extend(!0,{},c,{action:b}),f=d instanceof Array&&Array||d instanceof Object&&Object||undefined;for(var i in d){switch(f){case Object:if(!Object.prototype.hasOwnProperty.call(d,i))continue;g=jQuery("<textarea/>",{name:i}).val(d[i]);break;case Array:d[i].attrs=d[i].attrs||{},d[i].attrs.name=d[i].name||d[i].attrs.name,d[i].attrs.type=d[i].type||d[i].attrs.type,g=jQuery("<"+d[i].tag+"/>",d[i].attrs).val(d[i].value);break;default:continue}h.appendChild(g[0])}e=jQuery("<form/>",c).append(h);break;default:return this}var j=a.Model.singleton().configure(e[0]);return j&&e.first().one(j.nss.event.submit,function(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a.Controller.singleton().submit(b)}).submit(),this},b.prototype.getCache=function(b){void 0===b&&(b=window.location.href);var c=a.Model.singleton().getCache(b);return c&&(c={data:c.data,textStatus:c.textStatus,jqXHR:c.jqXHR,expires:c.expires}),c},b.prototype.setCache=function(b,c,d,e){switch(void 0===b&&(b=window.location.href),arguments.length){case 0:return this.setCache(b,document.documentElement.outerHTML);case 1:return this.setCache(b,null);case 2:case 3:case 4:default:a.Model.singleton().setCache(b,c,d,e)}return this},b.prototype.removeCache=function(b){return void 0===b&&(b=window.location.href),a.Model.singleton().removeCache(b),this},b.prototype.clearCache=function(){return a.Model.singleton().clearCache(),this},b.prototype.follow=function(b,c,d,e){if(!a.Model.singleton().isDeferrable)return!1;var f=b.currentTarget;return c.follow=!0,c.host=d||"",isFinite(b.timeStamp)&&(c.timeStamp=e||b.timeStamp),a.Model.singleton().setPageXHR(c),jQuery.when(c).done(function(){!a.Model.singleton().getCache(f.href)&&a.Model.singleton().isOperatable(b)&&a.Model.singleton().setCache(f.href,undefined,undefined,c)}),jQuery[a.DEF.NAME].click(f.href),!0},b.prototype.bypass=function(){return a.Model.singleton().bypass()},b.prototype.host=function(){return a.Model.singleton().host()},b}();b.Functions=c}(b=a.CONTROLLER||(a.CONTROLLER={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c=function(){function b(){a.FREEZE(this)}return b}();b.Methods=c}(b=a.CONTROLLER||(a.CONTROLLER={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c=function(){function b(b,c){this.UUID=a.UUID(),this.state_=a.State.blank,this.PROPERTIES=[],this.state_=c}return b.prototype.EXTEND=function(b){return b instanceof a.DEF.NAMESPACE?(b instanceof jQuery&&(b=b.add()),this.REGISTER_FUNCTION(b),this.REGISTER_METHOD(b)):(b!==this.EXTENSION&&(b=this.EXTENSION),this.REGISTER_FUNCTION(b)),this.UPDATE_PROPERTIES(b),b},b.prototype.REGISTER=function(b){var c=this;this.EXTENSION=this.EXTENSION||function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];var e=c.EXTEND(this);return a=[e].concat(a),a=c.EXEC.apply(c,a),a instanceof Array?b.MAIN.apply(b,a):a},this.EXTEND(this.EXTENSION),window[a.DEF.NAMESPACE]=window[a.DEF.NAMESPACE]||{},a.DEF.NAMESPACE.prototype?a.DEF.NAMESPACE[a.DEF.NAME]=a.DEF.NAMESPACE.prototype[a.DEF.NAME]=this.EXTENSION:a.DEF.NAMESPACE[a.DEF.NAME]=this.EXTENSION},b.prototype.EXEC=function(){return this.exec_.apply(this,arguments)},b.prototype.exec_=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return[a].concat(b)},b.prototype.REGISTER_FUNCTION=function(a){var b=this.FUNCTIONS;for(var c in b)"constructor"!==c&&(a[c]=b[c]);return a},b.prototype.REGISTER_METHOD=function(a){var b=this.METHODS;for(var c in b)"constructor"!==c&&(a[c]=b[c]);return a},b.prototype.UPDATE_PROPERTIES=function(a){var b,c,d,e=this.PROPERTIES;for(b=0,c=e.length;c>b;b++)"constructor"!==b&&(d=e[b],a[d]&&(a[d]=a[d]()));return a},b}();b.Template=c}(b=a.CONTROLLER||(a.CONTROLLER={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c=function(c){function d(d){c.call(this,d,a.State.initiate),this.model_=d,this.FUNCTIONS=new b.Functions,this.METHODS=new b.Methods,this.REGISTER(d),a.FREEZE(this)}return __extends(d,c),d.prototype.exec_=function(a){var b=[].slice.call(arguments,1,2),c=b[0];switch(typeof c){case"undefined":case"object":break;default:return a}return[a].concat(b)},d.prototype.view=function(b,c){return new a.View(this.model_,this,b,c)},d.prototype.click=function(a){this.model_.click.apply(this.model_,a)},d.prototype.submit=function(a){this.model_.submit.apply(this.model_,a)},d.prototype.popstate=function(a){this.model_.popstate.apply(this.model_,a)},d.prototype.scroll=function(a){this.model_.scroll.apply(this.model_,a)},d}(b.Template);b.Main=c;var d=function(){function b(d){void 0===d&&(d=a.Model.singleton()),b.instance_=b.instance_||new c(d)}return b.singleton=function(){return b.instance_},b.prototype.singleton=function(){return b.singleton()},b}();b.Singleton=d}(b=a.CONTROLLER||(a.CONTROLLER={}))}(MODULE||(MODULE={}));var MODULE;!function(a){a.Controller=a.CONTROLLER.Singleton}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b=function(){function a(a,b){void 0===a&&(a=1),void 0===b&&(b=0),this.list_=[],this.config_={mode:1,size:0},this.table_={},this.option_={},this.config_.mode=a||this.config_.mode,this.config_.size=b||this.config_.size}return a.prototype.define=function(a,b,c){void 0===b&&(b=this.config_.mode),void 0===c&&(c=this.config_.size),this.option_[a]={mode:b,size:c},this.table_[a]=[]},a.prototype.reserve=function(a,b){switch(typeof a){case"string":!this.option_[a]&&this.define(a);var c=this.option_[a],d=this.table_[a],e=[].slice.call(arguments,2);break;case"function":b=a,a=undefined;var c=this.config_,d=this.list_,e=[].slice.call(arguments,1);break;default:return}if("function"==typeof b){var f;f=c.mode>0?"push":"unshift",d[f]([b,e.shift(),e])}},a.prototype.digest=function(a,b){switch(typeof a){case"string":!this.option_[a]&&this.define(a),b=b||0;var c=this.option_[a],d=this.table_[a];if(!d)return;break;case"number":case"undefined":b=a||0,a=undefined;var c=this.config_,d=this.list_;break;default:return}d.length>c.size&&c.size&&(c.mode>0?d.splice(0,d.length-c.size):d.splice(d.length-c.size,d.length));var e;for(b=b||-1;e=b--&&d.pop();)e.shift().apply(e.shift()||window,e.shift()||[]);if(undefined===a){var f=this.table_;for(var g in f)this.digest(g,b)}},a.prototype.clear=function(a){switch(typeof a){case"string":!this.option_[a]&&this.define(a),this.table_[a].splice(0,this.table_[a].length);break;default:var b=this.table_;for(var c in b)this.clear(c)}},a}();a.Task=b}(b=a.LIBRARY||(a.LIBRARY={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){this.task_=a,this.labels_={done:"done",fail:"fail",always:"always"}}return a.prototype.done=function(a){return this.task_.reserve(this.labels_.done,a),this},a.prototype.fail=function(a){return this.task_.reserve(this.labels_.fail,a),this},a.prototype.always=function(a){return this.task_.reserve(this.labels_.always,a),this},a.prototype.resolve=function(){return this.task_.clear(this.labels_.fail),this.task_.digest(this.labels_.done),this.task_.digest(this.labels_.always),this},a.prototype.reject=function(){return this.task_.clear(this.labels_.done),this.task_.digest(this.labels_.fail),this.task_.digest(this.labels_.always),this},a}();a.Task=b;var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(b);a.TaskUp=c;var d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.done=function(a){return this},b.prototype.fail=function(a){return this},b.prototype.always=function(a){return this},b.prototype.resolve=function(){return this},b}(b);a.TaskDown=d}(b=a.STATEFUL||(a.STATEFUL={}))}(b=a.DB||(a.DB={}))}(b=a.DATA||(a.DATA={}))}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c;!function(b){var c;!function(b){var c;!function(b){var c=function(){function c(b,c,d){var e=this;this.origin_=b,this.connect_=c,this.extend_=d,this.state_=function(){return e.origin_.state()},this.task_=new a.LIBRARY.Task,this.cache_={stateful:{}}}return c.prototype.stateful_=function(){var c=this,d=function(a,b){return c.cache_.stateful[c.state_()]=c.cache_.stateful[c.state_()]||new a(c.origin_,c.connect_,c.extend_,c.task_,b)};switch(this.state_()){case a.State.blank:return d(b.STATE.Blank,!0);case a.State.initiate:return d(b.STATE.Initiate,!0);case a.State.open:return d(b.STATE.Open,!0);case a.State.close:return d(b.STATE.Close,!0);case a.State.terminate:return d(b.STATE.Terminate,!0);case a.State.error:return d(b.STATE.Error,!1);default:return d(b.STATE.Except,!1)}},c.prototype.open=function(){return this.stateful_().open()},c.prototype.resolve=function(){return this.stateful_().resolve()},c.prototype.reject=function(){return this.stateful_().reject()},c}();b.Stateful=c}(c=b.DB||(b.DB={}))}(c=b.DATA||(b.DATA={}))}(c=b.APP||(b.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c=function(){function b(b,c,d,e,f){this.origin=b,this.connect=c,this.extend=d,this.task=f?new a.STATEFUL.TaskUp(e):new a.STATEFUL.TaskDown(e)}return b.prototype.open=function(){return this.task},b.prototype.resolve=function(){},b.prototype.reject=function(){this.task.reject()},b}();b.Default=c;var d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.open=function(){return this.connect(),this.task},b.prototype.resolve=function(){this.open()},b.prototype.reject=function(){this.task.reject()},b}(c);b.Blank=d;var e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.open=function(){return this.task},b.prototype.resolve=function(){},b.prototype.reject=function(){this.task.reject()},b}(c);b.Initiate=e;var f=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.open=function(){var a=this;return this.extend(),setTimeout(function(){return a.origin.resolve()},1),this.task},b.prototype.resolve=function(){this.task.resolve()},b.prototype.reject=function(){this.task.reject()},b}(c);b.Open=f;var g=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.open=function(){return this.connect(),this.task},b.prototype.resolve=function(){this.open()},b.prototype.reject=function(){this.task.reject()},b}(c);b.Close=g;var h=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(c);b.Terminate=h;var i=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(c);b.Error=i;var j=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(c);b.Except=j}(b=a.STATE||(a.STATE={}))}(b=a.DB||(a.DB={}))}(b=a.DATA||(a.DATA={}))}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){this.DB=a,this.autoIncrement=!1,this.indexes=[],this.size=100,this.buffer={},this.diff={}}return a.prototype.accessStore=function(a,b){var c=this;void 0===b&&(b="readwrite");try{var d=this.DB.database(),e=d&&d.transaction(this.name,b).objectStore(this.name)}catch(f){}e?a(e):this.DB.open().done(function(){return c.accessStore(a)})},a.prototype.accessCount=function(){var a="string"==typeof arguments[0]&&arguments[0],b=arguments[a?1:0];this.accessStore(function(c){var d=a?c.index(a).count():c.count();d.onsuccess=function(){b.apply(this,[].slice.call(arguments,1).concat(this.result))}})},a.prototype.accessRecord=function(a,b,c){this.accessStore(function(c){c.get(a).onsuccess=b},c)},a.prototype.accessCursor=function(a,b,c,d){this.accessStore(function(e){var f;f=c&&b?e.index(a).openCursor(b,c):b?e.index(a).openCursor(b):e.openCursor(),f.onsuccess=d})},a.prototype.accessAll=function(a,b,c,d){"function"==typeof a&&(d=a,a=null,b=null,c=null),this.accessCursor(a,b,c,d)},a.prototype.get=function(a,b){var c=this;this.accessRecord(a,function(a){c.setBuffer(a.target.result),b(a)})},a.prototype.set=function(a,b){var c=this;a=jQuery.extend(!0,{},a),this.setBuffer(a,b),this.accessRecord(a[this.keyPath],function(d){d.target.source.put(b?jQuery.extend(!0,{},d.target.result,a):a),c.autoIncrement||delete c.diff[a[c.keyPath]]})},a.prototype.remove=function(a){this.removeBuffer(a),this.accessStore(function(b){b["delete"](a)})},a.prototype.clear=function(){this.clearBuffer(),this.accessStore(function(a){a.clear()})},a.prototype.clean=function(){var a=this;if(this.size&&this.indexes.length){var b=this.indexes[0].name,c=this.size;this.accessCount(b,function(d){c>=d||(c=d-c,a.accessCursor(b,a.DB.IDBKeyRange.upperBound(1/0),"next",function(b){if(b.target.result&&c--){var d=b.target.result;delete a.diff[d.primaryKey],d["delete"](),d["continue"]()}}))})}},a.prototype.loadBuffer=function(a){function b(){if(!this.result)return a&&a();var b=this.result;c[b.primaryKey]=b.value,b["continue"]()}if(!this.autoIncrement){var c=this.buffer;this.indexes.length?this.DB.IDBKeyRange&&this.accessAll(this.indexes[0].name,this.DB.IDBKeyRange.upperBound(1/0),"prev",b):this.accessAll(b)}},a.prototype.saveBuffer=function(a){var b=this;this.autoIncrement||this.accessStore(function(c){for(var d in b.diff)c.put(b.diff[d]);a&&a()})},a.prototype.getBuffers=function(){return this.buffer},a.prototype.setBuffers=function(a,b){for(var c in a)this.setBuffer(a[c],b);return this.buffer},a.prototype.getBuffer=function(a){return this.autoIncrement?void 0:this.buffer[a]},a.prototype.setBuffer=function(a,b){if(!this.autoIncrement){if(!a)return a;var c=a[this.keyPath];return this.buffer[c]=b?jQuery.extend(!0,{},this.buffer[c],a):a,this.diff[c]=this.buffer[c],this.buffer[c]}},a.prototype.removeBuffer=function(a){if(!this.autoIncrement){var b=this.buffer[a];return delete this.buffer[a],delete this.diff[a],b}},a.prototype.clearBuffer=function(){if(!this.autoIncrement){for(var a in this.buffer)delete this.buffer[a];for(var a in this.diff)delete this.diff[a]}},a}();a.Store=b}(b=a.DATA||(a.DATA={}))}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c=function(a){function b(){a.apply(this,arguments),this.name="meta",this.keyPath="key",this.autoIncrement=!1,this.size=0}return __extends(b,a),b}(a.Store);b.Meta=c}(b=a.STORE||(a.STORE={}))}(b=a.DATA||(a.DATA={}))}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c=function(a){function b(){a.apply(this,arguments),this.name="history",this.keyPath="url",this.autoIncrement=!1,this.indexes=[{name:"date",keyPath:"date",option:{unique:!1}}],this.size=300}return __extends(b,a),b}(a.Store);b.History=c}(b=a.STORE||(a.STORE={}))}(b=a.DATA||(a.DATA={}))}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c=function(a){function b(){a.apply(this,arguments),this.name="server",this.keyPath="host",this.autoIncrement=!1,this.indexes=[{name:"score",keyPath:"score",option:{unique:!1}}],this.size=100}return __extends(b,a),b}(a.Store);b.Server=c}(b=a.STORE||(a.STORE={}))}(b=a.DATA||(a.DATA={}))}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c;!function(b){var c;!function(b){var c=function(){function c(){var c=this;this.IDBFactory=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.mozIDBKeyRange||window.msIDBKeyRange,this.name=a.DEF.NAME,this.version=10,this.refresh=10,this.upgrade=0,this.revision=0,this.state_=a.State.blank,this.stateful=new b.DB.Stateful(this,function(){return c.connect()},function(){return c.extend()}),this.age=1e4,this.expires=0,this.timer=0,this.stores={meta:new b.STORE.Meta(this),history:new b.STORE.History(this),server:new b.STORE.Server(this)},this.meta={version:{key:"version",value:undefined},update:{key:"update",value:undefined},revision:{key:"revision",value:undefined}}}return c.prototype.state=function(){return this.state_},c.prototype.extend=function(){var a=this;this.expires=(new Date).getTime()+this.age,clearTimeout(this.timer),this.timer=setTimeout(function(){return a.check()},this.age)},c.prototype.check=function(){!this.age||(new Date).getTime()<=this.expires||a.State.open===this.state()&&this.close()},c.prototype.database=function(){return this.extend(),this.database_},c.prototype.configure=function(a,b){this.revision=a,this.refresh=b},c.prototype.up=function(){this.state_=a.State.blank,this.open()},c.prototype.down=function(){this.reject(),this.close(),this.state_=a.State.error},c.prototype.open=function(){return!this.IDBFactory&&this.down(),this.stateful.open()},c.prototype.close=function(){this.database_&&this.database_.close&&this.database_.close(),this.state_=a.State.close},c.prototype.resolve=function(){this.stateful.resolve()},c.prototype.reject=function(){this.stateful.reject()},c.prototype.connect=function(){this.create()},c.prototype.create=function(){var b=this;try{this.close(),this.state_=a.State.initiate;var c=this.IDBFactory.open(this.name,this.upgrade?this.version:1),d=function(){b.verify(function(){b.state_=a.State.open,b.resolve(),b.extend()})};if("done"===c.readyState)this.database_=c.result,this.database()?d():this.format();else{var e=setTimeout(function(){return b.down()},3e3);c.onblocked=function(){clearTimeout(e),b.database_=c.result,b.close(),setTimeout(function(){return b.open()},1e3)},c.onupgradeneeded=function(){clearTimeout(e),b.database_=c.result,b.createStores()},c.onsuccess=function(){clearTimeout(e),b.database_=c.result,d()},c.onerror=function(){clearTimeout(e),b.database_=c.result,b.down()}}}catch(f){this.down()}},c.prototype.destroy=function(b,c){var d=this;try{this.close(),this.state_=a.State.terminate;var e=this.IDBFactory.deleteDatabase(this.name);e&&(e.onsuccess=b,e.onerror=c),setTimeout(function(){return a.State.terminate===d.state()&&d.down()},3e3)}catch(f){this.down()}},c.prototype.format=function(){var a=this;this.destroy(function(){return a.up()},function(){return a.down()})},c.prototype.verify=function(a){var b=this,c=this.database(),d=this.version,e=this.revision,f=this.meta,g=this.stores.meta,h=function(){return b.format()};if(c.objectStoreNames.length!==Object.keys(this.stores).length)return void h();for(var i in this.stores){var j=c.transaction(this.stores[i].name,"readonly").objectStore(this.stores[i].name);switch(!1){case j.keyPath===this.stores[i].keyPath:case j.indexNames.length===this.stores[i].indexes.length:return void h()}}var k=!1;g.get(f.version.key,function(a){if(!k){var c=a.target.result;!c||b.upgrade?g.set(g.setBuffer({key:f.version.key,value:d})):c.value>d?(k=!0,b.down()):c.value<d&&(k=!0,h())}}),g.get(f.revision.key,function(a){if(!k){var c=a.target.result;c?c.value>e?(k=!0,b.down()):c.value<e&&(k=!0,h()):g.set(g.setBuffer({key:f.revision.key,value:e}))}}),g.get(f.update.key,function(c){if(!k){var d=c.target.result,e=Math.floor((new Date).getTime()/864e5);d&&b.refresh?d.value>e?a():d.value<=e&&h():(g.set(g.setBuffer({key:f.update.key,value:e+b.refresh})),a())}})},c.prototype.createStores=function(){this.destroyStores();var a=this.database();for(var b in this.stores)for(var c,d=this.stores[b],e=a.createObjectStore(d.name,{keyPath:d.keyPath,autoIncrement:d.autoIncrement}),f=0,g=d.indexes;c=g[f];f++)e.createIndex(c.name,c.keyPath,c.option)},c.prototype.destroyStores=function(){for(var a=this.database(),b=a.objectStoreNames?a.objectStoreNames.length:0;b--;)a.deleteObjectStore(a.objectStoreNames[b])},c}();b.Database=c}(c=b.DATA||(b.DATA={}))}(c=b.APP||(b.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){this.age_=a}return a.prototype.getCookie=function(a){if(a&&window.navigator.cookieEnabled){var b=new RegExp("(?:^|; )("+encodeURIComponent(a)+"=[^;]*)"),c=(document.cookie.match(b)||[]).pop();return c&&decodeURIComponent(c.split("=").pop())}},a.prototype.setCookie=function(a,b,c){return void 0===c&&(c={}),a&&window.navigator.cookieEnabled?(c.age=c.age||this.age_,document.cookie=[encodeURIComponent(a)+"="+encodeURIComponent(b),c.age?"; expires="+new Date((new Date).getTime()+1e3*c.age).toUTCString():"",c.path?"; path="+c.path:"; path=/",c.secure?"; secure":""].join(""),this.getCookie(a)):void 0},a}();a.Cookie=b}(b=a.DATA||(a.DATA={}))}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(){this.DB=new a.Database,this.Cookie=new a.Cookie(864e3)}return b}();a.Main=b}(b=a.DATA||(a.DATA={}))}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b=function(){function a(){}return a.trim=function(a){if(a="string"==typeof a?a:String(0===a&&a.toString()||""),a.trim)a=a.trim();else if(a=a.replace(/^[\s\uFEFF\xA0]+/,"")){var b=/[\s\uFEFF\xA0]/,c=a.length,d=c%8;a:{for(;d--;)if(!b.test(a.charAt(--c)))break a;for(;c;){if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a;if(!b.test(a.charAt(--c)))break a}}a=a.substring(0,c+1)}return a},a.repeat=function(a,b){switch(a instanceof Array&&"array"||typeof a){case"string":var c=a;return Array(b+1).join(c);case"array":var d=a.length;if(300>b){var e=Array(b);this.duff(-b,function(b){return e[b]=a[b%d]})}else{for(var e=a.slice();2*e.length<=b;)e=e.concat(e);e=e.concat(e.slice(0,b-e.length))}return e}},a.fire=function(a,b,c,d){return void 0===b&&(b=window),void 0===c&&(c=[]),"function"==typeof a?d?setTimeout(function(){a.apply(b||window,c)},0):a.apply(b||window,c):a},a.duff=function(a,b){if(0>a){for(var c=-a,d=c%8;d--;)b(--c);for(;c;)b(--c),b(--c),b(--c),b(--c),b(--c),b(--c),b(--c),b(--c)}else{for(var e=a,c=0,d=e%8,f=e/8^0;d--;)b(c++);for(;f--;)b(c++),b(c++),b(c++),b(c++),b(c++),b(c++),b(c++),b(c++)}},a.duffEx=function(a,b){if(0>a){var c=-a,d=c%8;a:{for(;d--;)if(!1===b(--c))break a;for(;c;){if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a;if(!1===b(--c))break a}}}else{var e=a,c=0,d=e%8,f=e/8^0;a:{for(;d--;)if(!1===b(c++))break a;for(;f--;){if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a;if(!1===b(c++))break a}}}},a.normalizeUrl=function(a,b){void 0===b&&(b=!0);var c;return c=this.trim(a),c=/^([^:\/?#]+):\/\/[^\/?#.]+\.[^\/?#]+/i.test(c)?c:function(a,b){return b.href=a,b.href}(c,document.createElement("a")),c=encodeURI(decodeURI(c)),c=c.replace(/["`^|\\<>{}\[\]\s].*/,""),c=b?this.justifyPercentEncodingUrlCase_(a,c):c},a.canonicalizeUrl=function(a){function b(a){return a.toUpperCase()}var c=this.normalizeUrl(a,!1);return c=c.replace(/(?:%\w{2})+/g,b)},a.compareUrl=function(a,b){return a=this.canonicalizeUrl(a),b=this.canonicalizeUrl(b),a===b},a.justifyPercentEncodingUrlCase_=function(a,b){function c(b){var c=~a.indexOf(b.toUpperCase())||~a.indexOf(b.toLowerCase());return c?a.substr(~c,b.length):b}return a===b?b:b.replace(/(?:%\w{2})+/g,c)},a}();a.Utility=b}(b=a.LIBRARY||(a.LIBRARY={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c;!function(b){var c=function(){function c(c){this.model_=c,this.data_=new b.DATA.Main,this.stores_=this.data_.DB.stores,this.util_=a.LIBRARY.Utility}return c.prototype.getCookie=function(a){return this.data_.Cookie.getCookie(a)},c.prototype.setCookie=function(a,b,c){return this.data_.Cookie.setCookie(a,b,c)},c.prototype.connect=function(a){a.database.active?(this.data_.DB.configure(a.database.revision,a.database.refresh),this.data_.DB.up(),this.saveTitle(),this.saveScrollPosition()):this.data_.DB.down()},c.prototype.loadBuffers=function(){for(var a in this.stores_)this.stores_[a].loadBuffer()},c.prototype.saveBuffers=function(){for(var a in this.stores_)this.stores_[a].saveBuffer()},c.prototype.getHistoryBuffer=function(a){return this.stores_.history.getBuffer(this.model_.convertUrlToKey(a,!0))},c.prototype.loadTitle=function(){var a=this,b=this.model_.convertUrlToKey(window.location.href,!0),c=this.stores_.history.getBuffer(b);c&&"string"==typeof c.title?document.title=c.title:this.stores_.history.get(b,function(d){c=d.target.result,c&&c.title&&a.model_.compareKeyByUrl(b,a.util_.canonicalizeUrl(window.location.href))&&(document.title=c.title)})},c.prototype.saveTitle=function(a,b){void 0===a&&(a=window.location.href),void 0===b&&(b=document.title);var c=this.model_.convertUrlToKey(a,!0),d={url:c,title:b,date:(new Date).getTime(),scrollX:undefined,scrollY:undefined,host:undefined,expires:undefined};this.stores_.history.set(d,!0),this.stores_.history.clean()},c.prototype.loadScrollPosition=function(){function a(a,b){"number"==typeof a&&"number"==typeof b&&window.scrollTo(parseInt(Number(a)+"",10),parseInt(Number(b)+"",10))}var b=this,c=this.model_.convertUrlToKey(window.location.href,!0),d=this.stores_.history.getBuffer(c);d&&"number"==typeof d.scrollX?a(d.scrollX,d.scrollY):this.stores_.history.get(c,function(e){d=e.target.result,d&&"number"==typeof d.scrollX&&b.model_.compareKeyByUrl(c,b.util_.canonicalizeUrl(window.location.href))&&a(d.scrollX,d.scrollY)})},c.prototype.saveScrollPosition=function(a,b,c){void 0===a&&(a=window.location.href),void 0===b&&(b=jQuery(window).scrollLeft()),void 0===c&&(c=jQuery(window).scrollTop());var d=this.model_.convertUrlToKey(a,!0),e={url:d,scrollX:b,scrollY:c,date:(new Date).getTime(),title:undefined,host:undefined,expires:undefined};this.stores_.history.set(e,!0)},c.prototype.loadExpires=function(){},c.prototype.saveExpires=function(a,b,c){var d=this.model_.convertUrlToKey(a,!0),e={url:d,host:b||"",expires:c,title:undefined,scrollX:undefined,scrollY:undefined,date:undefined};this.stores_.history.set(e,!0)},c.prototype.getServerBuffers=function(){return this.stores_.server.getBuffers()},c.prototype.getServerBuffer=function(a){var b=this.model_.convertUrlToKey(a,!0).split("//").pop().split("/").shift();return b=this.model_.compareKeyByUrl("http://"+b,"http://"+window.location.host)?"":b,this.stores_.server.getBuffer(b)},c.prototype.loadServer=function(){},c.prototype.saveServer=function(a,b,c,d,e){a=a.split("//").pop().split("/").shift(),a=this.model_.compareKeyByUrl("http://"+a,"http://"+window.location.host)?"":a;var f={host:a,
time:Math.max(c,1),score:d,state:e,expires:b};this.stores_.server.set(f,!0),this.stores_.server.clean()},c.prototype.removeServer=function(a){this.stores_.server.remove(a),this.stores_.server.clean()},c}();b.Data=c}(c=b.APP||(b.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(b){this.data_=b,this.util_=a.LIBRARY.Utility,this.force_=!1,this._host="",this.parallel_=4}return b.prototype.host_=function(a,b){return b&&(this._host=b.balance.active?this.sanitize(a,b).split("//").pop().split("/").shift()||"":""),this._host},b.prototype.host=function(){return this.host_()},b.prototype.sanitize=function(a,b){if(!b)return"";var c;switch(a&&typeof a){case"string":c=a;break;case"object":var d=a;c=4===d.readyState&&d.getResponseHeader(b.balance.server.header)||d.host}return c=c||"",!/[\/?#"`^|\\<>{}\[\]\s]/.test(c)&&jQuery.grep(b.balance.bounds,function(a){return""===c||"*"===a||c===a||"."===a.charAt(0)&&a===c.slice(-a.length)}).length&&c||""},b.prototype.enable=function(a){return a.balance.active&&a.balance.client.support.browser.test(window.navigator.userAgent)?(this.data_.setCookie(a.balance.client.cookie.balance,"1"),void(a.balance.client.support.redirect.test(window.navigator.userAgent)&&this.data_.setCookie(a.balance.client.cookie.redirect,"1"))):void this.disable(a)},b.prototype.disable=function(a){this.data_.getCookie(a.balance.client.cookie.balance)&&this.data_.setCookie(a.balance.client.cookie.balance,"0"),this.data_.getCookie(a.balance.client.cookie.redirect)&&this.data_.setCookie(a.balance.client.cookie.redirect,"0"),this.changeServer("",a)},b.prototype.score=function(a,b){return Math.max(Math.round(b/a*1e3),0)},b.prototype.changeServer=function(a,b){return b.balance.active?(this.host_(a,b),this.data_.setCookie(b.balance.client.cookie.host,a)):this.host_("",b),this.host()},b.prototype.chooseServers_=function(a){function b(a,b){return+b-+a}var c=this,d=a.balance.server.respite,e=a.balance.weight,f=a.ajax.timeout,g=a.balance.client.hosts.slice();g=this.force_?jQuery.grep(g,function(a){return!!a}):g,function(){var b=c.data_.getCookie(a.balance.client.cookie.host);(!c.force_||b)&&(b===c.sanitize(b,a)?!~jQuery.inArray(b,g)&&g.unshift(b):c.data_.setCookie(a.balance.client.cookie.host,""))}();var h=this.data_.getServerBuffers(),i={};jQuery.each(Object.keys(h),function(b,d){var e=h[d];~jQuery.inArray(e.host,g)&&g.splice(jQuery.inArray(e.host,g),1),(!c.force_||e.host)&&(e.host===c.sanitize(e.host,a)&&e.expires>(new Date).getTime()?i[e.score]=e:c.data_.removeServer(e.host))});var j,k=Object.keys(i).sort(b),l=[];for(jQuery.each(k,function(b){var h=i[k[b]],m=h.host,n=h.time,o=h.score,p=h.state;if(~jQuery.inArray(m,g)&&g.splice(jQuery.inArray(m,g),1),!(p+d>=(new Date).getTime())){switch(p&&c.data_.removeServer(h.host),!0){case l.length>=a.balance.random&&0<l.length:return!1;case e&&!m&&!!Math.floor(Math.random()*e):case f&&n>=f:case l.length>=Math.min(Math.floor(k.length/2),3)&&j&&n>=j.time+500&&f&&n>=2*f/3:case l.length>=Math.min(Math.floor(k.length/2),3)&&j&&o<=j.score/2:return}j=j||h,l.push(m)}});g.length;)l.push(g.splice(Math.floor(Math.random()*g.length),1).shift());return l},b.prototype.chooseServerFromCache_=function(a){var b=this,c=[],d=this.data_.getHistoryBuffer(a.destLocation.href);switch(!0){case!d:break;case d.host!==this.sanitize(d.host,a):this.data_.saveExpires(d.url,"",0);case!d.expires:case d.expires<(new Date).getTime():case this.force_&&!d.host:break;default:c=jQuery.map(this.data_.getServerBuffers(),function(a){return a.host===d.host?a.state>=(new Date).getTime()?void b.data_.saveExpires(d.url,d.host,0):a.host:void 0})}return c.length?c.pop()||" ":""},b.prototype.chooseServerFromScore_=function(a){var b=this.chooseServers_(a);return b.slice(Math.floor(Math.random()*Math.min(b.length,6))).shift()||" "},b.prototype.chooseServer=function(a){return a.balance.active?this.util_.trim(this.chooseServerFromCache_(a)||this.chooseServerFromScore_(a)):""},b.prototype.bypass=function(a){var b=this;this.force_=!0;var c=jQuery.Deferred();if(!a||!a.balance.active)return c.reject();var d=this.parallel_,e=this.chooseServers_(a),f=jQuery.extend({},a.ajax,a.balance.option.ajax);e=jQuery.grep(e,function(a){return!!a});for(var g=0,h=e.length,i=function(d){var j=b,k=(new Date).getTime();"pending"===c.state()&&jQuery.ajax(jQuery.extend({},f,{url:j.util_.normalizeUrl(window.location.protocol+"//"+d+window.location.pathname.replace(/^\/?/,"/")+window.location.search),xhr:a.balance.option.callbacks.ajax.xhr?function(){var b;return b=j.util_.fire(a.balance.option.callbacks.ajax.xhr,this,[event,a]),b="object"==typeof b?b:jQuery.ajaxSettings.xhr()}:undefined,beforeSend:a.balance.option.callbacks.ajax.beforeSend||a.server.header?function(b,c){a.server.header&&b.setRequestHeader(a.nss.requestHeader,"true"),"object"==typeof a.server.header&&(b.setRequestHeader(a.nss.requestHeader,"true"),a.server.header.area&&b.setRequestHeader(a.nss.requestHeader+"-Area",this.app_.chooseArea(a.area,document,document)),a.server.header.head&&b.setRequestHeader(a.nss.requestHeader+"-Head",a.load.head),a.server.header.css&&b.setRequestHeader(a.nss.requestHeader+"-CSS",a.load.css.toString()),a.server.header.script&&b.setRequestHeader(a.nss.requestHeader+"-Script",a.load.script.toString())),j.util_.fire(a.balance.option.callbacks.ajax.beforeSend,this,[event,a,b,c])}:undefined,dataFilter:a.balance.option.callbacks.ajax.dataFilter?function(b,c){return j.util_.fire(a.balance.option.callbacks.ajax.dataFilter,this,[event,a,b,c])||b}:undefined,success:function(b,c,e){k=(new Date).getTime()-k;var f=j.data_.getServerBuffer(this.url),g=j.score(k,e.responseText.length);k=f&&!f.state&&f.time?Math.round((f.time+k)/2):k,g=f&&!f.state&&f.score?Math.round((f.score+g)/2):g,j.data_.saveServer(d,(new Date).getTime()+a.balance.server.expires,k,g,0),d=j.sanitize(e,a)||d,j.util_.fire(a.balance.option.ajax.success,this,arguments)},error:function(b){j.data_.saveServer(d,(new Date).getTime()+a.balance.server.expires,0,0,(new Date).getTime()),d=null,j.util_.fire(a.balance.option.ajax.error,this,arguments)},complete:function(){j.util_.fire(a.balance.option.ajax.complete,this,arguments),++g,c.notify(g,h,d),d?(j.host_(d,a),e.splice(0,e.length),c.resolve(d)):!j.host()&&e.length?i(e.shift()):c.reject()}}))};d--&&e.length;)i(e.shift());return c},b}();b.Balancer=c}(c=b.APP||(b.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,d,e,f,g){this.data_=a?{url:a,data:b,textStatus:d,jqXHR:e,host:f,bind:g}:{url:undefined,data:undefined,textStatus:undefined,jqXHR:undefined,host:undefined,bind:undefined},this.data=new c(this.data_)}return a.prototype.state=function(a){var b=a?a.cache.expires.min:undefined,c=a?a.cache.expires.max:undefined;switch(!1){case this.data.jqXHR()&&200===+this.data.jqXHR().status:case this.data.expires(b,c)>=(new Date).getTime():return!1;default:return!0}},a}();a.PageRecord=b;var c=function(){function a(a){this.data_=a}return a.prototype.url=function(){return this.data_.url},a.prototype.data=function(){return this.data_.data},a.prototype.textStatus=function(){return this.data_.textStatus},a.prototype.jqXHR=function(){return this.data_.jqXHR},a.prototype.bind=function(){return this.data_.bind},a.prototype.host=function(){return this.data_.host},a.prototype.expires=function(a,b){if(!this.jqXHR()&&!this.data())return 0;var c,d=this.jqXHR();switch(d&&(d.timeStamp=d.timeStamp||new Date(d.getResponseHeader("Date")).getTime()||(new Date).getTime()),!0){case!d:c=0;break;case/no-store|no-cache/.test(d.getResponseHeader("Cache-Control")):c=0;break;case!!d.getResponseHeader("Cache-Control")&&!!~d.getResponseHeader("Cache-Control").indexOf("max-age="):c=new Date(d.getResponseHeader("Date")||new Date(d.timeStamp).toString()).getTime()+1e3*+d.getResponseHeader("Cache-Control").match(/max-age=(\d*)/).pop();break;case!!d.getResponseHeader("Expires"):c=new Date(d.getResponseHeader("Expires")).getTime();break;default:c=0}return(undefined!==a||undefined!==b)&&(c="number"==typeof a?Math.max(a+(new Date).getTime(),c):c,c="number"==typeof b?Math.min(b+(new Date).getTime(),c):c),c=Math.max(c,0)||0},a}();a.PageRecordData=c}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.chooseArea=function(a,b,c,d){void 0===d&&(d=!0);var e="string"==typeof a?[a]:a;a:for(var f=0;f<e.length;f++){for(var g=e[f],h=g.match(/(?:[^,\(\[]+|\(.*?\)|\[.*?\])+/g)||[g],i=h.length;i--;){var j=h[i];switch(!0){case 0===jQuery(j,b).length:case jQuery(j,b).length!==jQuery(j,c).length:continue a}}return g}return""},a.prototype.dispatchEvent=function(a,b,c,d){var e=document.createEvent("HTMLEvents");e.initEvent(b,c,d),a.dispatchEvent(e)},a}();a.PageUtility=b}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(b,c,d,e,f,g,h){this.model_=b,this.page_=c,this.balancer_=d,this.setting_=e,this.event_=f,this.success_=g,this.failure_=h,this.util_=a.LIBRARY.Utility,this.binds_=[],this.jsons_=[],this.main_()}return b.prototype.main_=function(){function b(a,b,c){return e.call(this,[].slice.call(arguments),undefined)}function c(a,b,c){return f.apply(this,arguments)}function d(a,b){return g.apply(this,arguments)}function e(a,b,c){void 0===c&&(c=[]),arguments.length&&arguments[0]&&(h.data_=a[0],h.textStatus_=a[1],h.jqXHR_=a[2],h.binds_=c.every(function(a){return!!a&&"object"==typeof a})?c:[c[2]],h.util_.fire(i.callbacks.ajax.success,this[0]||this,[j,i,h.data_,h.textStatus_,h.jqXHR_]))}function f(a,b,c){arguments.length&&arguments[0]&&(h.jqXHR_=a,h.textStatus_=b,h.errorThrown_=c,h.binds_=[],h.util_.fire(i.callbacks.ajax.error,this[0]||this,[j,i,h.jqXHR_,h.textStatus_,h.errorThrown_]))}function g(){arguments.length&&arguments[0]&&(h.util_.fire(i.callbacks.ajax.complete,this[0]||this,[j,i,h.jqXHR_,h.textStatus_]),h.model_.setPageXHR(null),h.model_.setDataXHR(null),200===+h.jqXHR_.status&&h.binds_.every(function(a){return 200===+a.status})?(h.binds_.forEach(function(a,b){return h.binds_[b].responseJSON=h.binds_[b].responseJSON||h.jsons_[b]}),h.model_.setCache(i.destLocation.href,n&&n.data||null,h.textStatus_,h.jqXHR_),h.success_(i,j,h.data_,h.textStatus_,h.jqXHR_,h.host_,h.binds_)):h.failure_(i,j,h.data_,h.textStatus_,h.jqXHR_,h.host_,h.binds_))}var h=this,i=this.setting_,j=this.event_=jQuery.extend(!0,{},this.event_),k=this.util_.fire(i.wait,i,[j,i,i.origLocation.cloneNode(),i.destLocation.cloneNode()]),l=i.speedcheck,m=this.model_.speed;l&&(m.fire=j.timeStamp),l&&m.time.splice(0,100,0),l&&m.name.splice(0,100,"pjax("+m.time.slice(-1)+")");var n;switch(i.cache[j.type.toLowerCase()]&&j.type.toLowerCase()){case a.EVENT.CLICK:n=this.model_.getCache(i.destLocation.href);break;case a.EVENT.SUBMIT:n=i.cache[j.currentTarget.method.toLowerCase()]?this.model_.getCache(i.destLocation.href):n;break;case a.EVENT.POPSTATE:n=this.model_.getCache(i.destLocation.href)}var o=this.model_.getPageXHR();if(!(o&&o.readyState<4&&o.location&&this.model_.comparePageByUrl(o.location.href,i.destLocation.href)))if(this.dispatchEvent(document,i.nss.event.pjax.fetch,!1,!1),n&&n.jqXHR&&200===+n.jqXHR.status)if(l&&m.name.splice(0,1,"cache("+m.time.slice(-1)+")"),this.host_=this.model_.host(),this.model_.setDataXHR(this.bind_(this.util_.fire(i.bind,i,[j,i,i.origLocation.cloneNode(),i.destLocation.cloneNode()]))),o=n.jqXHR,o.location=o.location||i.destLocation.cloneNode(),this.model_.setPageXHR(o),this.page_.loadtime=0,this.host_=this.balancer_.sanitize(n.host,i),this.data_=n.jqXHR.responseText,this.textStatus_=n.textStatus,this.jqXHR_=n.jqXHR,this.model_.isDeferrable){var p=this.wait_(k);this.page_.setWait(p),jQuery.when(jQuery.Deferred().resolve(this.data_,this.textStatus_,this.jqXHR_),p,jQuery.when.apply(null,this.model_.getDataXHR())).done(e).fail(f).always(g)}else{var q=jQuery.extend({},jQuery.ajaxSettings,i.ajax);q=q.context||q,b.call(q,this.data_,this.textStatus_,this.jqXHR_),d.call(q,this.jqXHR_,this.textStatus_)}else if(o&&o.follow&&!~"error abort timeout parsererror".indexOf(o.statusText)){l&&m.time.splice(0,1,o.timeStamp-m.fire),l&&m.name.splice(0,1,"preload("+m.time.slice(-1)+")"),l&&m.time.push(m.now()-m.fire),l&&m.name.push("continue("+m.time.slice(-1)+")"),this.host_=this.model_.host(),this.model_.setDataXHR(this.bind_(this.util_.fire(i.bind,i,[j,i,i.origLocation.cloneNode(),i.destLocation.cloneNode()]))),o.location=i.destLocation.cloneNode(),this.model_.setPageXHR(o),this.host_=this.model_.host(),this.page_.loadtime=o.timeStamp;var p=this.wait_(k);this.page_.setWait(p),delete o.timeStamp,jQuery.when(o,p,jQuery.when.apply(null,this.model_.getDataXHR())).done(e).fail(f).always(g)}else{this.page_.loadtime=j.timeStamp;var r={};this.host_=this.model_.host(),this.model_.setDataXHR(this.bind_(this.util_.fire(i.bind,i,[j,i,i.origLocation.cloneNode(),i.destLocation.cloneNode()])));var s=this.balance_(i.destLocation.href);switch(r.url=i.server.query?[s.protocol,"//",s.host,s.pathname.replace(/^\/?/,"/"),s.search.replace(/&*$/,"&"+i.server.query).replace(/^\??&/,"?").replace(/(\?|&)$/,""),s.hash].join(""):s.href,j.type.toLowerCase()){case a.EVENT.CLICK:r.type="GET";break;case a.EVENT.SUBMIT:switch(r.type=j.currentTarget.method.toUpperCase(),r.type){case"POST":jQuery(j.currentTarget).has(":file").length?"function"==typeof FormData&&(r.data=(new FormData)(j.currentTarget),r.contentType=!1,r.processData=!1):r.data=jQuery(j.currentTarget).serializeArray();break;case"GET":}break;case a.EVENT.POPSTATE:r.type="GET"}if(r=jQuery.extend({},i.ajax,r,{xhr:i.callbacks.ajax.xhr?function(){var a;return a=h.util_.fire(i.callbacks.ajax.xhr,this,[j,i]),a="object"==typeof a?a:jQuery.ajaxSettings.xhr()}:undefined,beforeSend:i.callbacks.ajax.beforeSend||i.server.header?function(a,b){i.server.header&&a.setRequestHeader(i.nss.requestHeader,"true"),"object"==typeof i.server.header&&(a.setRequestHeader(i.nss.requestHeader,"true"),i.server.header.area&&a.setRequestHeader(i.nss.requestHeader+"-Area",this.app_.chooseArea(i.area,document,document)),i.server.header.head&&a.setRequestHeader(i.nss.requestHeader+"-Head",i.load.head),i.server.header.css&&a.setRequestHeader(i.nss.requestHeader+"-CSS",i.load.css.toString()),i.server.header.script&&a.setRequestHeader(i.nss.requestHeader+"-Script",i.load.script.toString())),h.util_.fire(i.callbacks.ajax.beforeSend,this,[j,i,a,b])}:undefined,dataFilter:i.callbacks.ajax.dataFilter?function(a,b){return h.util_.fire(i.callbacks.ajax.dataFilter,this,[j,i,a,b])||a}:undefined,success:this.model_.isDeferrable?null:b,error:this.model_.isDeferrable?null:c,complete:this.model_.isDeferrable?null:d}),o=jQuery.ajax(r),o.location=i.destLocation.cloneNode(),this.model_.setPageXHR(o),!this.model_.isDeferrable)return;var p=this.wait_(k);this.page_.setWait(p),jQuery.when(this.model_.getPageXHR(),p,jQuery.when.apply(null,this.model_.getDataXHR())).done(e).fail(f).always(g)}},b.prototype.balance_=function(a){var b=(this.setting_,document.createElement("a"));return b.href=a,b.host=this.host_||b.host,b},b.prototype.bind_=function(a){var b=this;return(a||[]).map(function(a){return a.url=b.util_.canonicalizeUrl(a.url),a.url.indexOf("//")>-1?a:(a.url=b.balance_(a.url).href,a)}).map(jQuery.ajax).map(function(a,c){return a.done(function(a,d,e){var f=a;switch(e.getResponseHeader("Content-Type").split("/").pop()){case"json":if(e.responseJSON)break;if(b.jsons_[c])for(var g in f)b.jsons_[c][g]=f[g];else b.jsons_[c]=f}})})},b.prototype.wait_=function(a){var b=jQuery.Deferred();return a?(setTimeout(function(){b.resolve()},a),b):b.resolve()},b.prototype.chooseArea=function(a,b,c){},b.prototype.dispatchEvent=function(a,b,c,d){},b}();b.PageFetch=c}(c=b.APP||(b.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e){this.Record_=b,this.model_=c,this.balancer_=d,this.page_=e,this.hash_=function(a){return a.nss.url},this.table_={},this.order_=[],this.fetch_=a.PageFetch}return b.prototype.fetchRecord=function(a,b,c,d){this.getRecord(a).state(a)?this.pullRecord(a,b,c,d):this.pullRecord(a,b,c,d)},b.prototype.pullRecord=function(a,b,c,d){var e=this;new this.fetch_(this.model_,this.page_,this.balancer_,a,b,function(a,b,d,f,g,h,i){var j=e.setRecord(a,e.getRecord(a).data.data()||"",f,g,h,i);c(j,a,b)},function(a,b,c,f,g,h,i){var j=e.setRecord(a,e.getRecord(a).data.data()||"",f,g,h,i);d(j,a,b)})},b.prototype.getRecord=function(a){return this.table_[this.hash_(a)]=this.table_[this.hash_(a)]||new this.Record_},b.prototype.setRecord=function(a,b,c,d,e,f){return this.cleanRecords_(a),this.addOrder_(a),this.table_[this.hash_(a)]=new this.Record_(a.nss.url,b,c,d,e,f)},b.prototype.removeRecord=function(a){return this.removeOrder_(a),this.table_[this.hash_(a)]=new this.Record_},b.prototype.clearRecord=function(){this.order_.splice(0,this.order_.length);for(var a in this.table_)delete this.table_[a]},b.prototype.cleanRecords_=function(a){if(a.cache.limit)for(;this.order_.length>=a.cache.limit;)this.removeRecord(this.order_.pop())},b.prototype.addOrder_=function(a){this.removeOrder_(a),this.order_.unshift(a)},b.prototype.removeOrder_=function(a){for(var b=this.order_.length;b--;)this.order_[b].nss.url===a.nss.url&&this.order_.splice(b,1)},b}();a.PageProvider=b}(b=a.APP||(a.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(b,c,d,e,f,g,h){this.model_=b,this.page_=c,this.data_=d,this.balancer_=e,this.setting_=f,this.event_=g,this.record_=h,this.util_=a.LIBRARY.Utility,this.loadwaits_=[],this.main_()}return b.prototype.main_=function(){var b=this.record_,c=this.setting_,d=this.event_,e=c.speedcheck,f=this.model_.speed;if(e&&f.time.push(f.now()-f.fire),e&&f.name.push("fetch("+f.time.slice(-1)+")"),++this.page_.count,this.page_.loadtime=this.page_.loadtime&&(new Date).getTime()-this.page_.loadtime,c.cache.mix&&a.EVENT.POPSTATE!==d.type.toLowerCase()&&(new Date).getTime()-d.timeStamp<=c.cache.mix)return this.model_.fallback(d);try{if(this.page_.landing=null,!~(b.data.jqXHR().getResponseHeader("Content-Type")||"").toLowerCase().search(c.contentType))throw new Error("throw: content-type mismatch");if(this.srcTitle_=jQuery(b.data.jqXHR().responseText.match(/<title(?:\s.*?[^\\])?>(?:.*?[^\\])?<\/title>|$/i).pop()).text(),this.dstTitle_=document.title,this.redirect_(),this.blur_(),this.dispatchEvent(window,c.nss.event.pjax.unload,!1,!1),this.url_(),!this.model_.comparePageByUrl(c.destLocation.href,window.location.href))throw new Error("throw: location mismatch");this.document_()}catch(g){if(!g)return;this.model_.getCache(window.location.href)&&this.model_.removeCache(c.destLocation.href),this.model_.fallback(d)}},b.prototype.isRegister_=function(b,c){if(b.destLocation.href===b.origLocation.href)return!1;switch(c.type.toLowerCase()){case a.EVENT.CLICK:case a.EVENT.SUBMIT:return!0;case a.EVENT.POPSTATE:return!1}},b.prototype.isReplace_=function(b,c){switch(c.type.toLowerCase()){case a.EVENT.CLICK:case a.EVENT.SUBMIT:return jQuery(c.currentTarget).is(b.replace);case a.EVENT.POPSTATE:return!1}},b.prototype.isCacheUsable_=function(b,c){switch(!0){case!c.cache.click&&!c.cache.submit&&!c.cache.popstate:case a.EVENT.SUBMIT===b.type.toLowerCase()&&!c.cache[b.currentTarget.method.toLowerCase()]:return!1;default:return!0}},b.prototype.redirect_=function(){var b=this,c=this.setting_,d=this.event_,e=(jQuery('head meta[http-equiv="Refresh"][content*="URL="]').attr("content")||"").match(/(?:\d+;\s*)(.+)|$/).shift();if(e&&!this.model_.comparePageByUrl(c.destLocation.href,e)){var f=c.destLocation.cloneNode();if(f.href=e,this.util_.fire(c.callbacks.update.redirect.before,c,[d,c,f.cloneNode(),c.origLocation.cloneNode(),c.destLocation.cloneNode()])!==!1){switch(!0){case!c.redirect:case f.protocol!==c.destLocation.protocol:case f.host!==c.destLocation.host:case a.EVENT.SUBMIT===d.type.toLowerCase()&&"GET"!==d.currentTarget.method.toUpperCase():switch(d.type.toLowerCase()){case a.EVENT.CLICK:case a.EVENT.SUBMIT:window.location.assign(f.href);break;case a.EVENT.POPSTATE:window.location.replace(f.href)}throw!1;default:switch(jQuery[a.DEF.NAME].enable(),d.type.toLowerCase()){case a.EVENT.CLICK:case a.EVENT.SUBMIT:setTimeout(function(){return jQuery[a.DEF.NAME].click(f.href)},0);break;case a.EVENT.POPSTATE:window.history.replaceState(window.history.state,this.srcTitle_,f.href),this.isRegister_(c,d)&&c.fix.location&&!this.util_.compareUrl(c.destLocation.href,window.location.href)&&(jQuery[a.DEF.NAME].disable(),window.history.back(),window.history.forward(),jQuery[a.DEF.NAME].enable()),setTimeout(function(){return b.dispatchEvent(window,a.EVENT.POPSTATE,!1,!1)},0)}throw!1}this.util_.fire(c.callbacks.update.redirect.after,c,[d,c,f.cloneNode(),c.origLocation.cloneNode(),c.destLocation.cloneNode()])===!1}}},b.prototype.blur_=function(){var a=this.setting_,b=this.event_;this.util_.fire(a.callbacks.update.blur.before,a,[b,a,a.origLocation.cloneNode(),a.destLocation.cloneNode()])!==!1&&(jQuery(document.activeElement).not("body").blur(),this.util_.fire(a.callbacks.update.blur.after,a,[b,a,a.origLocation.cloneNode(),a.destLocation.cloneNode()])===!1)},b.prototype.url_=function(){var b=this.setting_,c=this.event_;return this.model_.location.href=b.destLocation.href,this.util_.fire(b.callbacks.update.url.before,b,[c,b,b.origLocation.cloneNode(),b.destLocation.cloneNode()])===!1?void(b.destLocation.href=this.util_.canonicalizeUrl(window.location.href)):(this.isReplace_(b,c)?(window.history.replaceState(this.util_.fire(b.state,b,[c,b,b.origLocation.cloneNode(),b.destLocation.cloneNode()]),this.srcTitle_,b.destLocation.href),b.fix.location&&!this.util_.compareUrl(b.destLocation.href,window.location.href)&&window.location.replace(b.destLocation.href)):this.isRegister_(b,c)&&(window.history.pushState(this.util_.fire(b.state,b,[c,b,b.origLocation.cloneNode(),b.destLocation.cloneNode()]),~window.navigator.userAgent.toLowerCase().indexOf("opera")?this.dstTitle_:this.srcTitle_,b.destLocation.href),b.fix.location&&!this.util_.compareUrl(b.destLocation.href,window.location.href)&&(jQuery[a.DEF.NAME].disable(),window.history.back(),window.history.forward(),jQuery[a.DEF.NAME].enable())),this.util_.fire(b.callbacks.update.url.after,b,[c,b,b.origLocation.cloneNode(),b.destLocation.cloneNode()])===!1?void(b.destLocation.href=this.util_.canonicalizeUrl(window.location.href)):void 0)},b.prototype.document_=function(){var b=this,c=this.setting_,d=this.event_;if(c.load.script&&!this.page_.loadedScripts[""]){var e=this.page_.loadedScripts;e[""]=!0,jQuery("script").each(function(){var a=this;a.src&&(e[a.src]=!c.load.reload||!jQuery(a).is(c.load.reload))})}this.srcDocument_=this.page_.parser.parse(this.record_.data.jqXHR().responseText,c.destLocation.href),this.dstDocument_=document;var f=c.speedcheck,g=this.model_.speed;if(f&&g.time.push(g.now()-g.fire),f&&g.name.push("parse("+g.time.slice(-1)+")"),this.area_=this.chooseArea(c.area,this.srcDocument_,this.dstDocument_),!this.area_)throw new Error("throw: area notfound");this.areas_=this.area_.match(/(?:[^,]+?|\(.*?\)|\[.*?\])+/g),this.overwriteDocumentByCache_(),c.fix.noscript&&this.escapeNoscript_(this.srcDocument_),c.fix.reference&&this.fixReference_(c.origLocation.href,this.dstDocument_),this.rewrite_(),this.title_(),c.fix.history&&this.data_.saveTitle(),this.data_.saveExpires(this.record_.data.url(),this.record_.data.host(),this.record_.data.expires()),this.head_(),f&&g.time.push(g.now()-g.fire),f&&g.name.push("head("+g.time.slice(-1)+")"),this.content_(),this.focus_(),this.dispatchEvent(document,c.nss.event.pjax.DOMContentLoaded,!1,!1),f&&g.time.push(g.now()-g.fire),f&&g.name.push("content("+g.time.slice(-1)+")"),this.balance_(),this.css_('link[rel~="stylesheet"], style'),jQuery(window).one(a.DEF.NAME+":rendering",function(e){e.preventDefault(),e.stopImmediatePropagation();var h=function(a){return b.model_.comparePageByUrl(c.destLocation.href,window.location.href)?(b.dispatchEvent(document,c.nss.event.pjax.ready,!1,!1),jQuery(b.area_).each(function(a,b){return jQuery(b).width()}),jQuery.when?jQuery.Deferred().resolve():a()):void 0},i=function(e){return b.model_.comparePageByUrl(c.destLocation.href,window.location.href)?(b.util_.fire(c.callback,c,[d,c]),setTimeout(function(){switch(d.type.toLowerCase()){case a.EVENT.CLICK:case a.EVENT.SUBMIT:b.model_.overlay(c)||b.scrollByHash_(c)||b.scroll_(!0);break;case a.EVENT.POPSTATE:b.model_.overlay(c)||b.scroll_(!0)}},100),b.dispatchEvent(document,c.nss.event.pjax.render,!1,!1),f&&g.time.push(g.now()-g.fire),f&&g.name.push("render("+g.time.slice(-1)+")"),jQuery.when?jQuery.when.apply(jQuery,b.loadwaits_):e()):void 0},j=function(){return b.model_.comparePageByUrl(c.destLocation.href,window.location.href)?(b.dispatchEvent(window,c.nss.event.pjax.load,!1,!1),f&&g.time.push(g.now()-g.fire),f&&g.name.push("load("+g.time.slice(-1)+")"),f&&console.log(g.time),f&&console.log(g.name),b.script_("[src][defer]"),jQuery.when&&jQuery.Deferred().resolve()):jQuery.when&&jQuery.Deferred().reject()};if(b.scroll_(!1),100>b.page_.loadtime&&c.reset.type.match(d.type.toLowerCase())&&!jQuery('form[method][method!="GET"]').length)switch(!1){case b.page_.count<c.reset.count||!c.reset.count:case(new Date).getTime()<c.reset.time+b.page_.time||!c.reset.time:throw new Error("throw: reset")}var k=b.script_(":not([defer]), :not([src])");if(jQuery.when){var l=jQuery.Deferred().pipe?"pipe":"then";jQuery.when.apply(jQuery,k)[l](function(){return h()})[l](function(){return i()})[l](function(){return j()})}else h(function(){return i(function(){return j()})})}).trigger(a.DEF.NAME+":rendering")},b.prototype.overwriteDocumentByCache_=function(){var a=this.setting_,b=this.event_,c=this.model_.getCache(a.destLocation.href);if(this.isCacheUsable_(b,a)&&c&&c.data){var d=a.fix.noscript?this.restoreNoscript_(c.data):c.data,e=this.page_.parser.parse(d,a.destLocation.href),f=this.srcDocument_;f.title=e.title;for(var g,h,i=0;this.areas_[i];i++){if(g=jQuery(this.areas_[i],e).clone(),h=jQuery(this.areas_[i],f),!g.length||!h.length||g.length!==h.length)throw new Error("throw: area mismatch");for(var j=0;g[j];j++)h[j].parentNode.replaceChild(g[j],h[j])}}},b.prototype.rewrite_=function(){function a(a){if(!a)return{};switch(a.getResponseHeader("Content-Type").split("/").pop()){case"json":return a.responseJSON}}var b=this.setting_,c=this.event_;b.rewrite&&this.util_.fire(b.callbacks.update.rewrite.before,b,[c,b,this.srcDocument_,this.dstDocument_])!==!1&&(this.util_.fire(b.rewrite,b,[this.srcDocument_,this.area_,this.record_.data.host(),this.record_.data.bind().map(a)]),this.util_.fire(b.callbacks.update.rewrite.before,b,[c,b,this.srcDocument_,this.dstDocument_])===!1)},b.prototype.title_=function(){var a=this.setting_,b=this.event_;this.util_.fire(a.callbacks.update.title.before,a,[b,a,this.srcDocument_.title,this.dstDocument_.title])!==!1&&(this.dstDocument_.title=this.srcDocument_.title,this.util_.fire(a.callbacks.update.title.after,a,[b,a,this.srcDocument_.title,this.dstDocument_.title])===!1)},b.prototype.head_=function(){var a=this.setting_,b=this.event_,c=this.srcDocument_,d=this.dstDocument_;if(a.load.head&&this.util_.fire(a.callbacks.update.head.before,a,[b,a,this.srcDocument_.querySelector("head"),this.dstDocument_.querySelector("head")])!==!1){for(var e,f="base, meta, link",g=jQuery(c.head).children(f).filter(a.load.head).not(a.load.ignore).not('link[rel~="stylesheet"], style, script'),h=jQuery(d.head).children(f).filter(a.load.head).not(a.load.ignore).not('link[rel~="stylesheet"], style, script'),i=jQuery(),j=h,k=0;e=g[k];k++){for(var l=0;j[l];l++)if(j[l].tagName===e.tagName&&j[l].outerHTML===e.outerHTML){if(i.length){var m=h[h.index(j[l])-1];m?jQuery(m).after(i.clone()):j.eq(l).before(i.clone()),i=jQuery()}j=j.not(j[l]),e=null;break}i=i.add(e)}jQuery("title",d).before(i.clone()),j.remove(),this.util_.fire(a.callbacks.update.head.after,a,[b,a,this.srcDocument_.querySelector("head"),this.dstDocument_.querySelector("head")])===!1}},b.prototype.content_=function(){function a(){if(jQuery.Deferred){var a=jQuery.Deferred();switch(this.tagName.toLowerCase()){case"img":jQuery(this).one("load error abort",a.resolve);break;case"iframe":case"frame":jQuery(this).one("load",a.resolve)}return a}}var b=this,c=this.setting_,d=this.event_,e=this.srcDocument_,f=this.dstDocument_;if(this.util_.fire(c.callbacks.update.content.before,c,[d,c,jQuery(this.area_,this.srcDocument_).get(),jQuery(this.area_,this.dstDocument_).get()])!==!1){jQuery(this.area_).children("."+c.nss.elem+"-check").remove();for(var g,h,i=0;this.areas_[i];i++){if(g=jQuery(this.areas_[i],e),h=jQuery(this.areas_[i],f),!g.length||!h.length||g.length!==h.length)throw new Error("throw: area mismatch");g=g.map(function(a,b){return document.importNode(b,!0)}),g.find("script").each(function(a,c){return b.escapeScript_(c)}),this.loadwaits_=this.loadwaits_.concat(g.find("img, iframe, frame").map(a).get());for(var j=0;g[j];j++)h[j].parentNode.replaceChild(g[j],h[j]),document.body===g[j]&&(jQuery.each(g[j].attributes,function(a,b){return h[j].removeAttribute(b.name)}),jQuery.each(g[j].attributes,function(a,b){return h[j].setAttribute(b.name,b.value)}));h=jQuery(this.areas_[i],f),h.find("script").each(function(a,c){return b.restoreScript_(c)})}this.util_.fire(c.callbacks.update.content.after,c,[d,c,jQuery(this.area_,this.srcDocument_).get(),jQuery(this.area_,this.dstDocument_).get()])===!1}},b.prototype.focus_=function(){var a=this.setting_,b=this.event_;this.util_.fire(a.callbacks.update.focus.before,a,[b,a,a.origLocation.cloneNode(),a.destLocation.cloneNode()])!==!1&&(jQuery("body, input[autofocus], textarea[autofocus]").last().not(document.activeElement).focus(),this.util_.fire(a.callbacks.update.focus.after,a,[b,a,a.origLocation.cloneNode(),a.destLocation.cloneNode()])===!1)},b.prototype.balance_=function(){var a=this,b=this.setting_,c=this.event_;!b.balance.active||this.page_.loadtime<100||[this.record_.data.jqXHR()].concat(this.record_.data.bind()).forEach(function(d){var e=a.balancer_.sanitize(d,b)||a.record_.data.host()||"",f=a.page_.loadtime,g=a.balancer_.score(f,d.responseText.length);if(a.util_.fire(b.callbacks.update.balance.before,b,[c,b,e,a.page_.loadtime,d.responseText.length])!==!1){var h=a.data_.getServerBuffer(b.destLocation.href),g=a.balancer_.score(f,d.responseText.length);f=h&&!h.state&&h.time?Math.round((h.time+f)/2):f,g=h&&!h.state&&h.score?Math.round((h.score+g)/2):g,a.data_.saveServer(e,(new Date).getTime()+b.balance.server.expires,f,g,0),a.balancer_.changeServer(a.balancer_.chooseServer(b),b),a.util_.fire(b.callbacks.update.balance.after,b,[c,b,e,a.page_.loadtime,d.responseText.length])===!1}})},b.prototype.css_=function(a){function b(){return jQuery.contains(f.head,this)}function c(){return jQuery.contains(f.body,this)}var d=this.setting_,e=this.event_,f=this.srcDocument_,g=this.dstDocument_;if(d.load.css){var h="link, style",i=jQuery(h,f).filter(a).not(jQuery("noscript",f).find(h)),j=jQuery(h,g).filter(a).not(jQuery("noscript",f).find(h)),k=jQuery(),l=j;if(this.util_.fire(d.callbacks.update.css.before,d,[e,d,i.get(),j.get()])!==!1){i=i.not(d.load.ignore),j=i.not(d.load.ignore);for(var m,n=0;m=i[n];n++){for(var o,p=0;l[p];p++){switch(m.tagName.toLowerCase()){case"link":o=m.href===l[p].href;break;case"style":o=this.util_.trim(m.innerHTML)===this.util_.trim(l[p].innerHTML)}if(o){if(k.length){if(jQuery.contains(g.body,l[p])&&k.first().parents("head").length)jQuery(g.head).append(k.filter(b).clone()),l.eq(p).before(k.filter(c).clone());else{var q=j[j.index(l[p])-1];q?jQuery(q).after(k.clone()):l.eq(p).before(k.clone())}k=jQuery()}l=l.not(l[p]),p-=Number(!!p),m=null;break}}k=k.add(m)}if(jQuery(g.head).append(k.filter(b).clone()),jQuery(g.body).append(k.filter(c).clone()),
l.remove(),j=jQuery(h,g).filter(a).not(jQuery("noscript",f).find(h)),this.util_.fire(d.callbacks.update.css.after,d,[e,d,i.get(),j.get()])!==!1){var r=d.speedcheck,s=this.model_.speed;r&&s.time.push(s.now()-s.fire),r&&s.name.push("css("+s.time.slice(-1)+")")}}}},b.prototype.script_=function(a){var b=this,c=this.setting_,d=this.event_,e=this.srcDocument_,f=this.dstDocument_,g=[],h=[];if(!c.load.script)return g;var i="script",j=jQuery(i,e).filter(a).not(jQuery("noscript",e).find(i)),k=jQuery(i,f).filter(a).not(jQuery("noscript",f).find(i)),l=this.page_.loadedScripts,m=/^$|(?:application|text)\/(?:java|ecma)script/i,n=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;if(this.util_.fire(c.callbacks.update.script.before,c,[d,c,j.get(),k.get()])===!1)return g;j=j.not(c.load.ignore);for(var o,p=function(a,d){if(!b.model_.comparePageByUrl(c.destLocation.href,window.location.href))return!1;a.src&&(l[a.src]=!c.load.reload||!jQuery(a).is(c.load.reload));try{if(b.model_.isDeferrable){if("string"!=typeof d)throw d;eval.call(window,d)}else a.hasAttribute("src")?jQuery.ajax(jQuery.extend(!0,{},c.ajax,c.load.ajax,{url:a.src,dataType:"script",async:!1,global:!1,success:function(){return null},error:function(a){throw a}})):eval.call(window,(a.text||a.textContent||a.innerHTML||"").replace(n,""));try{a.hasAttribute("src")&&b.dispatchEvent(a,"load",!1,!1)}catch(e){}}catch(f){try{a.hasAttribute("src")&&b.dispatchEvent(a,"error",!1,!1)}catch(e){}if(!0===c.load.error)throw f;b.util_.fire(c.load.error,c,[f,a])}},q=0;o=j[q];q++)if(m.test(o.type||"")&&(o.hasAttribute("src")?!l[o.src]:this.util_.trim(o.innerHTML))){var r=jQuery(o).parent(c.load.log)[0];if(r&&!jQuery(o).parents(this.area_).length){var s=jQuery(r.id||r.tagName,f)[0],t=o.cloneNode(!0);this.escapeScript_(t),s.appendChild(t),this.restoreScript_(t)}!function(a){var d=b.model_.isDeferrable&&jQuery.Deferred();a.hasAttribute("src")&&a.getAttribute("src")?(l[a.src]=!c.load.reload||!jQuery(a).is(c.load.reload),a.hasAttribute("async")?jQuery.ajax(jQuery.extend({},c.ajax,c.load.ajax,{url:a.src,dataType:"script",async:!0,global:!1,success:function(){return b.dispatchEvent(a,"load",!1,!1)},error:function(){return b.dispatchEvent(a,"error",!1,!1)}})):d?(jQuery.ajax(jQuery.extend({},c.ajax,c.load.ajax,{url:a.src,dataType:"text",async:!0,global:!1,success:function(b){return d.resolve([a,b])},error:function(b){return d.resolve([a,b])}})),g.push(d)):h.push(a)):a.hasAttribute("src")||(d?g.push(d.resolve([a,(a.text||a.textContent||a.innerHTML||"").replace(n,"")])):h.push(a))}(o)}try{this.model_.isDeferrable?jQuery.when.apply(jQuery,g).always(function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return jQuery.each(a,function(a,c){return p.apply(b,c)})}):jQuery.each(h,function(a,b){return p(b)})}catch(u){throw setTimeout(function(){return b.model_.fallback(d)},1),u}if(k=jQuery(i,f).filter(a).not(jQuery("noscript",f).find(i)),this.util_.fire(c.callbacks.update.script.after,c,[d,c,j.get(),k.get()])===!1)return g;var v=c.speedcheck,w=this.model_.speed;return v&&w.time.push(w.now()-w.fire),v&&w.name.push("script("+w.time.slice(-1)+")"),g},b.prototype.scroll_=function(b){var c=this.setting_,d=this.event_;if(this.util_.fire(c.callbacks.update.scroll.before,c,[d,c])!==!1){var e,f;switch(d.type.toLowerCase()){case a.EVENT.CLICK:case a.EVENT.SUBMIT:e=b&&"function"==typeof c.scrollLeft?this.util_.fire(c.scrollLeft,c,[d,c,c.origLocation.cloneNode(),c.destLocation.cloneNode()]):c.scrollLeft,e=e>=0?e:0,e=e===!1||null===e?jQuery(window).scrollLeft():parseInt(Number(e)+"",10),f=b&&"function"==typeof c.scrollTop?this.util_.fire(c.scrollTop,c,[d,c,c.origLocation.cloneNode(),c.destLocation.cloneNode()]):c.scrollTop,f=f>=0?f:0,f=f===!1||null===f?jQuery(window).scrollTop():parseInt(Number(f)+"",10),window.scrollTo(e,f);break;case a.EVENT.POPSTATE:b&&c.fix.scroll&&this.data_.loadScrollPosition()}b&&this.data_.saveScrollPosition(),this.util_.fire(c.callbacks.update.scroll.after,c,[d,c])===!1}},b.prototype.scrollByHash_=function(a){var b=a.destLocation.hash.replace(/^#/,"");if(!b)return!1;var c=jQuery("#"+b+", [name~="+b+"]").first();return c.length?(isFinite(c.offset().top)&&window.scrollTo(jQuery(window).scrollLeft(),parseInt(Number(c.offset().top)+"",10)),this.data_.saveScrollPosition(),!0):!1},b.prototype.fixReference_=function(a,b){function c(a,b){var c;switch(!0){case"href"in b:c="href";break;case"src"in b:c="src";break;default:return}switch(d){case 0:break;case 1:b[c]=j+b.getAttribute(c);break;case-1:b[c]=b.getAttribute(c).replace(j,"")}b.setAttribute(c,b[c].replace(i,"/"))}var d,e=a.replace(/[^\/]+$/,""),f=b.URL.replace(/[^\/]+$/,""),g=e.split("/").length,h=f.split("/").length,i=/^.+?\w\//,j=this.util_.repeat("../",Math.abs(g-h));switch(!0){case g===h:d=0;break;case h>g:d=1;break;case g>h:d=-1}jQuery("[href], [src]",b).not(['[href^="/"]','[href^= "http:"]','[href^= "https:"]','[src^= "/"]','[src^= "http:"]','[src^= "https:"]'].join(",")).each(c)},b.prototype.escapeNoscript_=function(a){function b(){jQuery(this).text(this.innerHTML)}jQuery("noscript",a).children().parent().each(b)},b.prototype.restoreNoscript_=function(a){var b=jQuery("<span/>");return a.replace(/(<noscript>)([^<>]+?)(<\/noscript>)/gim,function(a,c,d,e){return c+b.html(d).text()+e})},b.prototype.escapeScript_=function(a){jQuery.data(a,"source",a.src),jQuery.data(a,"code",a.innerHTML),a.removeAttribute("src"),a.innerHTML=""},b.prototype.restoreScript_=function(a){undefined!==jQuery.data(a,"code")&&(a.innerHTML=" ",jQuery.data(a,"source")?(a.src=jQuery.data(a,"source"),jQuery.removeData(a,"source")):a.removeAttribute("src"),a.innerHTML=jQuery.data(a,"code"),jQuery.removeData(a,"code"))},b.prototype.chooseArea=function(a,b,c){},b.prototype.dispatchEvent=function(a,b,c,d){},b}();b.PageUpdate=c}(c=b.APP||(b.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(){this.util_=a.LIBRARY.Utility,this.sandbox_cache_={}}return b.prototype.sandbox_=function(a){var b=this;return void 0===a&&(a=window.location.href),a=this.util_.canonicalizeUrl(a).split("#").shift(),this.sandbox_cache_[a]&&"object"==typeof this.sandbox_cache_[a].document&&this.sandbox_cache_[a].document.URL===a||jQuery('<iframe srcdoc="<!DOCTYPE html>" sandbox="allow-same-origin"></iframe>').appendTo("body").each(function(c,d){b.sandbox_cache_[a]=d.contentWindow,b.sandbox_cache_[a].document.open(),b.sandbox_cache_[a].document.close()}).remove(),this.sandbox_cache_[a]},b.prototype.test_=function(a){try{var b='<html lang="en" class="html"><head><title>&amp;</title><link href="/"><noscript><style>/**/</style></noscript></head><body><noscript>noscript</noscript><a href="/"></a></body></html>',c=this.parse(b,window.location.href,a);switch(!1){case!!c:case c.URL&&decodeURI(c.URL)===decodeURI(window.location.href):case"&"===c.title:case!!c.querySelector('html.html[lang="en"]'):case!!c.querySelector("head>link").href:case!!c.querySelector("head>noscript").innerHTML:case!!c.querySelector("body>noscript").innerHTML:case!!c.querySelector("body>a").href:throw!0}return a}catch(d){}},b.prototype.parse=function(a,b,c){function d(a,b){var c=document.createElement("div");c.innerHTML=b.match(/<html(?:\s.*?[^\\])?>|$/i).shift().replace(/html/i,"div")||"<div>";for(var d,e=c.firstChild.attributes,f=0;d=e[f];f++)a.documentElement.setAttribute(d.name,d.value);var c=document.createElement("html");for(c.innerHTML=b.replace(/^.*?<html(?:\s.*?[^\\])?>/im,""),a.documentElement.removeChild(a.head),a.documentElement.removeChild(a.body);c.childNodes.length;)a.documentElement.appendChild(c.childNodes[0]);return a}void 0===b&&(b=""),void 0===c&&(c=this.mode_),a+=~a.search(/<title[\s>]/i)?"":"<title></title>";var e;switch(c){case"dom":e=(new window.DOMParser).parseFromString(a,"text/html");break;case"doc":if(e=document.implementation.createHTMLDocument(""),"object"!=typeof e.activeElement||!e.activeElement)break;"function"==typeof window.DOMParser&&(e.title=(new window.DOMParser).parseFromString(a.match(/<title(?:\s.*?[^\\])?>(?:.*?[^\\])?<\/title>|$/i),"text/html").title),e.open(),e.write(a),e.close(),e.title!==e.querySelector("title").textContent&&(e.title=e.querySelector("title").textContent);break;case"manipulate":e=d(document.implementation.createHTMLDocument(""),a);break;case null:e=null;break;default:switch(/webkit|firefox|trident|$/i.exec(window.navigator.userAgent).shift().toLowerCase()){case"webkit":this.mode_=this.test_("doc")||this.test_("dom")||this.test_("manipulate");break;case"firefox":this.mode_=this.test_("dom")||this.test_("doc")||this.test_("manipulate");break;case"trident":this.mode_=this.test_("manipulate")||this.test_("dom")||this.test_("doc");break;default:this.mode_=this.test_("dom")||this.test_("doc")||this.test_("manipulate")}e=this.mode_&&this.parse(a,b)}return e},b}();b.PageParser=c;var d=function(){function a(){a.instance_=a.instance_||new c}return a.prototype.singleton_=function(){return a.instance_},a.prototype.parse=function(a,b){return this.singleton_().parse(a,b)},a}();b.PageParserSingleton=d}(c=b.APP||(b.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c;!function(b){a.MIXIN(b.PageFetch,[b.PageUtility]),a.MIXIN(b.PageUpdate,[b.PageUtility]);var c=function(){function c(c,d,e){var f=this;this.model_=c,this.data_=d,this.balancer_=e,this.util_=a.LIBRARY.Utility,this.parser=new b.PageParserSingleton,this.provider=new b.PageProvider(b.PageRecord,this.model_,this.balancer_,this),this.landing=this.util_.normalizeUrl(window.location.href),this.loadedScripts={},this.dataXHR=[],this.loadtime=0,this.count=0,this.time=(new Date).getTime(),setTimeout(function(){return f.parser.parse("")||f.model_.disable()},100)}return c.prototype.transfer=function(b,c){switch(c.type.toLowerCase()){case a.EVENT.CLICK:this.data_.saveTitle(),this.data_.saveScrollPosition();break;case a.EVENT.SUBMIT:this.data_.saveTitle(),this.data_.saveScrollPosition();break;case a.EVENT.POPSTATE:this.data_.saveTitle(b.origLocation.href,document.title),b.fix.history&&this.data_.loadTitle()}b=jQuery.extend(!0,{},b),b.origLocation=b.origLocation.cloneNode(),b.destLocation=b.destLocation.cloneNode(),b=a.FREEZE(b),this.fetch_(b,c)},c.prototype.getWait=function(){return this.wait_},c.prototype.setWait=function(a){return this.wait_&&this.wait_.state&&"pending"===this.wait_.state()&&this.wait_.reject(),this.wait_=a},c.prototype.fetch_=function(a,b){var c=this;this.provider.fetchRecord(a,b,function(a,b,d){return c.success_(a,b,d)},function(a,b,d){return c.failure_(a,b,d)})},c.prototype.success_=function(a,c,d){new b.PageUpdate(this.model_,this,this.data_,this.balancer_,c,d,a)},c.prototype.failure_=function(a,b,c){var d=this;b.fallback&&"abort"!==a.data.textStatus()&&(this.data_.saveExpires(b.destLocation.href,"",0),b.balance.active&&(this.data_.saveServer(a.data.host(),(new Date).getTime()+b.balance.server.expires,0,0,(new Date).getTime()),this.balancer_.changeServer(this.balancer_.chooseServer(b),b)),setTimeout(function(){return d.model_.fallback(c)},100))},c.prototype.chooseArea=function(a,b,c){},c.prototype.dispatchEvent=function(a,b,c,d){},c}();b.Page=c}(c=b.APP||(b.APP={}))}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(MODULE){var MODEL;!function(MODEL){var APP;!function(APP){MODULE.MIXIN(APP.Page,[APP.PageUtility]);var Main=function(){function Main(a,b){this.model_=a,this.controller_=b,this.util_=MODULE.LIBRARY.Utility,this.settings_={},this.data=new APP.Data(this.model_),this.balancer=new APP.Balancer(this.data),this.page=new APP.Page(this.model_,this.data,this.balancer)}return Main.prototype.initialize=function(a,b){var c=this;this.controller_.view(a,b),this.balancer.enable(b),this.balancer.changeServer(this.balancer.chooseServer(b),b),this.data.loadBuffers(),setTimeout(function(){return c.page.landing=null},1500)},Main.prototype.configure=function(destination){var _this=this,event=destination.preventDefault?destination:null;switch(event&&"object"==typeof event&&event.type.toLowerCase()){case MODULE.EVENT.CLICK:return this.configure(event.currentTarget);case MODULE.EVENT.SUBMIT:return this.configure(event.currentTarget);case MODULE.EVENT.POPSTATE:return this.configure(window.location);case null:}var url;switch(!0){case"string"==typeof destination:url=destination;break;case"href"in destination&&"string"==typeof destination.href:url=this.util_.normalizeUrl(destination.href);break;case"href"in destination&&"object"==typeof destination.href:url=this.util_.normalizeUrl(destination.href.baseVal);break;case"action"in destination:switch(url=this.util_.normalizeUrl(destination.action.replace(/[?#].*/,"")),destination.method.toUpperCase()){case"GET":url+="?"+jQuery(destination).serialize()}break;default:url=this.model_.location.href,this.option_=destination}var index=[this.util_.canonicalizeUrl(this.model_.location.href).slice(0,2048),this.util_.canonicalizeUrl(url).slice(0,2048)].join(" ");if(!this.option_)return null;if(index in this.settings_)return this.settings_[index];var origLocation=this.model_.location.cloneNode(),destLocation=this.model_.location.cloneNode();origLocation.href=this.util_.canonicalizeUrl(origLocation.href),destLocation.href=this.util_.canonicalizeUrl(url);var scope=this.scope_(this.option_,origLocation.href,destLocation.href)||null,initial={area:"body",link:"a:not([target])",filter:function(){var a=document.createElement("a");return a.href="string"==typeof this.href?this.href:this.href.baseVal,/^https?:/.test(a.href)&&/\/[^.]*$|\.(html?|php)$/.test(a.pathname.replace(/^\/?/,"/"))},form:null,replace:null,bind:null,rewrite:null,scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{dataType:"text"},contentType:"text/html",redirect:!0,cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,mix:0,limit:100,expires:{max:null,min:3e5}},buffer:{limit:30,delay:500},load:{head:"",css:!1,script:!1,ignore:'[src*="jquery.js"], [src*="jquery.min.js"], [href^="chrome-extension://"]',reload:"",log:"head, body",error:!0,ajax:{dataType:"script",cache:!0}},balance:{active:!1,bounds:["*"],weight:1,random:0,option:{server:{header:!1},ajax:{crossDomain:!0},callbacks:{ajax:{beforeSend:null}}},client:{hosts:[],support:{browser:/msie|trident.+ rv:|chrome|firefox|safari/i,redirect:/chrome|firefox|safari/i},cookie:{balance:"balanceable",redirect:"redirectable",host:"host"}},server:{header:"X-Ajax-Host",respite:6e5,expires:864e6}},wait:0,fallback:!0,reset:{type:"",count:100,time:108e5},fix:{location:!0,history:!0,scroll:!0,noscript:!0,reference:!0},database:{active:!0,revision:0,refresh:10},server:{query:null,header:!0},overlay:"",callback:null,callbacks:{ajax:{},update:{redirect:{},blur:{},url:{},rewrite:{},title:{},head:{},content:{},focus:{},scroll:{},css:{},script:{},balance:{}}},data:undefined},force={uid:MODULE.UUID(),ns:"",nss:undefined,speedcheck:undefined,origLocation:origLocation,destLocation:destLocation,scroll:{queue:[]},option:this.option_},compute=function(){setting.ns=setting.ns?setting.ns.split(".").sort().join("."):"";var nsArray=[MODULE.DEF.NAME].concat(setting.ns?setting.ns.split("."):[]),query=setting.server.query;switch(query&&typeof query){case"string":query=eval("({"+query.toString().match(/[^?=&]+=[^&]*/g).join("&").replace(/"/g,'\\"').replace(/([^?=&]+)=([^&]*)/g,'"$1": "$2"').replace(/&/g,",")+"})");case"object":query=jQuery.param(query);break;default:query=""}return{uid:undefined,ns:undefined,origLocation:undefined,destLocation:undefined,scroll:undefined,option:undefined,speedcheck:undefined,nss:{array:nsArray,name:nsArray.join("."),data:nsArray[0],url:_this.model_.convertUrlToKey(setting.destLocation.href,!0),event:{pjax:{fetch:[MODULE.EVENT.PJAX,"fetch"].join(":"),unload:[MODULE.EVENT.PJAX,"unload"].join(":"),DOMContentLoaded:[MODULE.EVENT.PJAX,"DOMContentLoaded"].join(":"),ready:[MODULE.EVENT.PJAX,"ready"].join(":"),render:[MODULE.EVENT.PJAX,"render"].join(":"),load:[MODULE.EVENT.PJAX,"load"].join(":")},click:[MODULE.EVENT.CLICK].concat(nsArray.join(":")).join("."),submit:[MODULE.EVENT.SUBMIT].concat(nsArray.join(":")).join("."),popstate:[MODULE.EVENT.POPSTATE].concat(nsArray.join(":")).join("."),scroll:[MODULE.EVENT.SCROLL].concat(nsArray.join(":")).join(".")},elem:nsArray.join("-"),requestHeader:["X",nsArray[0].replace(/^\w/,function(a){return a.toUpperCase()})].join("-")},fix:/android|iphone os|like mac os x/i.test(window.navigator.userAgent)?undefined:{location:!1},contentType:setting.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),database:{refresh:Math.min(setting.database.refresh,30)},reset:{type:(setting.reset.type||"").toLowerCase()},server:{query:query},timeStamp:(new Date).getTime()}},setting;return setting=jQuery.extend(!0,initial,scope||this.option_),setting=jQuery.extend(!0,setting,setting.balance.active&&setting.balance.option,force),setting=jQuery.extend(!0,setting,compute()),scope?(MODULE.FREEZE(setting,!0),this.settings_[index]=setting,setting):(this.settings_[index]=null,null)},Main.prototype.scope_=function(a,b,c){if(a=jQuery.extend(!0,{},a),!a.scope)return a;var d,e,f,g,h,i,j=a.scope;d=this.model_.convertUrlToKey(b,!0).match(/.+?\w(\/.*)/).pop(),e=this.model_.convertUrlToKey(c,!0).match(/.+?\w(\/.*)/).pop(),f=d.split("/");for(var k=f.length;k--;)if(g=f.slice(0,k+1).join("/"),g+="/"===d.charAt(g.length)?"/":"",g&&g in j){var l;if(j[g]instanceof Array?(h="",l=j[g]):(h=j[g],l=j[h]),l){l=l.concat();var m,n,o,p=[];o=i=m=n=undefined;for(var q,r=0;q=l[r];r++){if("#"===q.charAt(0)){if(~jQuery.inArray(q,p)||!(q.length>1)){h="";continue}p.push(q),h=q.slice(1),[].splice.apply(l,[r,1].concat(j[h],"#")),q=l[r]}if("inherit"===q)o=!0;else if("string"==typeof q){var s="!"===q.charAt(0);q=s?q.slice(1):q;var t="*"===q.charAt(0);q=t?q.slice(1):q,(t?~d.search(q):~d.indexOf(q))&&(s?m=!1:(m=!0,i=j["$"+h]||j["$"+q]||undefined)),(t?~e.search(q):~e.indexOf(q))&&(s?n=!1:(n=!0,i=j["$"+h]||j["$"+q]||undefined))}if(!1===m||!1===n)return null}if(m&&n)return jQuery.extend(!0,a,i);if(!o)break}}return undefined},Main}();APP.Main=Main}(APP=MODEL.APP||(MODEL.APP={}))}(MODEL=MODULE.MODEL||(MODULE.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(a){a.App=a.APP.Main}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){var b;!function(b){var c=function(c){function d(){c.call(this,a.State.initiate),this.controller_=new a.Controller(this).singleton(),this.app_=new b.App(this,this.controller_),this.util_=a.LIBRARY.Utility,this.isDeferrable=!!jQuery.when&&"1.006"<=jQuery().jquery.match(/\d[\d.]+\d/).pop().replace(/\.(\d+)/g,".00$1").replace(/0*(\d{3})/g,"$1"),this.location=document.createElement("a"),this.queue_=[]}return __extends(d,c),d.prototype.host=function(){return this.app_.balancer.host()},d.prototype.state=function(){return this.state_},d.prototype.main_=function(b,c){var d=this;switch(typeof c){case"object":b=b instanceof a.DEF.NAMESPACE?b:jQuery(document)[a.DEF.NAME](),a.FREEZE(c,!0);break;default:return b}if(!window.history||!window.history.pushState||!window.history.replaceState)return b;this.location.href=this.util_.normalizeUrl(window.location.href);var e=this.app_.configure(c);return e?(this.app_.data.connect(e),this.speed={fire:0,time:[],name:[],now:function(){return(new Date).getTime()}},jQuery(function(){d.app_.initialize(b,e),d.state_=d.state()===a.State.initiate?a.State.open:d.state(),d.overlay(e,!0)}),b):b},d.prototype.convertUrlToKey=function(a,b){return a=b?this.util_.canonicalizeUrl(a):a,this.util_.trim(a).split("#").shift()},d.prototype.compareKeyByUrl=function(a,b){return a=this.convertUrlToKey(a,!0),b=this.convertUrlToKey(b,!0),a===b},d.prototype.comparePageByUrl=function(a,b){return a=this.convertUrlToKey(a,!0),b=this.convertUrlToKey(b,!0),a===b},d.prototype.configure=function(a){return this.app_.configure(a)},d.prototype.isOperatable=function(b){if(a.State.open!==this.state())return!1;if(b.which>1||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey)return!1;var c;switch(b.type.toLowerCase()){case a.EVENT.CLICK:if(c=this.app_.configure(b.currentTarget),c&&!jQuery(b.currentTarget).filter(c.filter).length)return!1;break;case a.EVENT.SUBMIT:c=this.app_.configure(b.currentTarget);break;case a.EVENT.POPSTATE:c=this.app_.configure(window.location)}if(!c)return!1;if(c.origLocation.protocol!==c.destLocation.protocol||c.origLocation.host!==c.destLocation.host)return!1;switch(b.type.toLowerCase()){case a.EVENT.CLICK:if(this.comparePageByUrl(c.origLocation.href,c.destLocation.href)&&c.destLocation.hash)return!1;break;case a.EVENT.SUBMIT:break;case a.EVENT.POPSTATE:if(this.comparePageByUrl(c.origLocation.href,c.destLocation.href))return!1}return this.app_.page.chooseArea(c.area,document,document)?!0:!1},d.prototype.getPageXHR=function(){return this.app_.page.pageXHR},d.prototype.setPageXHR=function(a){return this.app_.page.pageXHR&&this.app_.page.pageXHR.readyState<4&&this.app_.page.pageXHR!==a&&this.app_.page.pageXHR.abort(),this.app_.page.pageXHR=a},d.prototype.getDataXHR=function(){return this.app_.page.dataXHR},d.prototype.setDataXHR=function(a){function b(b){switch(!0){case b>=c.length:case 4===c[b].readyState:case c.indexOf(a[b])>-1:return a[b]}return c[b].abort(),a[b]}a=a||[];var c=this.app_.page.dataXHR;return this.app_.page.dataXHR=Array.apply(null,Array(Math.max(a.length,this.app_.page.dataXHR.length))).map(function(a,c){return b(c)}).filter(function(a){return!!a})},d.prototype.click=function(b){b.timeStamp=(new Date).getTime();var c=b.currentTarget,d=(jQuery(c),this.app_.configure(c));switch(this.location.href=this.util_.normalizeUrl(window.location.href),!0){case!d:case b.isDefaultPrevented():case this.state()!==a.State.open:break;case this.isOperatable(b):this.app_.page.transfer(d,b),b.preventDefault();break;case this.isHashChange(d)&&this.overlay(d):b.preventDefault(),window.history.pushState(null,document.title,d.destLocation.href);break;case!b.originalEvent&&!jQuery(document).has(c).length:this.fallback(b)}},d.prototype.submit=function(b){b.timeStamp=(new Date).getTime();var c=b.currentTarget,d=(jQuery(c),this.app_.configure(c));switch(this.location.href=this.util_.normalizeUrl(window.location.href),!0){case!d:case b.isDefaultPrevented():case this.state()!==a.State.open:break;case this.isOperatable(b):this.app_.page.transfer(d,b),b.preventDefault();break;case!b.originalEvent&&!jQuery(document).has(c).length:this.fallback(b)}},d.prototype.popstate=function(b){if(!this.app_.page.landing||!this.util_.compareUrl(this.app_.page.landing,window.location.href)){b.timeStamp=(new Date).getTime();var c=this.app_.configure(window.location);switch(!0){case!c:!this.comparePageByUrl(this.location.href,window.location.href)&&this.fallback(b);break;case this.state()!==a.State.open:break;case this.isOperatable(b):this.app_.page.transfer(c,b);break;case this.isHashChange(c)&&this.overlay(c):break;case!this.comparePageByUrl(c.origLocation.href,window.location.href):this.fallback(b)}this.location.href=this.util_.normalizeUrl(window.location.href)}},d.prototype.scroll=function(a,b){for(var c,d=this;c=this.queue_.shift();)clearTimeout(c);c=setTimeout(function(){for(;c=d.queue_.shift();)clearTimeout(c);d.compareKeyByUrl(window.location.href,d.location.href)&&d.app_.data.saveScrollPosition()},300),this.queue_.push(c)},d.prototype.fallback=function(a){var b=this.configure(a);switch(!0){case b&&!b.fallback:case b&&!1===this.util_.fire(b.fallback,b,[a,b,b.origLocation.cloneNode(),b.destLocation.cloneNode()]):break;default:this.movePageNormally_(a)}},d.prototype.movePageNormally_=function(b){switch(b.type.toLowerCase()){case a.EVENT.CLICK:"string"==typeof b.currentTarget.href?window.location.assign(b.currentTarget.href):window.location.assign(b.currentTarget.href.baseVal);break;case a.EVENT.SUBMIT:switch(b.currentTarget.method.toUpperCase()){case"GET":window.location.assign(b.currentTarget.action.replace(/[?#].*/,"")+"?"+jQuery(b.currentTarget).serialize());break;case"POST":window.location.assign(b.currentTarget.action)}break;case a.EVENT.POPSTATE:window.location.reload()}},d.prototype.isHashChange=function(a){return!!a&&a.origLocation.href.replace(/#.*/,"")===a.destLocation.href.replace(/#.*/,"")&&a.origLocation.hash!==a.destLocation.hash},d.prototype.overlay=function(a,b){var c=this,d=a.destLocation.hash.replace(/^#/,"");if(!d||!a.overlay)return!1;var e=jQuery("#"+d+", [name~="+d+"]");if(e=e.add(e.nextUntil(":header")),e=e.filter(a.overlay).add(e.find(a.overlay)).first(),!e.length)return!1;this.isHashChange(a)&&(this.app_.data.loadScrollPosition(),setTimeout(function(){return c.app_.data.loadScrollPosition()},1));var f=jQuery("<div>");return e=e.clone(!0),f.addClass(a.nss.elem+"-overlay").css({background:"rgba(255, 255, 255, 0.8)",display:"none",position:"fixed",top:0,left:0,right:0,bottom:0,margin:0,padding:0,border:"none"}).append(e.css({position:"absolute",top:0,left:0,right:0,bottom:0,margin:"auto"}).show()),f.bind("click",f,function(a){a.target===a.currentTarget&&(window.history.pushState(window.history.state,document.title,window.location.href.replace(/#.*/,"")),c.location.href=c.util_.normalizeUrl(window.location.href),jQuery(a.data).fadeOut("fast",function(){return jQuery(a.data).remove()}))}),f.appendTo("body").fadeIn(b?0:100),jQuery(window).one("popstate",f,function(a){setTimeout(function(){return c.app_.data.loadScrollPosition()},1),jQuery(a.data).fadeOut("fast",function(){return jQuery(a.data).remove()})}),/trident/i.test(window.navigator.userAgent)&&e.width(e.width()),this.app_.data.saveScrollPosition(),!0},d.prototype.enable=function(){this.state_=a.State.open},d.prototype.disable=function(){this.state_=a.State.pause},d.prototype.getCache=function(a){var b=this.configure(this.convertUrlToKey(a));if(b){var c=this.app_.page.provider.getRecord(b);return c.state(b)||c.data.data()?{data:c.data.data(),textStatus:c.data.textStatus(),jqXHR:c.data.jqXHR(),expires:c.data.expires(),host:c.data.host()}:void this.removeCache(a)}},d.prototype.setCache=function(a,b,c,d){var e=this.configure(this.convertUrlToKey(a));if(e){var f=this.app_.page.provider.getRecord(e);this.app_.page.provider.setRecord(e,b||"",c||f.data.textStatus(),d||f.data.jqXHR(),this.app_.balancer.sanitize(d,e)||f.data.host()||"",null)}},d.prototype.removeCache=function(a){var b=this.configure(this.convertUrlToKey(a));b&&this.app_.page.provider.removeRecord(b)},d.prototype.clearCache=function(){this.app_.page.provider.clearRecord()},d.prototype.bypass=function(){return this.app_.balancer.bypass(this.app_.configure(window.location))},d}(b.Template);b.Main=c;var d=function(){function a(){a.instance_=a.instance_||new c}return a.singleton=function(){return a.instance_},a.prototype.singleton=function(){return a.singleton()},a}();b.Singleton=d}(b=a.MODEL||(a.MODEL={}))}(MODULE||(MODULE={}));var MODULE;!function(a){a.Model=a.MODEL.Singleton}(MODULE||(MODULE={}));var Module=function(){function a(){new MODULE.Model}return a}();new Module}(window,window.document,void 0,jQuery);

/*! jquery-visibilitytrigger v1.0.6 | (c) 2012, falsandtru | MIT Licence */
!new function(a,b,c){"use strict";var d;!function(a){var b;!function(a){a.NAME="visibilitytrigger",a.NAMESPACE=jQuery}(b=a.DEF||(a.DEF={}))}(d||(d={}));var d;!function(a){!function(a){a[a.blank=0]="blank",a[a.initiate=1]="initiate",a[a.open=2]="open",a[a.pause=3]="pause",a[a.lock=4]="lock",a[a.seal=5]="seal",a[a.error=6]="error",a[a.crash=7]="crash",a[a.terminate=8]="terminate",a[a.close=9]="close"}(a.State||(a.State={}));a.State}(d||(d={}));var d;!function(a){var b;!function(){}(b=a.MODEL||(a.MODEL={}))}(d||(d={}));var d;!function(a){var b;!function(){}(b=a.VIEW||(a.VIEW={}))}(d||(d={}));var d;!function(a){function b(a,b){for(var c=a.prototype,d=b.length;d--;){var e=b[d].prototype;for(var f in e)"constructor"!==f&&e.hasOwnProperty(f)&&(c[f]=e[f])}}function c(){function a(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16).toUpperCase()}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a)}function d(a,b){if(!Object.freeze||a===a.window||"ownerDocument"in a)return a;if(!Object.isFrozen(a)&&Object.freeze(a),!b)return a;for(var c in a){var e=a[c];~"object,function".indexOf(typeof e)&&e&&d(e,b)}return a}function e(a,b){if(!Object.seal||a===a.window||"ownerDocument"in a)return a;if(!Object.isSealed(a)&&Object.seal(a),!b)return a;for(var c in a){var d=a[c];~"object,function".indexOf(typeof d)&&d&&e(d,b)}return a}a.MIXIN=b,a.UUID=c,a.FREEZE=d,a.SEAL=e}(d||(d={}));var d;!function(a){var b;!function(b){var c=function(){function b(b){this.NAME=a.DEF.NAME,this.NAMESPACE=a.DEF.NAMESPACE,this.UUID=a.UUID(),this.state_=0,this.state_=b}return b.prototype.MAIN=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return this.main_.apply(this,[a].concat(b))},b.prototype.main_=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return a},b}();b.Template=c}(b=a.MODEL||(a.MODEL={}))}(d||(d={}));var d;!function(a){var b;!function(b){var c=function(){function b(b){this.UUID=a.UUID(),this.state_=0,this.state_=b}return b}();b.Template=c}(b=a.VIEW||(a.VIEW={}))}(d||(d={}));var d;!function(b){var d;!function(b){var d=function(){function b(a,b){void 0===a&&(a=1),void 0===b&&(b=0),this.list_=[],this.config_={mode:1,size:0},this.table_={},this.option_={},this.config_.mode=a||this.config_.mode,this.config_.size=b||this.config_.size}return b.prototype.define=function(a,b,c){void 0===b&&(b=this.config_.mode),void 0===c&&(c=this.config_.size),this.option_[a]={mode:b,size:c},this.table_[a]=[]},b.prototype.reserve=function(a,b){switch(typeof a){case"string":!this.option_[a]&&this.define(a);var d=this.option_[a],e=this.table_[a],f=[].slice.call(arguments,2);break;case"function":b=a,a=c;var d=this.config_,e=this.list_,f=[].slice.call(arguments,1);break;default:return}if("function"==typeof b){var g;g=d.mode>0?"push":"unshift",e[g]([b,f.shift(),f])}},b.prototype.digest=function(b,d){switch(typeof b){case"string":!this.option_[b]&&this.define(b),d=d||0;var e=this.option_[b],f=this.table_[b];if(!f)return;break;case"number":case"undefined":d=b||0,b=c;var e=this.config_,f=this.list_;break;default:return}f.length>e.size&&e.size&&(e.mode>0?f.splice(0,f.length-e.size):f.splice(f.length-e.size,f.length));var g;for(d=d||-1;g=d--&&f.pop();)g.shift().apply(g.shift()||a,g.shift()||[]);if(c===b){var h=this.table_;for(var i in h)this.digest(i,d)}},b.prototype.clear=function(a){switch(typeof a){case"string":!this.option_[a]&&this.define(a),this.table_[a].splice(0,this.table_[a].length);break;default:var b=this.table_;for(var c in b)this.clear(c)}},b}();b.Task=d}(d=b.LIBRARY||(b.LIBRARY={}))}(d||(d={}));var d;!function(d){var e;!function(e){var f=function(){function e(e,f,g){var h=this;this.model_=e,this.view_=f,this.controller_=g,this.task_=new d.LIBRARY.Task(-1,1),this.queue_=[],this.handlers_={customHandler:function(d,e,f,g){var i=d;if(h.view_!==h.model_.getView(i.data))return void h.view_.close();e=e instanceof jQuery.Event?e:c;var j=h.model_.getView(i.data),k=j.setting,l=a===d.currentTarget?b:d.currentTarget,m=e?a===e.currentTarget?b:e.currentTarget:l,n=b===m||a===m?0:1,o=!e;!f&&i.stopPropagation(),(f||i.target===i.currentTarget)&&(!j.substance||g?(j.dispatch(k.nss.event,[e,!1].concat(g||[])),g&&g(j)):i.target===i.currentTarget&&2===j.state()&&h.reserve(d,e,l,m,n,o))},nativeHandler:function(c){if(h.view_!==h.model_.getView(c.data))return void h.view_.close();if(!(b!==c.target&&c.target!==c.currentTarget||c.isDefaultPrevented())){var d=h.model_.getView(c.data);2===d.state()&&jQuery(a===c.currentTarget?b:c.currentTarget).trigger(d.setting.nss.event,[c])}}},d.SEAL(this)}return e.prototype.clean_=function(){function a(a,b){jQuery.removeData(b,d)}var b=this.view_.context,c=this.view_.setting,d=c.nss.data_count;jQuery.removeData(b,c.nss.data),this.view_.substance&&jQuery(b).find(c.trigger).each(a)},e.prototype.observe=function(){var c=this.view_,e=c.setting,f=c.context,g=jQuery(c.context);jQuery(f)[d.DEF.NAME]().close(e.ns),jQuery.data(f,e.nss.data,e.uid),g.bind(e.nss.event,e.uid,this.handlers_.customHandler),b===f?jQuery(a).bind(e.nss.scroll,e.uid,this.handlers_.nativeHandler).bind(e.nss.resize,e.uid,this.handlers_.nativeHandler):g.bind(e.nss.scroll,e.uid,this.handlers_.nativeHandler).bind(e.nss.resize,e.uid,this.handlers_.nativeHandler)},e.prototype.release=function(){var c=this.view_,d=c.setting,e=c.context,f=jQuery(e);f.unbind(d.nss.event,this.handlers_.customHandler),b===e?jQuery(a).unbind(d.nss.scroll,this.handlers_.nativeHandler).unbind(d.nss.resize,this.handlers_.nativeHandler):f.unbind(d.nss.scroll,this.handlers_.nativeHandler).unbind(d.nss.resize,this.handlers_.nativeHandler),this.clean_()},e.prototype.reserve=function(a,b,c,d,e,f){for(var g,h=this,i=this.view_,j=i.setting,k=(i.status,this.queue_);g=k.shift();)clearTimeout(g);this.task_.reserve(e?"node":"root",this.digest,this,a,b,c,d,e),2!==this.view_.state()||2!==this.model_.state()||!f&&j.delay?k.push(setTimeout(function(){return void h.task_.digest("node")||void h.task_.digest()},j.delay)):(this.task_.digest("node"),this.task_.digest())},e.prototype.digest=function(a,b,c,d,e){for(var f,g=this.queue_;f=g.shift();)clearTimeout(f);this.view_.process(a,b,c,d,e)},e}();e.Observer=f}(e=d.VIEW||(d.VIEW={}))}(d||(d={}));var d,e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};!function(d){var f;!function(f){var g=function(g){function h(a,b){g.call(this,1),this.model_=a,this.controller_=b,this.observer=new f.Observer(this.model_,this,this.controller_),this.children_=[],this.status={index:0,count:0,first:!0,scroll:[],direction:1,distance:0,turn:!1,end:!1,param:c}}return e(h,g),h.prototype.state=function(){return this.state_},h.prototype.initiate_=function(c,e,f){var g=this,h=null,i=[];c=c.map(function(c,d){switch(!0){case b===d:case a===d:return h?null:h=b;case g.model_.isDOM(d)&&jQuery.contains(b.documentElement,d):return i.push(d),d}});var j=h?h:i[0];switch(!1){case!!h||1===i.length:case j===b||jQuery.contains(b.documentElement,j):return}return this.root_=!!h,this.parent_=f||null,this.context=j,this.substance=1===c.length,this.setting=e,this.status.param=e.param,this.status.scroll=[0,0],e.standby||!this.substance||jQuery(j).find(e.trigger).length?(this.observer.observe(),this.model_.addView(this),d.SEAL(this),this.root_&&jQuery.each(i,function(a,b){var c=new d.View(g.model_,g.controller_);g.children_.push(c),c.open(jQuery(b),e.clone(),g)}),!0):void this.close()},h.prototype.terminate_=function(){this.state_=8,jQuery.each(this.children_,function(a,b){return b.close()}),this.observer.release();var a=this.parent_;return this.parent_=null,this.model_.removeView(this.setting.uid),a&&a.correct(),!0},h.prototype.correct=function(){var a=this;if(9===this.state())return!1;var b=!1,c=this.setting;switch(this.children_=jQuery.grep(this.children_,function(c){switch(c.correct(),c.state()){case 7:case 9:return c.close(),b=b||1===a.children_.length,!1;default:return!0}}),this.state()){case 7:b=!0}return b=b||2<=this.state()&&c.uid!==jQuery.data(this.context,c.nss.data),b&&this.close(),!b},h.prototype.open=function(a,b,c){a[d.DEF.NAME].close(b.nss.event),this.initiate_(a,b,c)?this.state_=2:this.close()},h.prototype.close=function(){this.terminate_()?this.state_=9:(this.state_=9,this.model_.removeView(this.setting.uid))},h.prototype.process=function(a,b,c,d,e){if(this.correct()){switch(this.state()){case 2:break;case 3:this.observer.reserve(a,b,c,d,e,!1);default:return}this.state_=4,this.model_.process(this,a,b,c,d),this.state_=2}},h.prototype.enable=function(){if(jQuery.each(this.children_,function(a,b){return b.enable()}),2!==this.state()&&3!==this.state())throw new Error("Enabling only while open or pause state.");this.state_=2},h.prototype.disable=function(){if(jQuery.each(this.children_,function(a,b){return b.disable()}),2!==this.state()&&3!==this.state())throw new Error("Disabling only while open or pause state.");this.state_=3},h.prototype.dispatch=function(a,b){jQuery.each(this.children_,function(c,d){a instanceof jQuery.Event&&a.target===d.context||jQuery(d.context).trigger(a,b)})},h}(f.Template);f.Main=g}(f=d.VIEW||(d.VIEW={}))}(d||(d={}));var d;!function(a){a.View=a.VIEW.Main}(d||(d={}));var d;!function(a){var b;!function(b){var c=function(){function b(){a.FREEZE(this)}return b.prototype.enable=function(b,c){return a.Model.singleton().lookup(this,b,c,function(a){a.enable()}),this},b.prototype.disable=function(b,c){return a.Model.singleton().lookup(this,b,c,function(a){a.disable()}),this},b.prototype.vtrigger=function(b,c){return a.Model.singleton().lookup(this,b,c,function(a){jQuery(a.context).trigger(a.setting.nss.event)}),this},b.prototype.open=function(b){return this instanceof jQuery?this.end()[a.DEF.NAME](b):jQuery[a.DEF.NAME](b),this},b.prototype.close=function(b,c){return a.Model.singleton().lookup(this,b,c,function(a){a.close()}),this},b}();b.Functions=c}(b=a.CONTROLLER||(a.CONTROLLER={}))}(d||(d={}));var d;!function(a){var b;!function(b){var c=function(){function b(){a.FREEZE(this)}return b}();b.Methods=c}(b=a.CONTROLLER||(a.CONTROLLER={}))}(d||(d={}));var d;!function(b){var c;!function(c){var d=function(){function c(a,c){this.UUID=b.UUID(),this.state_=0,this.PROPERTIES=[],this.state_=c}return c.prototype.EXTEND=function(a){return a instanceof b.DEF.NAMESPACE?(a instanceof jQuery&&(a=a.add()),this.REGISTER_FUNCTION(a),this.REGISTER_METHOD(a)):(a!==this.EXTENSION&&(a=this.EXTENSION),this.REGISTER_FUNCTION(a)),this.UPDATE_PROPERTIES(a),a},c.prototype.REGISTER=function(c){var d=this;this.EXTENSION=this.EXTENSION||function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var e=d.EXTEND(this);return a=[e].concat(a),a=d.EXEC.apply(d,a),a instanceof Array?c.MAIN.apply(c,a):a},this.EXTEND(this.EXTENSION),a[b.DEF.NAMESPACE]=a[b.DEF.NAMESPACE]||{},b.DEF.NAMESPACE[b.DEF.NAME]=b.DEF.NAMESPACE.prototype?b.DEF.NAMESPACE.prototype[b.DEF.NAME]=this.EXTENSION:this.EXTENSION},c.prototype.EXEC=function(){return this.exec_.apply(this,arguments)},c.prototype.exec_=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return[a].concat(b)},c.prototype.REGISTER_FUNCTION=function(a){var b=this.FUNCTIONS;for(var c in b)"constructor"!==c&&(a[c]=b[c]);return a},c.prototype.REGISTER_METHOD=function(a){var b=this.METHODS;for(var c in b)"constructor"!==c&&(a[c]=b[c]);return a},c.prototype.UPDATE_PROPERTIES=function(a){var b,c,d,e=this.PROPERTIES;for(b=0,c=e.length;c>b;b++)"constructor"!==b&&(d=e[b],a[d]&&(a[d]=a[d]()));return a},c}();c.Template=d}(c=b.CONTROLLER||(b.CONTROLLER={}))}(d||(d={}));var d;!function(a){var b;!function(b){var c=function(c){function d(d){c.call(this,d,1),this.model_=d,this.FUNCTIONS=new b.Functions,this.METHODS=new b.Methods,this.REGISTER(d),a.FREEZE(this)}return e(d,c),d.prototype.exec_=function(b){var c=[].slice.call(arguments,1,2),d=c[0];switch(b[a.DEF.NAME]=a.DEF.NAMESPACE[a.DEF.NAME],a.DEF.NAMESPACE[this.model_.alias()]&&(b[this.model_.alias()]=a.DEF.NAMESPACE[this.model_.alias()]),typeof d){case"undefined":case"string":case"object":break;default:return b}return d instanceof jQuery||this.model_.isDOM(d)?b instanceof a.DEF.NAMESPACE?b.end().add(d)[a.DEF.NAME]():jQuery(d)[a.DEF.NAME]():[b].concat(c)},d.prototype.view=function(b,c){var d=new a.View(this.model_,this);return d.open(b,c),d},d}(b.Template);b.Main=c;var d=function(){function b(d){void 0===d&&(d=a.Model.singleton()),b.instance_=b.instance_||new c(d)}return b.singleton=function(){return b.instance_},b.prototype.singleton=function(){return b.singleton()},b}();b.Singleton=d}(b=a.CONTROLLER||(a.CONTROLLER={}))}(d||(d={}));var d;!function(a){a.Controller=a.CONTROLLER.Singleton}(d||(d={}));var d;!function(d){var e;!function(e){var f;!function(e){var f=function(){function e(a,b){this.model_=a,this.controller_=b,d.SEAL(this)}return e.prototype.initialize=function(c,e){var f=this,g=this.configure(c,e);e=e.end()[d.DEF.NAME](g.global?b:null),e=e.map(function(c,d){switch(!0){case b===d:return d;case a===d:return~jQuery.inArray(b,e.get())?null:b;case f.model_.isDOM(d)&&jQuery.contains(b.documentElement,d):return d;default:return null}}),g.global||~jQuery.inArray(b,e.get())||~jQuery.inArray(a,e.get())?this.controller_.view(e,g):e.each(function(a){return f.controller_.view(e.eq(a),g)})},e.prototype.configure=function(a){a=jQuery.extend(!0,{},a.option||a),d.FREEZE(a,!0);var b,e={ns:"",global:!0,trigger:null,handler:null,param:c,chain:!0,rush:0,ahead:0,skip:!1,repeat:!1,delay:300,step:1,cache:!0},f={gns:d.DEF.NAME,option:a,clone:function(){return d.FREEZE(jQuery.extend(!0,{},this,{uid:d.UUID()}),!0)}},g=function(){b.ns=b.ns&&"."===b.ns.charAt(0)?b.ns.slice(1):b.ns,b.ns=b.ns&&b.ns.split(".").sort().join(".")||"";var a=[d.DEF.NAME].concat(b.ns&&b.ns.split(".")||[]);return b.ahead=b.ahead instanceof Array?b.ahead.concat(b.ahead).slice(0,2):[b.ahead,b.ahead],b.ahead[0]=Math.abs(b.ahead[0])<1?"*"+10*b.ahead[0]:""+b.ahead[0],b.ahead[1]=Math.abs(b.ahead[1])<1?"*"+10*b.ahead[1]:""+b.ahead[1],b.step=+!!b.step,{uid:d.UUID(),nss:{name:b.ns||"",array:a,event:a.join("."),data:a.join("-"),alias:[b.gns].concat(a.slice(1)).join("."),scroll:["scroll"].concat(a.join(":")).join("."),resize:["resize"].concat(a.join(":")).join("."),data_count:"_"+a.concat("count").join("-")}}};return b=jQuery.extend(!0,e,a),b=jQuery.extend(!0,b,f),b=jQuery.extend(!0,b,g()),d.FREEZE(b,!0)},e.prototype.process=function(c,d,e,f,g,h){var i=c.setting,j=c.status,k=h.$targets=!h.update&&i.step?h.$targets:jQuery(f).find(i.trigger),l=k.eq(j.index),m=h.root=h.update?a===c.context||b===c.context:h.root,n=h.layer=h.update?b===g||a===g?0:1:h.layer,o=h.evtCurrScroll=h.update?jQuery(g).scrollTop():h.evtCurrScroll,p=h.evtLastScroll=h.update?j.scroll[n]:h.evtLastScroll,q=h.direction=h.update?o===p?j.direction:p>o?-1:1:h.direction,r=h.distance=h.update?Math.abs(o-p):h.distance;if(!i.standby||!j.first||l.length){switch(j.direction!==q&&(j.turn=!0,j.end=!1,j.direction=q,j.index=j.index<0?0:k.length<=j.index?k.length-1:j.index,l=k.eq(j.index)),j.distance=0===r?j.distance:r,j.scroll[n]=o,!0){case j.index<0||k.length<=j.index:case!k.length||!l.length:case!jQuery.contains(b.documentElement,l[0]):break;default:var s,t,u,v,w,x,y,z,A,B,C,D,E;s=h.$win=h.update?jQuery(a):h.$win,t=h.winTop=h.update?s.scrollTop():h.winTop,u=h.winHeight=h.update?s.height():h.winHeight,v=t+u;var F,G,H,I,J,K;H=i.ahead[0]+"",F=h.aheadTop=h.update?"*"===H.charAt(0)?parseInt(u*Number(H.slice(1))+"",10):parseInt(H+"",10):h.aheadTop,H=i.ahead[1]+"",G=h.aheadBottom=h.update?"*"===H.charAt(0)?parseInt(u*Number(H.slice(1))+"",10):parseInt(H+"",10):h.aheadBottom,I=h.rush=h.update?0>i.rush?k.length+i.rush+1:i.rush:h.rush,w=jQuery(f),m?(x=h.frameTop=h.update?t:h.frameTop,y=h.frameHeight=h.update?u:h.frameHeight,z=x+y):(x=h.frameTop=h.update?parseInt(w.offset().top+"",10):h.frameTop,y=h.frameHeight=h.update?w.outerHeight():h.frameHeight,z=x+y),D=h.visibleTop=h.update?Math.max(x,t):h.visibleTop,E=h.visibleBottom=h.update?Math.min(z,v):h.visibleBottom,A=parseInt(l.offset().top+"",10),B=l.outerHeight(),C=A+B,J=E>=A-G,K=C+F>=D;var L=!1,M=1,N=!1,O=!1;switch(!0){case j.first&&I>j.index&&(i.repeat||!jQuery.data(l[0],i.nss.data_count)):O=I>j.index;break;case!i.skip&&!i.repeat:L=1===j.direction?J:K&&((n?D<=C-j.distance+F:t<=C-j.distance+F)?!1:L);break;case i.skip&&!i.repeat:L=J&&K;break;case!i.skip&&i.repeat:L=1===j.direction?J:K,!L||j.first||e&&"scroll"!==e.type||(L=1===j.direction?(n?E>=A+j.distance-G:v>=A+j.distance-G)?!1:L:(n?D<=C-j.distance+F:t<=C-j.distance+F)?!1:L);break;case i.skip&&i.repeat:L=J&&K,!L||j.first||e&&"scroll"!==e.type||(L=1===j.direction?(n?E>=A+j.distance-G:v>=A+j.distance-G)?!1:L:(n?D<=C-j.distance+F:t<=C-j.distance+F)?!1:L)}O?(L=N=!0,M=i.step):(N=1===j.direction?J:K,M=i.step?i.step*j.direction:L?1===j.direction?0:-1:j.direction,L=L&&!i.repeat&&jQuery.data(l[0],i.nss.data_count)?!1:L)}L&&(j.count++,jQuery.data(l[0],i.nss.data_count,(jQuery.data(l[0],i.nss.data_count)||0)+1),j.param=i.handler.apply(l[0],[j.index,l[0],i.chain?j.param:i.param,{event:e,container:f,activator:g,count:jQuery.data(l[0],i.nss.data_count),direction:j.direction}])),k=N?k:jQuery(f).find(i.trigger),l=null,!k.length||!i.repeat&&i.step&&j.count>=k.length?c.close():(h.update=!i.cache,h.recursion=!0,j.index+=N?M:0,N&&this.process(c,d,e,f,g,h)),j.first=j.first?!L:!1,j.turn=!1,h.recursion=!1}},e}();e.Main=f}(f=e.APP||(e.APP={}))}(e=d.MODEL||(d.MODEL={}))}(d||(d={}));var d;!function(a){var b;!function(a){a.App=a.APP.Main}(b=a.MODEL||(a.MODEL={}))}(d||(d={}));var d;!function(a){var d;!function(d){var f=function(f){function g(){f.call(this,1),this.controller_=new a.Controller(this).singleton(),this.views_={},this.app_=new d.App(this,this.controller_),this.state_=0,this.alias_="vt",this.state_=2,a.SEAL(this)}return e(g,f),g.prototype.state=function(){return this.state_},g.prototype.alias=function(b){return arguments.length?(b=b||a.DEF.NAME,this.alias_=b,b===a.DEF.NAME||jQuery[b]||jQuery.fn[b]||(jQuery[b]=jQuery[a.DEF.NAME],jQuery.fn[b]=jQuery.fn[a.DEF.NAME]),this.alias()):this.alias_},g.prototype.main_=function(c,d){switch(typeof d){case"undefined":d=this.alias();case"string":return this.alias(d),c[this.alias()]=c[a.DEF.NAME],c;case"object":if(c=c instanceof a.DEF.NAMESPACE?c:jQuery(b)[a.DEF.NAME](),!d.trigger||!d.handler)return c;if(0===d.step&&d.repeat)return c;d=a.FREEZE(d,!0);break;default:return c}return this.app_.initialize(d,c),arguments[0]},g.prototype.lookup=function(b,d,e,f){"string"!=typeof d&&e===c?(e=!!d,d=""):d=d||"",d=jQuery.map(d.split(/\s+/),function(a){return a.split(".").sort().join(".")}).sort().join(" ");var g=jQuery.map(d.split(/\s+/),function(a){return new RegExp("(?:^|[.s])"+a+"(?:$|[.s])")}),h=function(a){switch(!1){case!d||!!jQuery.grep(g,function(b){return b.test(a.setting.ns)}).length:case a.correct():break;default:f(a)}};b instanceof a.DEF.NAMESPACE?b.trigger(a.DEF.NAME,[null,e,h]):jQuery.each(this.views_,function(a,b){return h(b)})},g.prototype.process=function(a,b,c,d,e){switch(this.state()){case 2:break;case 3:jQuery(e).trigger(a.setting.nss.event,[c,!1]);default:return}this.state_=4,this.app_.process(a,b,c,d,e,{update:!0}),this.state_=2},g.prototype.isDOM=function(a){return a&&"object"==typeof a?a===a.window||"ownerDocument"in a:!1},g.prototype.addView=function(a){this.removeView(a.setting.uid),this.views_[a.setting.uid]=a},g.prototype.getView=function(a){return this.views_[a]},g.prototype.removeView=function(a){var b=this.getView(a);b&&8>b.state()&&b.close(),delete this.views_[a]},g}(d.Template);d.Main=f;var g=function(){function a(){a.instance_=a.instance_||new f}return a.singleton=function(){return a.instance_},a.prototype.singleton=function(){return a.singleton()},a}();d.Singleton=g}(d=a.MODEL||(a.MODEL={}))}(d||(d={}));var d;!function(a){a.Model=a.MODEL.Singleton}(d||(d={}));var f=function(){function a(){new d.Model}return a}();new f}(window,window.document,void 0,jQuery);

/*! clientenv v0.2.2 | (c) 2013, falsandtru | MIT Licence */
(function(f,d,b,g){var e;function c(k,i,h,l,j){k.fn[j.name]=k[j.name]=function(){return a.apply(this,[k,i,h,l,j].concat([].slice.call(arguments)))};j.setProperties.call(k[j.name])}function a(n,l,h,o,m,k){var i=this;switch(true){default:i=i instanceof n?i:n[m.name];i=m.setProperties.call(i,null,null)}var j;j=n.extend(true,{id:0,gns:m.name,ns:o,userAgent:l.navigator.userAgent,hardware:true,platform:true,os:true,browser:true,font:{family:n("body")[0]?n("body").css("font-family"):"",symbol:true,lang:"en"},attribute:true,support:true,strict:{ie:false},not:true},k);j.nss={array:[m.name].concat(j.ns&&String(j.ns).split(".")||[])};n.extend(true,j=j.scope&&m.scope(j)||j,{nss:{name:j.ns||"",alias:m.alias?[m.alias].concat(j.nss.array.slice(1)).join("."):false,event:j.nss.array.join("."),data:j.nss.array.join("-"),class4html:j.nss.array.join("-")},option:k});m.registrate.call(i,n,l,h,o,m,j);return i}e={name:"clientenv",alias:"",ids:[],settings:[0],count:0,parseHTML:null,setAlias:function(h){e.alias=typeof h==="string"?h:e.alias;if(e.name!==e.alias&&!f[e.alias]){f[e.name][e.alias]=f.fn[e.name];f.fn[e.alias]=f[e.alias]=f.fn[e.name]}},setProperties:function(j,i){var h=this;if(h instanceof f||h===f[e.name]){h=h instanceof f&&i!==g?h.add(i):h;h[e.name]=f[e.name];h.addClass=function(p,o,q){var m,u,r,t,k,s;m=this[0]?this:f("html");u=e.settings[1];if(!p){return this}for(var l=0,n=p.split(/\s+/);p=n[l];l++){s=e.format.apply(this,[p,o]);r=s[0];t=s[1];k=q||t||e.reference.apply(this,[r,t]);if(this.is(r,t)){!u.not&&!k.indexOf("not-")||f(m).addClass(k)}else{if(t===g){continue}!u.not||f(m).addClass((k.indexOf("not-")?"not-":"")+k)}}return this};h.removeClass=function(p,o,q){var m,u,r,t,k,s;m=this[0]?this:f("html");u=e.settings[1];if(!p){return this}for(var l=0,n=p.split(/\s+/);p=n[l];l++){s=e.format.apply(this,[p,o]);r=s[0];t=s[1];k=q||t||e.reference.apply(this,[r,t]);if(this.is(r,t)){!u.not&&!k.indexOf("not-")||f(m).removeClass(k)}else{if(t===g){continue}!u.not||f(m).removeClass((k.indexOf("not-")?"not-":"")+k)}}return this};h.filter=function(l,k){return this.not(this.is(l,k)?"":"*")};h.is=function(q,p){var o,m,k=0;o=q.replace(/"|'/g,"").split(/\s*,\s*/);m=p===g||p==="name"?["name"]:p.replace(/"|'/g,"").split(/\s*,\s*/);for(var n=0,q;q=o[n];n++){for(var l=0,p;p=m[l];l++){p=e.format.apply(this,[q,p]);q=p[0];p=p[1];k+=e.reference.apply(this,[q,p])?1:0}}k=p!==g&&0===p.indexOf("not-")?!k:k;return Boolean(k)};h.data=function(){var k=f.extend(true,{userAgent:this.userAgent},this);delete k[0];return k};h.reset=function(k){1<e.settings.length&&e.settings.splice(1,1);f[e.name](k);return 1<e.settings.length?this:g}}return h},registrate:function(s,q,y,n,v,x){var l=this;x.id=1;v.ids.push(x.id);v.settings[x.id]=x;var H=x.userAgent.toLowerCase(),h={os:{},platform:{},hardware:{},browser:{},attribute:{},font:{}},o;for(var C in h){h[C]=s[v.name][C]}OS:{if(h.os&&(!x.option||!x.option.os&&!x.option.userAgent)){break OS}h.os={name:"",windows8:/Win(dows)? NT 6\.2/i.test(H)&&!~H.indexOf("arm"),windowsRT:/Win(dows)? NT 6\.2/i.test(H)&&~H.indexOf("arm"),windows7:/Win(dows)? NT 6\.1/i.test(H),windowsVista:/Win(dows)? NT 6\.0/i.test(H),windowsServer2003:/Win(dows)? NT 5\.2/i.test(H),windowsXP:/Win(dows)? (NT 5\.1|XP)/i.test(H),windowsME:/Win(dows)? (9x 4\.90|ME)/i.test(H),windows2000:/Win(dows)? (NT 5\.0|2000)/i.test(H),windows98:/Win(dows)? 98/i.test(H),windowsNT:/Win(dows)? NT([3-4]\.0| [^0-9]+[^.])/i.test(H),windows95:/Win(dows)? 95/i.test(H),"osx10.8":/Mac OS X 10[._]8/i.test(H),"osx10.7":/Mac OS X 10[._]7/i.test(H),"osx10.6":/Mac OS X 10[._]6/i.test(H),"osx10.5":/Mac OS X 10[._]5/i.test(H),"osx10.4":/Mac OS X 10[._]4/i.test(H),"osx10.3":/Mac OS X 10[._]3/i.test(H),"osx10.2":/Mac OS X 10[._]2/i.test(H),"osx10.1":/Mac OS X 10[._]1/i.test(H),"osx10.0":/Mac OS X 10[._]0/i.test(H),ios:~H.indexOf("iphone os")||~H.indexOf("like mac os x"),androidos:~H.indexOf("android"),otherOS:false};o=h.os;for(var C in o){if(!o[C]||C==="name"){continue}o.name=C}if(!h.os.name){h.os.name="otherOS";h.os.otherOS=true}}PLATFORM:{if(h.platform&&(!x.option||!x.option.platform&&!x.option.userAgent)){break PLATFORM}h.platform={name:"",windows:~H.indexOf("windows"),mac:~H.indexOf("macintosh"),linux:~H.indexOf("x11"),android:~H.indexOf("android"),iphone:~H.indexOf("iphone"),ipad:~H.indexOf("ipad"),ipod:~H.indexOf("ipod"),windowsPhone:~H.indexOf("windows phone"),blackberry:~H.indexOf("blackberry"),wii:~H.indexOf("nintendo wii"),ds:~H.indexOf("nitro"),psp:~H.indexOf("psp"),ps2:~H.indexOf("ps2"),ps3:~H.indexOf("playstation 3"),otherPlatform:false};o=h.platform;for(var C in o){if(!o[C]||C==="name"){continue}o.name=C}if(!h.platform.name){h.platform.name="otherPlatform";h.platform.otherPlatform=true}}HARDWARE:{if(h.hardware&&(!x.option||!x.option.hardware&&!x.option.userAgent)){break HARDWARE}h.hardware={name:"",pc:h.platform.windows||h.platform.mac,mobile:~H.indexOf("mobile"),tablet:~H.indexOf("tablet"),game:h.platform.wii||h.platform.ds||h.platform.psp||h.platform.ps2||h.platform.ps3,otherHardware:false};o=h.hardware;for(var C in o){if(!o[C]||C==="name"){continue}o.name=C}if(!h.hardware.name){h.hardware.name="otherHardware";h.hardware.otherHardware=true}}BROWSER:{if(h.browser&&(!x.option||!x.option.browser&&!x.option.userAgent)){break BROWSER}h.browser={name:"",version:(H.match(/(?:chrome|firefox|safari|msie|rv|opera(?:\/.+ version)?|version)[\/:\s]([\d.]+)/)||[])[1],chrome:~H.indexOf("chrome"),safari:~H.indexOf("safari")&&!~H.indexOf("chrome"),opera:~H.indexOf("opera")&&!h.platform.wii&&!h.platform.ds,firefox:~H.indexOf("firefox"),mozilla:~H.indexOf("mozilla")&&!~H.indexOf("compatible")&&!~H.indexOf("webkit")&&!~H.indexOf("firefox"),lunascape:~H.indexOf("lunascape"),sleipnir:~H.indexOf("sleipnir"),ie:~H.indexOf("msie")&&!~H.indexOf("opera")||~H.indexOf("trident")&&~H.indexOf("rv:"),otherBrowser:false};for(var C=5,k;C<=15;C++){h.browser["ie"+C]=Boolean(h.browser.ie&&0===h.browser.version.indexOf(C))}if(x.strict.ie){h.browser.ie=h.browser.ie&&/^\d{2}\./.test(h.browser.version)||Boolean(s("<!--[if IE]><wbr><![endif]-->").length&&s("<!--[if IE]><wbr><![endif]-->")[0].nodeType===1);for(var C=5,k;C<=9;C++){k=s("<!--[if IE "+C+"]><wbr><![endif]-->");h.browser["ie"+C]=Boolean(k.length&&k[0].nodeType===1);k=null}}o=h.browser;for(var C in o){if(!o[C]||C==="name"){continue}o.name=C}if(!h.browser.name){h.browser.name="otherBrowser";h.browser.otherBrowser=true}}ATTRIBUTE:{if(h.attribute&&(!x.option||!x.option.attribute&&!x.option.userAgent)){break ATTRIBUTE}h.attribute={name:"",touch:!!~H.indexOf("touch")||h.hardware.tablet||h.platform.iphone||h.platform.ipad||(h.platform.android&&h.hardware.mobile),bot:/Bot\W|Robot|Crawler|Spider/i.test(H)}}FONT:{if(h.font&&(!x.option||!x.option.font&&!x.option.userAgent)){break FONT}if(!x.font||!s("body").length){break FONT}var r,m,k,F,p,t,K,A,J;p=["monospace","fantasy","cursive","sans-serif","serif"];F="font-size: 72px !important; font-style: normal !important; font-weight: normal !important; font-variant: normal !important; letter-spacing: normal !important; line-height: normal !important; display: block !important; visibility: hidden !important; position: absolute !important; top: -9999px !important; left: -9999px !important; width: auto !important; height: auto !important; ";K="alphanumericmmmmmmmmm1234567890";A=x.font.symbol?"_!#$&:;@+-*/%=^\\(){}[]<>":"";J={en:"environment",ja:"@@JLE"};t=K+A;for(var C=0,u=x.font.lang.split(/\s*,\s*/),I;I=u[C];C++){if(I in J){t+=J[I]}}m=[];m[0]=s("<pre/>").text(t);m[1]=s("<pre/>").text(t);r=s("body");r.append(m[0],m[1]);for(var C=0;C+1<p.length;C++){m[0].attr("style","font-family: "+p.slice(C+0).join(", ")+" !important; "+F);m[1].attr("style","font-family: "+p.slice(C+1).join(", ")+" !important; "+F);if(m[0][0].offsetWidth!==m[1][0].offsetWidth||m[0][0].offsetHeight!==m[1][0].offsetHeight){}else{p.splice(C--,1)}}m[0].attr("style","font-family: "+p.join(", ")+" !important; "+F);m[1].attr("style","font-family: "+p.slice(1<p.length?1:0).join(", ")+" !important; "+F);F=p.join(", ")+" !important; "+F;p=x.font.family.split(/\s*,\s*/);h.font={support:"",support4style:"",notsupport:"",notsupport4style:""};k=s("<pre/>").text(t);r.append(k);for(var C=0,w,G;G=p[C];C++){w=G.replace(/"|'/g,"");for(var B=0,E=m.length,z,D;z=m[B];B++){k.attr("style","font-family: "+G+", "+F.slice(!B?0:F.indexOf(", ")+2));if(z[0].offsetWidth!==k[0].offsetWidth||z[0].offsetHeight!==k[0].offsetHeight||h.os.androidos||h.os.ios){h.font[w]=true;h.font.support+=","+w;h.font.support4style+=","+G;break}else{if(B===E-1){h.font[w]=false;h.font.notsupport+=","+w;h.font.notsupport4style+=","+G}}}}m[0].remove();m[0]=null;m[1].remove();m[1]=null;k.remove();k=null;h.font.support=h.font.support.slice(1);h.font.notsupport=h.font.notsupport.slice(1);h.font.support4style=h.font.support4style.slice(1);h.font.notsupport4style=h.font.notsupport4style.slice(1);h.font.name=h.font.support.split(/\s*,\s*/,2)[0]}SUPPORT:{if(!h.support){break SUPPORT}h.support=s.support}s.extend(true,l,h)},format:function(k,j){if(k in this&&j){j=j?j.replace(/(\S+):(\S+)/,"$2-$1"):j;j=j?j.replace(/(\w+)-(not-)/,"$2-$1"):j}else{if(k in this){}else{k=k?k.replace(/(\S+):(\S+)/,"$2-$1"):k;k=k?k.replace(/(\w+)-(not-)/,"$2-$1"):k;j=[k.split(/(?:not|lte|lt|gte|gt)-/).pop()][0];for(var h in this){if(typeof this[h]!=="object"){continue}if(j in this[h]){j=k;k=h}}}}return[k,j]},reference:function(p,o){var k,n,j=[g,g],h;k=o===g?[o]:o.replace(/(not|)-?(lte|lt|gte|gt|)-?(\S+)/,"$3,$2,$1").split(",");k[2]=k[2]==="not"?false:true;switch(true){case !o||!~o.indexOf("-"):o=o?o:"name";if(this[p]&&o in this[p]){h=this[p][o]}else{h=g}return k[2]?h:!h;break;case p==="os"&&!k[0].indexOf("windows"):n=["windows8","windowsRT","windows7","windowsVista","windowsServer2003","windowsXP","windowsME","windows2000","windows98","windowsNT","windows95"];break;case p==="os"&&!k[0].indexOf("osx"):n=["osx10.8","osx10.7","osx10.6","osx10.5","osx10.4","osx10.3","osx10.2","osx10.1","osx10.0"];break;case p==="browser"&&!k[0].indexOf("ie"):n=["ie15","ie14","ie13","ie12","ie11","ie10","ie9","ie8","ie7","ie6","ie5"];break;default:return g}for(var l=0,m;m=n[l];l++){if(this[p]["name"]===m){j[0]=l}if(k[0]===m){j[1]=l}}if(g in j){return g}switch(k[1]){case"gt":h=j[0]<j[1];break;case"gte":h=j[0]<=j[1];break;case"lt":h=j[0]>j[1];break;case"lte":h=j[0]>=j[1];break;default:return g}return k[2]?h:!h}};c.apply(this,[].slice.call(arguments).concat([e]))})(jQuery,window,document,void 0);
